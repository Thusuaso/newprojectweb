{"ast":null,"code":"import service from '../../service/RaporService';\nimport { mapGetters } from 'vuex';\nexport default {\n  data() {\n    return {\n      komisyonMasraflar: null,\n      selectedYear: 2022,\n      years: [{\n        year: 2022\n      }, {\n        year: 2021\n      }, {\n        year: 2020\n      }],\n      topKomisyon: null\n    };\n  },\n  computed: {\n    ...mapGetters(['servis_adres'])\n  },\n  methods: {\n    KomisyonMasraflarService(year) {\n      service.getKomisyonMasraflar(year).then(data => {\n        this.komisyonMasraflar = data;\n        this.miktarTopla(data);\n      });\n    },\n    isSelectedYear(event) {\n      this.KomisyonMasraflarService(event.value.year);\n    },\n    formatDecimal(value) {\n      let val = (value / 1).toFixed(2).replace('.', ',');\n      return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n    },\n    formatPrice(value) {\n      let val = (value / 1).toFixed(2).replace('.', ',');\n      return \"$\" + val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n    },\n    miktarTopla(data) {\n      this.topKomisyon = 0;\n      for (let item of data) {\n        this.topKomisyon += item.komisyon;\n      }\n    },\n    get_komisyon_excell_cikti_btn() {\n      service.getKomisyonMasraflarExcel(this.komisyonMasraflar).then(response => {\n        if (response.status) {\n          const link = document.createElement(\"a\");\n          link.href = this.servis_adres + 'islemler/listeler/komisyonMasraflarExcel';\n          link.setAttribute('download', 'komisyonMasraflarExcel.xlsx');\n          document.body.appendChild(link);\n          link.click();\n          this.is_excel = false;\n        }\n      });\n    }\n  },\n  created() {\n    this.KomisyonMasraflarService(this.selectedYear);\n    this.selectedYear = {\n      'year': 2022\n    };\n  }\n};","map":{"version":3,"mappings":"AA8BA,OAAOA,OAAM,MAAO,4BAA2B;AAC/C,SAASC,UAAS,QAAS,MAAM;AACjC,eAAe;EACXC,IAAI,GAAG;IACH,OAAO;MACHC,iBAAiB,EAAE,IAAI;MACvBC,YAAY,EAAE,IAAI;MAClBC,KAAK,EAAE,CACH;QAAEC,IAAI,EAAE;MAAK,CAAC,EACd;QAAEA,IAAI,EAAE;MAAK,CAAC,EACd;QAAEA,IAAI,EAAE;MAAK,CAAC,CAEjB;MACDC,WAAW,EAAC;IAEhB;EACJ,CAAC;EACDC,QAAQ,EAAE;IAEN,GAAGP,UAAU,CAAC,CAGV,cAAa,CAEhB;EACL,CAAC;EACDQ,OAAO,EAAE;IACLC,wBAAwB,CAACJ,IAAI,EAAE;MAC3BN,OAAO,CAACW,oBAAoB,CAACL,IAAI,CAAC,CAACM,IAAI,CAACV,IAAG,IAAK;QAC5C,IAAI,CAACC,iBAAgB,GAAID,IAAG;QAC5B,IAAI,CAACW,WAAW,CAACX,IAAI;MACzB,CAAC;IACL,CAAC;IACDY,cAAc,CAACC,KAAK,EAAE;MAClB,IAAI,CAACL,wBAAwB,CAACK,KAAK,CAACC,KAAK,CAACV,IAAI;IAClD,CAAC;IACDW,aAAa,CAACD,KAAK,EAAE;MACjB,IAAIE,GAAE,GAAI,CAACF,KAAI,GAAI,CAAC,EAAEG,OAAO,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,GAAG,EAAE,GAAG;MACjD,OAAOF,GAAG,CAACG,QAAQ,EAAE,CAACD,OAAO,CAAC,uBAAuB,EAAE,GAAG;IAC9D,CAAC;IAGDE,WAAW,CAACN,KAAK,EAAE;MACf,IAAIE,GAAE,GAAI,CAACF,KAAI,GAAI,CAAC,EAAEG,OAAO,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,GAAG,EAAE,GAAG;MACjD,OAAO,GAAE,GAAIF,GAAG,CAACG,QAAQ,EAAE,CAACD,OAAO,CAAC,uBAAuB,EAAE,GAAG;IACpE,CAAC;IACDP,WAAW,CAACX,IAAI,EAAE;MACd,IAAI,CAACK,WAAU,GAAI;MACnB,KAAK,IAAIgB,IAAG,IAAKrB,IAAI,EAAE;QACnB,IAAI,CAACK,WAAU,IAAKgB,IAAI,CAACC,QAAO;MAEpC;IACJ,CAAC;IACDC,6BAA6B,GAAG;MAC5BzB,OAAO,CAAC0B,yBAAyB,CAAC,IAAI,CAACvB,iBAAiB,CAAC,CAACS,IAAI,CAACe,QAAO,IAAK;QAEvE,IAAIA,QAAQ,CAACC,MAAM,EAAE;UACjB,MAAMC,IAAG,GAAIC,QAAQ,CAACC,aAAa,CAAC,GAAG;UACvCF,IAAI,CAACG,IAAG,GAAI,IAAI,CAACC,YAAW,GAAI,0CAAyC;UACzEJ,IAAI,CAACK,YAAY,CAAC,UAAU,EAAE,6BAA6B;UAC3DJ,QAAQ,CAACK,IAAI,CAACC,WAAW,CAACP,IAAI;UAC9BA,IAAI,CAACQ,KAAK,EAAC;UACX,IAAI,CAACC,QAAO,GAAI,KAAI;QACxB;MACJ,CAAC;IACL;EACJ,CAAC;EACDC,OAAO,GAAG;IACN,IAAI,CAAC7B,wBAAwB,CAAC,IAAI,CAACN,YAAY;IAC/C,IAAI,CAACA,YAAW,GAAI;MAAE,MAAM,EAAE;IAAK;EACvC;AAEJ","names":["service","mapGetters","data","komisyonMasraflar","selectedYear","years","year","topKomisyon","computed","methods","KomisyonMasraflarService","getKomisyonMasraflar","then","miktarTopla","isSelectedYear","event","value","formatDecimal","val","toFixed","replace","toString","formatPrice","item","komisyon","get_komisyon_excell_cikti_btn","getKomisyonMasraflarExcel","response","status","link","document","createElement","href","servis_adres","setAttribute","body","appendChild","click","is_excel","created"],"sourceRoot":"","sources":["C:\\PROJELER\\NewProjects\\gitPull\\newprojectweb\\src\\components\\musteriraporlari\\komisyonMasraflari.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"columns \" style=\"margin-top:10px;margin-left:15px;\">\r\n\r\n            <Dropdown v-model=\"selectedYear\" :options=\"years\" optionLabel=\"year\" placeholder=\"Select a Year\"\r\n                @change=\"isSelectedYear\" />\r\n\r\n\r\n            <b-button @click=\"get_komisyon_excell_cikti_btn\" style=\"width:10px;height:32px;margin-left:10px;\"><i\r\n                    class=\"fa-solid fa-file-excel fa-2xl\"></i></b-button>\r\n\r\n        </div>\r\n\r\n        <DataTable :value=\"komisyonMasraflar\" :scrollable=\"true\" scrollHeight=\"400px\">\r\n            <Column field=\"musteri\" header=\"Müşteri Adı\" bodyStyle=\"text-align:center;\"></Column>\r\n            <Column field=\"komisyon\" header=\"Komisyon ($)\" bodyStyle=\"text-align:center;\">\r\n                <template #body=\"slotProps\">\r\n                    {{ formatPrice(slotProps.data.komisyon) }}\r\n                </template>\r\n                <template #footer>\r\n                    {{ formatPrice(topKomisyon) }}\r\n                </template>\r\n            </Column>\r\n\r\n\r\n\r\n        </DataTable>\r\n    </div>\r\n</template>\r\n<script>\r\nimport service from '../../service/RaporService'\r\nimport { mapGetters } from 'vuex';\r\nexport default {\r\n    data() {\r\n        return {\r\n            komisyonMasraflar: null,\r\n            selectedYear: 2022,\r\n            years: [\r\n                { year: 2022 },\r\n                { year: 2021 },\r\n                { year: 2020 },\r\n\r\n            ],\r\n            topKomisyon:null\r\n\r\n        }\r\n    },\r\n    computed: {\r\n\r\n        ...mapGetters([\r\n\r\n\r\n            'servis_adres'\r\n\r\n        ])\r\n    },\r\n    methods: {\r\n        KomisyonMasraflarService(year) {\r\n            service.getKomisyonMasraflar(year).then(data => {\r\n                this.komisyonMasraflar = data\r\n                this.miktarTopla(data)\r\n            })\r\n        },\r\n        isSelectedYear(event) {\r\n            this.KomisyonMasraflarService(event.value.year)\r\n        },\r\n        formatDecimal(value) {\r\n            let val = (value / 1).toFixed(2).replace('.', ',')\r\n            return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")\r\n        },\r\n\r\n\r\n        formatPrice(value) {\r\n            let val = (value / 1).toFixed(2).replace('.', ',')\r\n            return \"$\" + val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")\r\n        },\r\n        miktarTopla(data) {\r\n            this.topKomisyon = 0\r\n            for (let item of data) {\r\n                this.topKomisyon += item.komisyon\r\n                \r\n            }\r\n        },\r\n        get_komisyon_excell_cikti_btn() {\r\n            service.getKomisyonMasraflarExcel(this.komisyonMasraflar).then(response => {\r\n\r\n                if (response.status) {\r\n                    const link = document.createElement(\"a\")\r\n                    link.href = this.servis_adres + 'islemler/listeler/komisyonMasraflarExcel'\r\n                    link.setAttribute('download', 'komisyonMasraflarExcel.xlsx')\r\n                    document.body.appendChild(link)\r\n                    link.click()\r\n                    this.is_excel = false\r\n                }\r\n            })\r\n        }\r\n    },\r\n    created() {\r\n        this.KomisyonMasraflarService(this.selectedYear)\r\n        this.selectedYear = { 'year': 2022 }\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]},"metadata":{},"sourceType":"module"}