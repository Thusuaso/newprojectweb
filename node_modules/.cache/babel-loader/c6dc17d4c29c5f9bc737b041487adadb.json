{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport KullaniciService from '../../../service/KullaniciService';\nimport SiparisService from '../../../service/SiparisService';\nexport default {\n  props: ['sipBilgiler', 'isPesinat'],\n  data() {\n    return {\n      siparislerBilgisi: null,\n      kullaniciList: null,\n      kullaniciService: null,\n      selectedFinansman: null,\n      filteredFinansman: null,\n      finansmanId: null,\n      selectedSatisci: null,\n      satisciId: null,\n      filteredSatisci: null,\n      selectedOperasyon: null,\n      operasyonId: null,\n      filteredOperasyon: null,\n      selectedProduct: null,\n      products: [],\n      isProduct: false,\n      productAmount: 0,\n      productAmountDetail: null,\n      sipUrunBilgisi: null,\n      oldAmount: null,\n      newAmount: null,\n      productsNewAmount: [],\n      oldPayment: null,\n      newPayment: null,\n      newInformation: []\n    };\n  },\n  created() {\n    this.siparislerBilgisi = this.sipBilgiler;\n    this.kullaniciService = new KullaniciService();\n    this.siparisService = new SiparisService();\n    this.kullaniciListLoad();\n    this.sipNoDuzenleme();\n    this.productList();\n  },\n  mounted() {\n    this.oldPayment = this.sipBilgiler.siparis.pesinat;\n  },\n  methods: {\n    siparisibol() {\n      this.siparisService.setsiparisBolmeGuncelle(this.sipBilgiler).then(data => {\n        if (data) {\n          this.$toast.add({\n            severity: 'success',\n            summary: 'Sipariş Bölme',\n            detail: 'Sipariş bölme başarıyla gerçekleştirildi.',\n            life: 3000\n          });\n        } else {\n          this.$toast.add({\n            severity: 'error',\n            summary: 'Sipariş Bölme',\n            detail: 'Sipariş bölme hatalı.',\n            life: 3000\n          });\n        }\n      });\n    },\n    isChangePayment(event) {\n      this.newPayment = this.oldPayment - event;\n      this.sipBilgiler.siparis.newPesinat = this.newPayment;\n    },\n    isChangeProductsClick() {\n      this.newAmount = this.formatInteger(this.oldAmount) - this.formatInteger(this.productAmount);\n      this.productsNewAmount.push({\n        'aciklama': this.selectedProduct.aciklama,\n        'newAmount': this.newAmount\n      });\n      for (let i of this.sipBilgiler.siparisUrunler) {\n        if (i.musteriAciklama == this.selectedProduct.aciklama) {\n          if (i.m2 > 0) {\n            i.newAmountm2 = this.newAmount;\n            i.newAmountmiktar = this.newAmount;\n            i.isChange = true;\n          } else if (i.mt > 0) {\n            i.newAmountmt = this.newAmount;\n            i.newAmountmiktar = this.newAmount;\n            i.isChange = true;\n          } else if (i.adet > 0) {\n            i.newAmountadet = this.newAmount;\n            i.newAmountmiktar = this.newAmount;\n            i.isChange = true;\n          }\n        }\n      }\n    },\n    productAmountInput(event) {\n      this.productAmount = event.replace(',', '.');\n      if (this.sipUrunBilgisi.m2 > 0) {\n        for (let i of this.sipBilgiler.siparisUrunler) {\n          if (i.musteriAciklama == this.selectedProduct.aciklama) {\n            i.m2 = this.formatInteger(this.productAmount);\n            i.miktar = this.formatInteger(this.productAmount);\n          }\n        }\n      } else if (this.sipUrunBilgisi.adet > 0) {\n        for (let i of this.sipBilgiler.siparisUrunler) {\n          if (i.musteriAciklama == this.selectedProduct.aciklama) {\n            i.adet = this.formatInteger(this.productAmount);\n            i.miktar = this.formatInteger(this.productAmount);\n          }\n        }\n      } else if (this.sipUrunBilgisi.mt > 0) {\n        for (let i of this.sipBilgiler.siparisUrunler) {\n          if (i.musteriAciklama == this.selectedProduct.aciklama) {\n            i.mt = this.formatInteger(this.productAmount);\n            i.miktar = this.formatInteger(this.productAmount);\n          }\n        }\n      }\n    },\n    formatDecimal(value) {\n      let val = (value / 1).toFixed(2).replace('.', ',');\n      return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n    },\n    formatInteger(val) {\n      return parseFloat(val);\n    },\n    kullaniciListLoad() {\n      this.kullaniciService.getKullaniciList().then(data => {\n        this.filteredFinansman = data;\n        this.filteredSatisci = data;\n        this.filteredOperasyon = data;\n        this.kullaniciList = data;\n        this.selectedFinansman = data.find(x => x.id == this.siparislerBilgisi.siparis.finansman);\n        this.selectedSatisci = data.find(x => x.id == this.siparislerBilgisi.siparis.siparisSahibi);\n        this.selectedOperasyon = data.find(x => x.id == this.siparislerBilgisi.siparis.operasyon);\n      });\n    },\n    filterFinansList(event) {\n      this.filteredFinansman = this.kullaniciList.filter(val => {\n        return val.kullaniciAdi.toLowerCase().startsWith(event.query.toLowerCase());\n      });\n    },\n    finansmanSelected() {\n      this.finansmanId = this.kullaniciList.find(x => x.kullaniciAdi == this.selectedFinansman.kullaniciAdi).id;\n      this.siparislerBilgisi.siparis.finansman = this.finansmanId;\n    },\n    filterSatisciList(event) {\n      this.filteredSatisci = this.kullaniciList.filter(val => {\n        return val.kullaniciAdi.toLowerCase().startsWith(event.query.toLowerCase());\n      });\n    },\n    satisciSelected() {\n      this.satisciId = this.kullaniciList.find(x => x.kullaniciAdi == this.selectedSatisci.kullaniciAdi).id;\n      this.siparislerBilgisi.siparis.siparisSahibi = this.satisciId;\n    },\n    filterOperasyonList(event) {\n      this.filteredOperasyon = this.kullaniciList.filter(val => {\n        return val.kullaniciAdi.toLowerCase().startsWith(event.query.toLowerCase());\n      });\n    },\n    operasyonSelected() {\n      this.operasyonId = this.kullaniciList.find(x => x.kullaniciAdi == this.selectedOperasyon.kullaniciAdi).id;\n      this.siparislerBilgisi.siparis.operasyon = this.operasyonId;\n    },\n    sipNoDuzenleme() {\n      const result = this.siparislerBilgisi.siparis.siparisNo.split(\"-\");\n      if (result.length == 2) {\n        this.siparislerBilgisi.siparis.gidenSiparisNo = this.siparislerBilgisi.siparis.siparisNo;\n        this.siparislerBilgisi.siparis.kalanSiparisNo = result[0] + '- ' + (parseInt(result[1]) + 1);\n      } else {\n        this.siparislerBilgisi.siparis.gidenSiparisNo = this.siparislerBilgisi.siparis.siparisNo + ' - ' + '1';\n        this.siparislerBilgisi.siparis.kalanSiparisNo = this.siparislerBilgisi.siparis.siparisNo + ' - ' + '2';\n      }\n    },\n    productList() {\n      for (let i of this.sipBilgiler.siparisUrunler) {\n        this.products.push({\n          'aciklama': i.musteriAciklama\n        });\n      }\n    },\n    isProductChange() {\n      this.isProduct = true;\n      this.sipUrunBilgisi = this.sipBilgiler.siparisUrunler.find(x => x.musteriAciklama == this.selectedProduct.aciklama);\n      if (this.sipUrunBilgisi.m2 > 0) {\n        this.productAmount = this.sipUrunBilgisi.m2;\n        this.oldAmount = this.sipUrunBilgisi.m2;\n        this.productAmountDetail = 'M2';\n      } else if (this.sipUrunBilgisi.adet > 0) {\n        this.productAmount = this.sipUrunBilgisi.adet;\n        this.oldAmount = this.sipUrunBilgisi.adet;\n        this.productAmountDetail = 'ADET';\n      } else if (this.sipUrunBilgisi.mt > 0) {\n        this.productAmount = this.sipUrunBilgisi.mt;\n        this.oldAmount = this.sipUrunBilgisi.mt;\n        this.productAmountDetail = 'MT';\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["KullaniciService","SiparisService","props","data","siparislerBilgisi","kullaniciList","kullaniciService","selectedFinansman","filteredFinansman","finansmanId","selectedSatisci","satisciId","filteredSatisci","selectedOperasyon","operasyonId","filteredOperasyon","selectedProduct","products","isProduct","productAmount","productAmountDetail","sipUrunBilgisi","oldAmount","newAmount","productsNewAmount","oldPayment","newPayment","newInformation","created","sipBilgiler","siparisService","kullaniciListLoad","sipNoDuzenleme","productList","mounted","siparis","pesinat","methods","siparisibol","setsiparisBolmeGuncelle","then","$toast","add","severity","summary","detail","life","isChangePayment","event","newPesinat","isChangeProductsClick","formatInteger","push","aciklama","i","siparisUrunler","musteriAciklama","m2","newAmountm2","newAmountmiktar","isChange","mt","newAmountmt","adet","newAmountadet","productAmountInput","replace","miktar","formatDecimal","value","val","toFixed","toString","parseFloat","getKullaniciList","find","x","id","finansman","siparisSahibi","operasyon","filterFinansList","filter","kullaniciAdi","toLowerCase","startsWith","query","finansmanSelected","filterSatisciList","satisciSelected","filterOperasyonList","operasyonSelected","result","siparisNo","split","length","gidenSiparisNo","kalanSiparisNo","parseInt","isProductChange"],"sourceRoot":"","sources":["C:\\PROJELER\\NewProjects\\gitPull\\newprojectweb\\src\\components\\siparisler\\siparisListeler\\SiparisBolmeAlani.vue"],"sourcesContent":["<template>\r\n    <section >\r\n        <b-loading :is-full-page=\"true\" :active.sync=\"getLoadStatus\" :can-cancel=\"true\"></b-loading>\r\n      <div class=\"columns is-multiline \">\r\n          <div class=\"column is-12\">\r\n              <div class=\"box\">\r\n                  <div class=\"columns is-multiline\">\r\n                      <div class=\"column is-12\">\r\n                          <span class=\"p-float-label\">\r\n                              <InputText id=\"siparisNo\" v-model=\"siparislerBilgisi.siparis.siparisNo\"></InputText>\r\n                              <label for=\"siparisNo\"><b>Sipariş No</b></label>\r\n                          </span>\r\n                      </div>\r\n                      <div class=\"column is-12\">\r\n                          <span class=\"p-float-label\">\r\n                              <InputText id=\"pesinat\" v-model=\"siparislerBilgisi.siparis.pesinat\" @input=\"isChangePayment\" :disabled.sync=\"isPesinat\"></InputText>\r\n                              <label for=\"pesinat\"><b>Giden Sipariş Peşinatı</b></label>\r\n                          </span>\r\n                      </div>\r\n                      <div class=\"column is-12\">\r\n                            <Dropdown v-model=\"selectedProduct\" :options=\"products\" optionLabel=\"aciklama\" placeholder=\"Select a Products\" style=\"width:500px;\" @change=\"isProductChange\" />\r\n                            <span><Button @click=\"isChangeProductsClick\" label=\"Değiştir\"></Button></span>\r\n                            <span class=\"p-float-label\" v-if=\"isProduct\" style=\"margin-top:25px;\">\r\n                              <InputText id=\"products\" v-model=\"productAmount\" @input=\"productAmountInput\" style=\"width:50px;\"></InputText> <span> {{productAmountDetail}}</span>\r\n                              <label for=\"products\"><b>Giden Ürün Miktarı</b></label>\r\n                          </span>\r\n                          \r\n                          <hr>\r\n                          <h3 style=\"text-align:center;margin-bottom:8px;\"><b>Kalan Ürün Miktarı</b></h3>\r\n                          <ul >\r\n                              <li v-for=\"i in productsNewAmount\" :key=\"i\">Ürün Bilgisi - {{i.aciklama}} : {{formatDecimal(i.newAmount)}} {{productAmountDetail}}</li>\r\n                          </ul>\r\n                          \r\n                      </div>\r\n                                        \r\n                  </div>\r\n              </div>\r\n              \r\n          </div>\r\n          <div class=\"column is-12\">\r\n              <div class=\"box\">\r\n                  <div class=\"columns is-multiline\">\r\n                       <div class=\"column is-12\">\r\n                            <AutoComplete v-model=\"selectedSatisci\" :dropdown=\"true\" :suggestions=\"filteredSatisci\" @item-select=\"satisciSelected\" @complete=\"filterSatisciList($event)\" field=\"kullaniciAdi\" placeholder=\"Satışçı\" />\r\n\r\n                       </div>\r\n                       <div class=\"column is-12\">\r\n                            <AutoComplete v-model=\"selectedOperasyon\" :dropdown=\"true\" :suggestions=\"filteredOperasyon\" @item-select=\"operasyonSelected\" @complete=\"filterOperasyonList($event)\" field=\"kullaniciAdi\" placeholder=\"Operasyon\" />\r\n\r\n                       </div>\r\n                         <div class=\"column is-12\">\r\n                            <AutoComplete v-model=\"selectedFinansman\" :dropdown=\"true\" :suggestions=\"filteredFinansman\" @item-select=\"finansmanSelected\" @complete=\"filterFinansList($event)\" field=\"kullaniciAdi\" placeholder=\"Finansman\" />\r\n\r\n                       </div>\r\n                  </div>\r\n              </div>\r\n              \r\n          </div>\r\n          \r\n      </div>\r\n      <div class=\"columns is-multiline \">\r\n          <div class=\"column is-12\">\r\n              <div class=\"box\">\r\n                  <div class=\"columns is-multiline is-centered\">\r\n                      <div class=\"column is-12\">\r\n                        <Button @click=\"siparisibol\" label=\"Siparişi Böl\"></Button>\r\n                      </div>\r\n                      \r\n                       \r\n                  </div>\r\n              </div>\r\n          </div>\r\n      </div>\r\n\r\n       \r\n    </section>\r\n\r\n        \r\n</template>\r\n<script>\r\nimport KullaniciService from '../../../service/KullaniciService';\r\nimport SiparisService from '../../../service/SiparisService'\r\nexport default {\r\n    props:['sipBilgiler','isPesinat'],\r\n    data(){\r\n        return{\r\n            siparislerBilgisi:null,\r\n            kullaniciList:null,\r\n            kullaniciService:null,\r\n            selectedFinansman:null,\r\n            filteredFinansman:null,\r\n            finansmanId:null,\r\n            selectedSatisci:null,\r\n            satisciId:null,\r\n            filteredSatisci:null,\r\n            selectedOperasyon:null,\r\n            operasyonId:null,\r\n            filteredOperasyon:null,\r\n            selectedProduct:null,\r\n            products:[],\r\n            isProduct:false,\r\n            productAmount:0,\r\n            productAmountDetail:null,\r\n            sipUrunBilgisi:null,\r\n            oldAmount:null,\r\n            newAmount:null,\r\n            productsNewAmount:[],\r\n            oldPayment:null,\r\n            newPayment:null,\r\n            newInformation:[]\r\n\r\n\r\n        }\r\n    },\r\n    created(){\r\n        this.siparislerBilgisi = this.sipBilgiler\r\n        this.kullaniciService = new KullaniciService()\r\n        this.siparisService = new SiparisService()\r\n        this.kullaniciListLoad()\r\n        this.sipNoDuzenleme()\r\n        this.productList()\r\n        \r\n    },\r\n    mounted(){\r\n        this.oldPayment = this.sipBilgiler.siparis.pesinat\r\n    },\r\n    methods:{\r\n        siparisibol() {\r\n            \r\n            this.siparisService.setsiparisBolmeGuncelle(this.sipBilgiler).then(data => {\r\n                if (data) {\r\n                    this.$toast.add({ severity: 'success', summary: 'Sipariş Bölme', detail: 'Sipariş bölme başarıyla gerçekleştirildi.', life: 3000 })\r\n                } else {\r\n                    this.$toast.add({ severity: 'error', summary: 'Sipariş Bölme', detail: 'Sipariş bölme hatalı.', life: 3000 })\r\n\r\n                }\r\n                \r\n            })\r\n                \r\n            \r\n        },\r\n        isChangePayment(event) {\r\n            this.newPayment = this.oldPayment - event\r\n            this.sipBilgiler.siparis.newPesinat = this.newPayment\r\n        }\r\n        ,\r\n        isChangeProductsClick(){\r\n            this.newAmount = this.formatInteger(this.oldAmount) - this.formatInteger(this.productAmount)\r\n            this.productsNewAmount.push({ 'aciklama': this.selectedProduct.aciklama, 'newAmount': this.newAmount })\r\n            for (let i of this.sipBilgiler.siparisUrunler) {\r\n                if (i.musteriAciklama == this.selectedProduct.aciklama) {\r\n                    if (i.m2 > 0) {\r\n                        i.newAmountm2 = this.newAmount\r\n                        i.newAmountmiktar = this.newAmount\r\n                        i.isChange = true\r\n                    } else if (i.mt >0) {\r\n                        i.newAmountmt = this.newAmount\r\n                        i.newAmountmiktar = this.newAmount\r\n                        i.isChange = true\r\n                    } else if (i.adet > 0) {\r\n                        i.newAmountadet = this.newAmount\r\n                        i.newAmountmiktar = this.newAmount\r\n                        i.isChange = true\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        productAmountInput(event){\r\n            this.productAmount = event.replace(',','.')\r\n            if(this.sipUrunBilgisi.m2>0){\r\n                for(let i of this.sipBilgiler.siparisUrunler){\r\n                    if(i.musteriAciklama == this.selectedProduct.aciklama){\r\n                        \r\n                        i.m2 = this.formatInteger(this.productAmount)\r\n                        i.miktar = this.formatInteger(this.productAmount)\r\n                    }\r\n                }\r\n            }else if(this.sipUrunBilgisi.adet>0){\r\n                for(let i of this.sipBilgiler.siparisUrunler){\r\n                    if(i.musteriAciklama == this.selectedProduct.aciklama){\r\n                        \r\n                        i.adet = this.formatInteger(this.productAmount)\r\n                        i.miktar = this.formatInteger(this.productAmount)\r\n                    }\r\n                }\r\n            }else if(this.sipUrunBilgisi.mt>0){\r\n                for(let i of this.sipBilgiler.siparisUrunler){\r\n                    if(i.musteriAciklama == this.selectedProduct.aciklama){\r\n                        \r\n                        i.mt = this.formatInteger(this.productAmount)\r\n                        i.miktar = this.formatInteger(this.productAmount)\r\n                    }\r\n                }\r\n            }\r\n            \r\n        },\r\n        formatDecimal(value) {\r\n            let val = (value/1).toFixed(2).replace('.', ',')\r\n            return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")\r\n          },\r\n        formatInteger(val){\r\n            return parseFloat(val)\r\n        },\r\n        kullaniciListLoad(){\r\n            this.kullaniciService.getKullaniciList().then(data=>{\r\n            this.filteredFinansman = data\r\n            this.filteredSatisci = data\r\n            this.filteredOperasyon = data\r\n            this.kullaniciList = data\r\n            this.selectedFinansman = data.find(x=>x.id == this.siparislerBilgisi.siparis.finansman)\r\n            this.selectedSatisci = data.find(x=>x.id==this.siparislerBilgisi.siparis.siparisSahibi)\r\n            this.selectedOperasyon = data.find(x=>x.id==this.siparislerBilgisi.siparis.operasyon)\r\n        })\r\n        },\r\n        filterFinansList(event){\r\n            this.filteredFinansman = this.kullaniciList.filter((val)=>{\r\n                return val.kullaniciAdi.toLowerCase().startsWith(event.query.toLowerCase());\r\n            })\r\n        },\r\n        finansmanSelected(){\r\n            this.finansmanId = this.kullaniciList.find(x=>x.kullaniciAdi == this.selectedFinansman.kullaniciAdi).id\r\n            this.siparislerBilgisi.siparis.finansman = this.finansmanId\r\n        },\r\n\r\n        filterSatisciList(event){\r\n            this.filteredSatisci = this.kullaniciList.filter((val)=>{\r\n                return val.kullaniciAdi.toLowerCase().startsWith(event.query.toLowerCase());\r\n            })\r\n        },\r\n        satisciSelected(){\r\n            this.satisciId = this.kullaniciList.find(x=>x.kullaniciAdi == this.selectedSatisci.kullaniciAdi).id\r\n            this.siparislerBilgisi.siparis.siparisSahibi = this.satisciId\r\n        },\r\n        filterOperasyonList(event){\r\n            this.filteredOperasyon = this.kullaniciList.filter((val)=>{\r\n                return val.kullaniciAdi.toLowerCase().startsWith(event.query.toLowerCase());\r\n            })\r\n        },\r\n        operasyonSelected(){\r\n            this.operasyonId = this.kullaniciList.find(x=>x.kullaniciAdi == this.selectedOperasyon.kullaniciAdi).id\r\n            this.siparislerBilgisi.siparis.operasyon = this.operasyonId\r\n        },\r\n        sipNoDuzenleme(){\r\n            const result = this.siparislerBilgisi.siparis.siparisNo.split(\"-\")\r\n\r\n            if(result.length == 2){\r\n                \r\n                this.siparislerBilgisi.siparis.gidenSiparisNo = this.siparislerBilgisi.siparis.siparisNo\r\n                this.siparislerBilgisi.siparis.kalanSiparisNo = result[0] + '- ' + (parseInt(result[1]) + 1)\r\n            }\r\n            else{\r\n                this.siparislerBilgisi.siparis.gidenSiparisNo = this.siparislerBilgisi.siparis.siparisNo + ' - ' + '1'\r\n                this.siparislerBilgisi.siparis.kalanSiparisNo = this.siparislerBilgisi.siparis.siparisNo + ' - ' + '2'\r\n            }\r\n\r\n        },\r\n        productList(){\r\n            \r\n            for(let i of this.sipBilgiler.siparisUrunler){\r\n                \r\n                this.products.push({'aciklama':i.musteriAciklama})\r\n            }\r\n        },\r\n        isProductChange(){\r\n            this.isProduct = true\r\n            this.sipUrunBilgisi = this.sipBilgiler.siparisUrunler.find(x=>x.musteriAciklama == this.selectedProduct.aciklama)\r\n            \r\n            if(this.sipUrunBilgisi.m2>0){\r\n                this.productAmount = this.sipUrunBilgisi.m2\r\n                this.oldAmount = this.sipUrunBilgisi.m2\r\n                this.productAmountDetail = 'M2'\r\n            }else if (this.sipUrunBilgisi.adet>0){\r\n                this.productAmount = this.sipUrunBilgisi.adet\r\n                this.oldAmount = this.sipUrunBilgisi.adet\r\n                this.productAmountDetail = 'ADET'\r\n            }else if (this.sipUrunBilgisi.mt>0){\r\n                this.productAmount = this.sipUrunBilgisi.mt\r\n                this.oldAmount = this.sipUrunBilgisi.mt\r\n                this.productAmountDetail = 'MT'\r\n            }\r\n\r\n        }\r\n        \r\n    },\r\n    \r\n}\r\n</script>\r\n<style scoped>\r\n\r\n.table{\r\n    display:table;\r\n    width:100%;\r\n    height:auto;\r\n    border: 1px solid gray;\r\n    \r\n}\r\n.table-row{\r\n    border: 1px solid gray;\r\n}\r\n.grid-container {\r\n  display: grid;\r\n  grid-template-columns: auto auto auto auto;\r\n  \r\n}\r\n.grid-item {\r\n  text-align: left;\r\n}\r\n.bolButton{\r\n    border:1px solid gray;\r\n    background-color: #affacc;\r\n    color:black;\r\n    font-size: 15px;\r\n    font-weight: bold;\r\n    transition:background-color 2s 0s ease;\r\n}\r\n.bolButton:hover{\r\n    background-color: #025570;\r\n    color:white;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}