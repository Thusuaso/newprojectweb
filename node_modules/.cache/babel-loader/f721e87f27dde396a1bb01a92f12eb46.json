{"ast":null,"code":"import service from \"@/service/RaporService\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  data() {\n    return {\n      musteriUretimList: null,\n      ozel_musteri: null,\n      liste: null,\n      filters: {},\n      rapor: \"Hepsi\",\n      uretimBuYilTop: 0,\n      uretimGecenYilTop: 0,\n      uretimOncekiYilTop: 0,\n      uretimOnDokuzYilTop: 0,\n      toplam: 0,\n      toplamCfr: 0,\n      imperialHomes: [],\n      mekmar: [],\n      mekmer: [],\n      icPiyasa: [],\n      efes: [],\n      imperialHomesBuYilTop: 0,\n      imperialHomesTotalTopFob: 0,\n      imperialHomesTotalTopCfr: 0,\n      mekmarBuYilTop: 0,\n      mekmarTotalTopFob: 0,\n      mekmarTotalTopCfr: 0,\n      mekmerBuYilTop: 0,\n      mekmerTotalTopFob: 0,\n      mekmerTotalTopCfr: 0,\n      icPiyasaBuYilTop: 0,\n      icPiyasaTotalTopFob: 0,\n      icPiyasaTotalTopCfr: 0\n    };\n  },\n  computed: {\n    ...mapGetters(['servis_adres', 'byCustomersProduct', 'byMarketingProduct', 'byMarketingProductFobSum', 'byMarketingProductCfrSum'])\n  },\n  created() {\n    service.getMusteriListUretim().then(data => {\n      this.$store.dispatch(\"byCustomersProductAct\", data);\n      this.imperialHomes = data.filter(x => x.marketing == \"Imperial Homes\");\n      this.mekmar = data.filter(x => x.marketing == \"Mekmar\");\n      this.mekmer = data.filter(x => x.marketing == \"Mekmer\");\n      this.icPiyasa = data.filter(x => x.marketing == \"İç Piyasa\");\n      this.imperialHomesTotal(this.imperialHomes);\n      this.mekmarTotal(this.mekmar);\n      this.mekmerTotal(this.mekmer);\n      this.icPiyasaTotal(this.icPiyasa);\n      this.uretimToplam(data);\n    });\n  },\n  methods: {\n    excel_cikti_click() {\n      const data = {\n        byCustomersProduct: this.byCustomersProduct,\n        byMarketingProduct: this.byMarketingProduct,\n        imperialHomes: this.imperialHomes,\n        mekmar: this.mekmar,\n        mekmer: this.mekmer,\n        icPiyasa: this.icPiyasa\n      };\n      service.getCustomersExcell(data).then(response => {\n        if (response.status) {\n          const link = document.createElement(\"a\");\n          link.href = this.servis_adres + \"raporlar/dosyalar/customersExcellCikti\";\n          link.setAttribute(\"download\", \"Müşteri_Bazında_Üretim_Raporu.xlsx\");\n          document.body.appendChild(link);\n          link.click();\n        }\n      });\n    },\n    uretimToplam(liste) {\n      this.uretimBuYilTop = 0;\n      this.uretimGecenYilTop = 0;\n      this.uretimOncekiYilTop = 0;\n      this.uretimOnDokuzYilTop = 0;\n      this.toplam = 0;\n      this.toplamCfr = 0;\n      for (let i in liste) {\n        this.uretimBuYilTop += liste[i].satisToplamiBuYil;\n        this.uretimGecenYilTop += liste[i].satisToplamiGecenYil;\n        this.uretimOncekiYilTop += liste[i].satisToplamiOncekiYil;\n        this.uretimOnDokuzYilTop += liste[i].satisToplamiOnDokuzYil;\n        this.toplam += liste[i].toplam;\n        this.toplamCfr += liste[i].toplamCfr;\n      }\n    },\n    formatPrice(value) {\n      let val = (value / 1).toFixed(2).replace(\".\", \",\");\n      return \"$\" + val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n    },\n    get_musteri_list_excell_cikti_btn() {\n      const data = this.musteri_list;\n      service.get_musteri_list_excell_cikti(data).then(response => {\n        if (response.status) {\n          const link = document.createElement(\"a\");\n          link.href = this.servis_adres + \"raporlar/musteri/musteriexcellCikti\";\n          //link.href = \"http://localhost:5000/raporlar/musteri/musteriexcellCikti\"\n          link.setAttribute(\"download\", \"musteri_listesi.xlsx\");\n          document.body.appendChild(link);\n          link.click();\n          this.is_excel = false;\n        }\n      });\n    },\n    statuSecim() {\n      //statü değişiminde\n\n      if (this.rapor) {\n        let result;\n        if (this.rapor == \"Hepsi\") {\n          result = this.liste;\n        }\n        if (this.rapor == \"Mekmar\") {\n          result = [...this.liste.filter(x => x.marketing === this.rapor)];\n        }\n        if (this.rapor == \"Ozel\") {\n          result = this.ozel_musteri;\n        }\n        this.musteri_list = result;\n      }\n    },\n    imperialHomesTotal(liste) {\n      this.imperialHomesBuYilTop = 0;\n      this.imperialHomesTotalTopFob = 0;\n      this.imperialHomesTotalTopCfr = 0;\n      for (let i of liste) {\n        this.imperialHomesBuYilTop += i.satisToplamiBuYil;\n        this.imperialHomesTotalTopFob += i.toplam;\n        this.imperialHomesTotalTopCfr += i.toplamCfr;\n      }\n    },\n    mekmarTotal(liste) {\n      this.mekmarBuYilTop = 0;\n      this.mekmarTotalTopFob = 0;\n      this.mekmarTotalTopCfr = 0;\n      for (let i of liste) {\n        this.mekmarBuYilTop += i.satisToplamiBuYil;\n        this.mekmarTotalTopFob += i.toplam;\n        this.mekmarTotalTopCfr += i.toplamCfr;\n      }\n    },\n    mekmerTotal(liste) {\n      this.mekmerBuYilTop = 0;\n      this.mekmerTotalTopFob = 0;\n      this.mekmerTotalTopCfr = 0;\n      for (let i of liste) {\n        this.mekmerBuYilTop += i.satisToplamiBuYil;\n        this.mekmerTotalTopFob += i.toplam;\n        this.mekmerTotalTopCfr += i.toplamCfr;\n      }\n    },\n    icPiyasaTotal(liste) {\n      this.icPiyasaBuYilTop = 0;\n      this.icPiyasaTotalTopFob = 0;\n      this.icPiyasaTotalTopCfr = 0;\n      for (let i of liste) {\n        this.icPiyasaBuYilTop += i.satisToplamiBuYil;\n        this.icPiyasaTotalTopFob += i.toplam;\n        this.icPiyasaTotalTopCfr += i.toplamCfr;\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["service","mapGetters","data","musteriUretimList","ozel_musteri","liste","filters","rapor","uretimBuYilTop","uretimGecenYilTop","uretimOncekiYilTop","uretimOnDokuzYilTop","toplam","toplamCfr","imperialHomes","mekmar","mekmer","icPiyasa","efes","imperialHomesBuYilTop","imperialHomesTotalTopFob","imperialHomesTotalTopCfr","mekmarBuYilTop","mekmarTotalTopFob","mekmarTotalTopCfr","mekmerBuYilTop","mekmerTotalTopFob","mekmerTotalTopCfr","icPiyasaBuYilTop","icPiyasaTotalTopFob","icPiyasaTotalTopCfr","computed","created","getMusteriListUretim","then","$store","dispatch","filter","x","marketing","imperialHomesTotal","mekmarTotal","mekmerTotal","icPiyasaTotal","uretimToplam","methods","excel_cikti_click","byCustomersProduct","byMarketingProduct","getCustomersExcell","response","status","link","document","createElement","href","servis_adres","setAttribute","body","appendChild","click","i","satisToplamiBuYil","satisToplamiGecenYil","satisToplamiOncekiYil","satisToplamiOnDokuzYil","formatPrice","value","val","toFixed","replace","toString","get_musteri_list_excell_cikti_btn","musteri_list","get_musteri_list_excell_cikti","is_excel","statuSecim","result"],"sourceRoot":"","sources":["C:\\PROJELER\\NewProjects\\gitPull\\newprojectweb\\src\\components\\newyuklemeraporlari\\musteriBazindaUretim.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <Button\r\n      icon=\"pi pi-file-excel\"\r\n      class=\"p-button-primary\"\r\n      label=\"Excel\"\r\n      @click=\"excel_cikti_click\"\r\n    />\r\n    <div class=\"columns\">\r\n      <div class=\"column\">\r\n        <DataTable\r\n          :value=\"byCustomersProduct\"\r\n          responsiveLayout=\"scroll\"\r\n          sortField=\"toplam\"\r\n          :sortOrder=\"-1\"\r\n        >\r\n          <template #header>\r\n            <div class=\"table-header\" style=\"font-size: 15px\">\r\n              Güncel Tarihe Kadar Üretimdeki Sipariş Toplamları\r\n            </div>\r\n          </template>\r\n          <Column field=\"musteriAdi\" header=\"Müşteri Adı\"></Column>\r\n          <Column field=\"marketing\" header=\"Marketing\"></Column>\r\n          <Column field=\"ulkeAdi\" header=\"Ülke\"></Column>\r\n\r\n          <Column field=\"satisToplamiBuYil\" header=\"2022\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.satisToplamiBuYil) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(uretimBuYilTop) }}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"satisToplamiGecenYil\" header=\"2021\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.satisToplamiGecenYil) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(uretimGecenYilTop) }}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"satisToplamiOncekiYil\" header=\"2021\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.satisToplamiOncekiYil) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(uretimOncekiYilTop) }}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"satisToplamiOnDokuzYil\" header=\"2019\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.satisToplamiOnDokuzYil) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(uretimOnDokuzYilTop) }}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"toplam\" header=\"Toplam (Fob)\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.toplam) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(toplam) }}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"toplamCfr\" header=\"Toplam (DDP)\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.toplamCfr) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(toplamCfr) }}\r\n            </template>\r\n          </Column>\r\n        </DataTable>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"columns\">\r\n      <div class=\"column\" v-if=\"imperialHomes.length > 0\">\r\n        <DataTable\r\n          :value=\"imperialHomes\"\r\n          responsiveLayout=\"scroll\"\r\n          sortField=\"toplam\"\r\n          :sortOrder=\"-1\"\r\n        >\r\n          <template #header>\r\n            <div class=\"table-header\" style=\"font-size: 15px\">İmperial Homes</div>\r\n          </template>\r\n          <Column field=\"musteriAdi\" header=\"Müşteri Adı\"></Column>\r\n\r\n          <Column field=\"satisToplamiBuYil\" header=\"2022\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.satisToplamiBuYil) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(imperialHomesBuYilTop) }}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"toplam\" header=\"Toplam (Fob)\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.toplam) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(imperialHomesTotalTopFob) }}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"toplamCfr\" header=\"Toplam (DDP)\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.toplamCfr) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(imperialHomesTotalTopCfr) }}\r\n            </template>\r\n          </Column>\r\n        </DataTable>\r\n      </div>\r\n      <div class=\"column\" v-if=\"mekmar.length > 0\">\r\n        <DataTable\r\n          :value=\"mekmar\"\r\n          responsiveLayout=\"scroll\"\r\n          sortField=\"toplam\"\r\n          :sortOrder=\"-1\"\r\n        >\r\n          <template #header>\r\n            <div class=\"table-header\" style=\"font-size: 15px\">Mekmar</div>\r\n          </template>\r\n          <Column field=\"musteriAdi\" header=\"Müşteri Adı\"></Column>\r\n\r\n          <Column field=\"satisToplamiBuYil\" header=\"2022\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.satisToplamiBuYil) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(mekmarBuYilTop) }}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"toplam\" header=\"Toplam (Fob)\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.toplam) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(mekmarTotalTopFob) }}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"toplamCfr\" header=\"Toplam (DDP)\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.toplamCfr) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(mekmarTotalTopCfr) }}\r\n            </template>\r\n          </Column>\r\n        </DataTable>\r\n      </div>\r\n      <div class=\"column\" v-if=\"icPiyasa.length > 0\">\r\n        <DataTable\r\n          :value=\"icPiyasa\"\r\n          responsiveLayout=\"scroll\"\r\n          sortField=\"toplam\"\r\n          :sortOrder=\"-1\"\r\n        >\r\n          <template #header>\r\n            <div class=\"table-header\" style=\"font-size: 15px\">İç Piyasa</div>\r\n          </template>\r\n          <Column field=\"musteriAdi\" header=\"Müşteri Adı\"></Column>\r\n\r\n          <Column field=\"satisToplamiBuYil\" header=\"2022\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.satisToplamiBuYil) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(icPiyasaBuYilTop) }}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"toplam\" header=\"Toplam (Fob)\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.toplam) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(icPiyasaTotalTopFob) }}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"toplamCfr\" header=\"Toplam (Cfr)\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.toplamCfr) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(icPiyasaTotalTopCfr) }}\r\n            </template>\r\n          </Column>\r\n        </DataTable>\r\n      </div>\r\n      <div class=\"column\" v-if=\"mekmer.length > 0\">\r\n        <DataTable\r\n          :value=\"mekmer\"\r\n          responsiveLayout=\"scroll\"\r\n          sortField=\"toplam\"\r\n          :sortOrder=\"-1\"\r\n        >\r\n          <template #header>\r\n            <div class=\"table-header\" style=\"font-size: 15px\">Mekmer</div>\r\n          </template>\r\n          <Column field=\"musteriAdi\" header=\"Müşteri Adı\"></Column>\r\n\r\n          <Column field=\"satisToplamiBuYil\" header=\"2022\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.satisToplamiBuYil) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(mekmerBuYilTop) }}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"toplam\" header=\"Toplam (Fob)\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.toplam) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(mekmerTotalTopFob) }}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"toplamCfr\" header=\"Toplam (Cfr)\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.toplamCfr) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(mekmerTotalTopCfr) }}\r\n            </template>\r\n          </Column>\r\n        </DataTable>\r\n      </div>\r\n    </div>\r\n    <div class=\"columns\">\r\n      <div class=\"column\">\r\n        <DataTable :value=\"byMarketingProduct\" responsiveLayout=\"scroll\" :loading=\"isChangeLoading\">\r\n          <template #header>\r\n            <div class=\"columns is-multiline\">\r\n              <div class=\"column is-12\">\r\n                <span style=\"font-size:15px;\">Marketing Halihazırdaki Üretim </span>\r\n              </div>\r\n            </div>\r\n          </template>\r\n          <Column field=\"marketing\" header=\"Marketing\" bodyStyle=\"text-align:center\"></Column>\r\n          <Column field=\"fobToplam\" header=\"Fob\" bodyStyle=\"text-align:center\" footerStyle=\"text-align:center;\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.fobToplam) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(byMarketingProductFobSum) }}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"cfrToplam\" header=\"Cfr\" bodyStyle=\"text-align:center\" footerStyle=\"text-align:center;\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.cfrToplam) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(byMarketingProductCfrSum) }}\r\n            </template>\r\n          </Column>\r\n        </DataTable>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport service from \"@/service/RaporService\";\r\nimport { mapGetters } from \"vuex\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      musteriUretimList: null,\r\n      ozel_musteri: null,\r\n      liste: null,\r\n      filters: {},\r\n      rapor: \"Hepsi\",\r\n      uretimBuYilTop: 0,\r\n      uretimGecenYilTop: 0,\r\n      uretimOncekiYilTop: 0,\r\n      uretimOnDokuzYilTop: 0,\r\n      toplam: 0,\r\n      toplamCfr: 0,\r\n      imperialHomes: [],\r\n      mekmar: [],\r\n      mekmer: [],\r\n      icPiyasa: [],\r\n      efes: [],\r\n      imperialHomesBuYilTop: 0,\r\n      imperialHomesTotalTopFob: 0,\r\n      imperialHomesTotalTopCfr: 0,\r\n      mekmarBuYilTop: 0,\r\n      mekmarTotalTopFob: 0,\r\n      mekmarTotalTopCfr: 0,\r\n      mekmerBuYilTop: 0,\r\n      mekmerTotalTopFob: 0,\r\n      mekmerTotalTopCfr: 0,\r\n      icPiyasaBuYilTop: 0,\r\n      icPiyasaTotalTopFob: 0,\r\n      icPiyasaTotalTopCfr: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'servis_adres',\r\n      'byCustomersProduct',\r\n      'byMarketingProduct',\r\n      'byMarketingProductFobSum',\r\n      'byMarketingProductCfrSum'\r\n    ]),\r\n  },\r\n  created() {\r\n    service.getMusteriListUretim().then((data) => {\r\n      this.$store.dispatch(\"byCustomersProductAct\", data);\r\n      this.imperialHomes = data.filter((x) => x.marketing == \"Imperial Homes\");\r\n      this.mekmar = data.filter((x) => x.marketing == \"Mekmar\");\r\n      this.mekmer = data.filter((x) => x.marketing == \"Mekmer\");\r\n      this.icPiyasa = data.filter((x) => x.marketing == \"İç Piyasa\");\r\n\r\n      this.imperialHomesTotal(this.imperialHomes);\r\n      this.mekmarTotal(this.mekmar);\r\n      this.mekmerTotal(this.mekmer);\r\n      this.icPiyasaTotal(this.icPiyasa);\r\n\r\n      this.uretimToplam(data);\r\n    });\r\n  },\r\n  methods: {\r\n    excel_cikti_click() {\r\n      const data = {\r\n        byCustomersProduct: this.byCustomersProduct,\r\n        byMarketingProduct: this.byMarketingProduct,\r\n        imperialHomes: this.imperialHomes,\r\n        mekmar: this.mekmar,\r\n        mekmer: this.mekmer,\r\n        icPiyasa: this.icPiyasa,\r\n      };\r\n      service.getCustomersExcell(data).then((response) => {\r\n        if (response.status) {\r\n          const link = document.createElement(\"a\");\r\n          link.href =\r\n            this.servis_adres + \"raporlar/dosyalar/customersExcellCikti\";\r\n          link.setAttribute(\"download\", \"Müşteri_Bazında_Üretim_Raporu.xlsx\");\r\n          document.body.appendChild(link);\r\n          link.click();\r\n        }\r\n      });\r\n    },\r\n    uretimToplam(liste) {\r\n      this.uretimBuYilTop = 0;\r\n      this.uretimGecenYilTop = 0;\r\n      this.uretimOncekiYilTop = 0;\r\n      this.uretimOnDokuzYilTop = 0;\r\n      this.toplam = 0;\r\n      this.toplamCfr = 0;\r\n      for (let i in liste) {\r\n        this.uretimBuYilTop += liste[i].satisToplamiBuYil;\r\n        this.uretimGecenYilTop += liste[i].satisToplamiGecenYil;\r\n        this.uretimOncekiYilTop += liste[i].satisToplamiOncekiYil;\r\n        this.uretimOnDokuzYilTop += liste[i].satisToplamiOnDokuzYil;\r\n        this.toplam += liste[i].toplam;\r\n        this.toplamCfr += liste[i].toplamCfr;\r\n      }\r\n    },\r\n    formatPrice(value) {\r\n      let val = (value / 1).toFixed(2).replace(\".\", \",\");\r\n      return \"$\" + val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\r\n    },\r\n    get_musteri_list_excell_cikti_btn() {\r\n      const data = this.musteri_list;\r\n      service.get_musteri_list_excell_cikti(data).then((response) => {\r\n        if (response.status) {\r\n          const link = document.createElement(\"a\");\r\n          link.href = this.servis_adres + \"raporlar/musteri/musteriexcellCikti\";\r\n          //link.href = \"http://localhost:5000/raporlar/musteri/musteriexcellCikti\"\r\n          link.setAttribute(\"download\", \"musteri_listesi.xlsx\");\r\n          document.body.appendChild(link);\r\n          link.click();\r\n          this.is_excel = false;\r\n        }\r\n      });\r\n    },\r\n    statuSecim() {\r\n      //statü değişiminde\r\n\r\n      if (this.rapor) {\r\n        let result;\r\n\r\n        if (this.rapor == \"Hepsi\") {\r\n          result = this.liste;\r\n        }\r\n        if (this.rapor == \"Mekmar\") {\r\n          result = [...this.liste.filter((x) => x.marketing === this.rapor)];\r\n        }\r\n\r\n        if (this.rapor == \"Ozel\") {\r\n          result = this.ozel_musteri;\r\n        }\r\n\r\n        this.musteri_list = result;\r\n      }\r\n    },\r\n    imperialHomesTotal(liste) {\r\n      this.imperialHomesBuYilTop = 0;\r\n      this.imperialHomesTotalTopFob = 0;\r\n      this.imperialHomesTotalTopCfr = 0;\r\n      for (let i of liste) {\r\n        this.imperialHomesBuYilTop += i.satisToplamiBuYil;\r\n        this.imperialHomesTotalTopFob += i.toplam;\r\n        this.imperialHomesTotalTopCfr += i.toplamCfr;\r\n      }\r\n    },\r\n    mekmarTotal(liste) {\r\n      this.mekmarBuYilTop = 0;\r\n      this.mekmarTotalTopFob = 0;\r\n      this.mekmarTotalTopCfr = 0;\r\n      for (let i of liste) {\r\n        this.mekmarBuYilTop += i.satisToplamiBuYil;\r\n        this.mekmarTotalTopFob += i.toplam;\r\n        this.mekmarTotalTopCfr += i.toplamCfr;\r\n      }\r\n    },\r\n    mekmerTotal(liste) {\r\n      this.mekmerBuYilTop = 0;\r\n      this.mekmerTotalTopFob = 0;\r\n      this.mekmerTotalTopCfr = 0;\r\n      for (let i of liste) {\r\n        this.mekmerBuYilTop += i.satisToplamiBuYil;\r\n        this.mekmerTotalTopFob += i.toplam;\r\n        this.mekmerTotalTopCfr += i.toplamCfr;\r\n      }\r\n    },\r\n    icPiyasaTotal(liste) {\r\n      this.icPiyasaBuYilTop = 0;\r\n      this.icPiyasaTotalTopFob = 0;\r\n      this.icPiyasaTotalTopCfr = 0;\r\n      for (let i of liste) {\r\n        this.icPiyasaBuYilTop += i.satisToplamiBuYil;\r\n        this.icPiyasaTotalTopFob += i.toplam;\r\n        this.icPiyasaTotalTopCfr += i.toplamCfr;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.p-datatable {\r\n  font-size: 10px;\r\n}\r\n#statuSecim {\r\n  font-size: 12px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}