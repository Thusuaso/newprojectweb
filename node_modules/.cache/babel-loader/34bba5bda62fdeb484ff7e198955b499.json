{"ast":null,"code":"import { mapGetters } from \"vuex\";\nimport LocalService from \"@/service/LocalService\";\nimport socket from \"@/service/SocketService\";\nimport service from \"@/service/Customers\";\nimport fileService from \"@/service/FileService\";\nexport default {\n  data() {\n    return {\n      is_form: false,\n      date: new Date(),\n      date_hatirlatma: new Date(),\n      is_kaydet: true,\n      is_sil: true,\n      is_degistir: true,\n      select_list: null,\n      is_loading: false,\n      urunkayit: false,\n      satisciLink: \"\",\n      yenimusteri: [],\n      dis_satisciDosyaAc: \"\"\n    };\n  },\n  props: {\n    select_satisci: {\n      type: String,\n      required: false,\n      default: \"\"\n    },\n    yeniSiparis: {\n      type: Boolean,\n      default: true\n    }\n  },\n  components: {},\n  localService: null,\n  created() {\n    this.localService = new LocalService();\n    this.urunkayit = this.yeniSiparis;\n    this.yenimusteri = \"\";\n    const users = this.$store.getters.__getUsername;\n    if (!this.urunkayit) {\n      this.is_kaydet = true;\n      this.is_degistir = false;\n      this.is_sil = false;\n      if (this.musteri_list[0].satisci_cloud) {\n        this.dis_satisciDosyaAc = false;\n        this.satisciLink = `https://file-service.mekmar.com/file/download/satisci/satisciDosya/${this.musteri_list[0].id}/${this.musteri_list[0].satisci_cloud_dosya}`;\n      }\n      this.tahsilat_secim(this.musteri_list[0]);\n    }\n    if (this.urunkayit) {\n      this.is_kaydet = false;\n      this.is_degistir = true;\n      this.is_sil = true;\n      this.dis_satisciDosyaAc = true;\n      service.getSatisciModel().then(data => {\n        this.yenimusteri = data;\n        this.yenimusteri.musteriadi = this.select_satisci.musteriadi;\n        this.yenimusteri.temsilci = users;\n        this.date = this.yenimusteri.tarih_giris;\n        this.date_hatirlatma = this.yenimusteri.hatirlatmaTarihi;\n        this.tahsilat_secim(this.yenimusteri);\n      });\n    }\n  },\n  mounted() {},\n  computed: {\n    ...mapGetters([\"musteri_list\", \"musteri\"])\n  },\n  methods: {\n    satisciDosyaGonder(event) {\n      fileService.satisciDosyaGonder(event, this.musteri.id).then(data => {\n        if (data.Status) {\n          this.musteri.satisci_cloud = true;\n          this.musteri.satisci_cloud_dosya = data.dosyaAdi;\n          service.setSatisciDosyaKayit(this.musteri).then(veri => {\n            if (veri.Status) {\n              this.dis_satisciDosyaAc = false;\n              this.satisciLink = `https://file-service.mekmar.com/file/download/satisci/satisciDosya/${this.musteri.id}/${this.musteri.satisci_cloud_dosya}`;\n            }\n          });\n        }\n      });\n    },\n    tahsilat_secim(event) {\n      this.date = this.localService.getStringDate(event.tarih_giris);\n      this.date_hatirlatma = this.localService.getStringDate(event.hatirlatmaTarihi);\n      this.$store.dispatch(\"satisciKayitSecimAct\", event);\n    },\n    default_data() {\n      service.getSatisciMusteriListe(this.musteri.musteriadi, this.musteri.id).then(data => {\n        this.$store.dispatch(\"satisciKayitLoadAct\", data);\n        this.is_loading = false;\n        this.is_form = false;\n        this.date = new Date();\n        this.date_hatirlatma = new Date();\n        this.yenimusteri = [];\n      });\n    },\n    kaydet_click() {\n      if (!this.date) {\n        alert(\"Tarih Seçiniz..\");\n        return;\n      }\n      this.is_kaydet = true;\n      this.emitter.emit(\"hatirlatmaKaydet\", false);\n      this.is_loading = true;\n      const data = this.musteri;\n      data.tarih_giris = this.localService.getDateString(this.date);\n      data.hatirlatmaTarihi = this.localService.getDateString(this.date_hatirlatma);\n      const users = this.$store.getters.__getUsername;\n      data.temsilci = users;\n      service.satisciIcerikKaydetme(data).then(res => {\n        if (res.status) {\n          socket.siparis.emit(\"numunetahsilat_kayitdegisim_event\", data.id);\n          this.is_kaydet = false;\n          this.is_degistir = true;\n          this.is_sil = true;\n          this.$toast.add({\n            severity: \"success\",\n            summary: \"Kayıt Bildirimi\",\n            detail: \"Başarıyla Kaydedildi\",\n            life: 3000\n          });\n          this.$store.dispatch(\"customers_yukle_act\", res.result);\n          this.$store.dispatch(\"customers_yukle_all_act\", res.result);\n          this.$store.dispatch(\"musteri_ayrinti_yukle_act\", res.result2);\n          this.emitter.emit(\"isSearch\", true);\n        }\n      });\n      this.emitter.emit(\"notificationUpdate\", true);\n    },\n    degistir_click() {\n      if (!this.date) {\n        alert(\"Tarih Seçiniz..\");\n        return;\n      }\n      const data = this.musteri;\n      this.is_degistir = false;\n      this.emitter.emit(\"hatirlatmaKaydet\", false);\n      data.tarih_giris = this.localService.getDateString(this.date);\n      data.hatirlatmaTarihi = this.localService.getDateString(this.date_hatirlatma);\n      const users = this.$store.getters.__getUsername;\n      data.temsilci = users;\n      service.satisciIcerikGuncelleme(data).then(res => {\n        if (res) {\n          socket.siparis.emit(\"numunetahsilat_kayitdegisim_event\", data.id);\n          this.default_data();\n          this.is_kaydet = false;\n          this.is_degistir = true;\n          this.is_sil = true;\n          this.$toast.add({\n            severity: \"success\",\n            summary: \"Kayıt Bildirimi\",\n            detail: \"Başarıyla Değiştirildi\",\n            life: 3000\n          });\n          this.$store.dispatch(\"customers_yukle_act\", res.result);\n          this.$store.dispatch(\"musteri_ayrinti_yukle_act\", res.result2);\n          this.$store.dispatch(\"customers_yukle_all_act\", res.result);\n          this.emitter.emit(\"isSearch\", true);\n        }\n      });\n      this.emitter.emit(\"notificationUpdate\", true);\n    },\n    sil_click() {\n      if (!this.date) {\n        alert(\"Tarih Seçiniz..\");\n        return;\n      }\n      this.is_sil = true;\n      this.emitter.emit(\"hatirlatmaKaydet\", false);\n      const id = this.musteri.id;\n      service.satisciIcerikSilme(id).then(res => {\n        if (res) {\n          socket.siparis.emit(\"numunetahsilat_kayitdegisim_event\", this.musteri.id);\n          this.default_data();\n          this.is_kaydet = false;\n          this.is_degistir = true;\n          this.is_sil = true;\n          this.$toast.add({\n            severity: \"success\",\n            summary: \"Kayıt Bildirimi\",\n            detail: \"Başarıyla Silindi\",\n            life: 3000\n          });\n          this.$store.dispatch(\"customers_yukle_act\", res.result);\n          this.$store.dispatch(\"musteri_ayrinti_yukle_act\", res.result2);\n          this.$store.dispatch(\"customers_yukle_all_act\", res.result);\n          this.emitter.emit(\"isSearch\", true);\n        }\n      });\n      this.emitter.emit(\"notificationUpdate\", true);\n    }\n  }\n};","map":{"version":3,"mappings":"AA6GA,SAASA,UAAS,QAAS,MAAM;AACjC,OAAOC,YAAW,MAAO,wBAAwB;AACjD,OAAOC,MAAK,MAAO,yBAAyB;AAC5C,OAAOC,OAAM,MAAO,qBAAqB;AACzC,OAAOC,WAAU,MAAO,uBAAuB;AAE/C,eAAe;EACbC,IAAI,GAAG;IACL,OAAO;MACLC,OAAO,EAAE,KAAK;MACdC,IAAI,EAAE,IAAIC,IAAI,EAAE;MAChBC,eAAe,EAAE,IAAID,IAAI,EAAE;MAC3BE,SAAS,EAAE,IAAI;MACfC,MAAM,EAAE,IAAI;MACZC,WAAW,EAAE,IAAI;MACjBC,WAAW,EAAE,IAAI;MACjBC,UAAU,EAAE,KAAK;MACjBC,SAAS,EAAE,KAAK;MAChBC,WAAW,EAAE,EAAE;MACfC,WAAW,EAAE,EAAE;MACfC,kBAAkB,EAAE;IACtB,CAAC;EACH,CAAC;EACDC,KAAK,EAAE;IACLC,cAAc,EAAE;MACdC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE,KAAK;MACfC,OAAO,EAAE;IACX,CAAC;IACDC,WAAW,EAAE;MACXJ,IAAI,EAAEK,OAAO;MACbF,OAAO,EAAE;IACX;EACF,CAAC;EACDG,UAAU,EAAE,CAAC,CAAC;EACdC,YAAY,EAAE,IAAI;EAElBC,OAAO,GAAG;IACR,IAAI,CAACD,YAAW,GAAI,IAAI3B,YAAY,EAAE;IACtC,IAAI,CAACc,SAAQ,GAAI,IAAI,CAACU,WAAW;IACjC,IAAI,CAACR,WAAU,GAAI,EAAE;IAErB,MAAMa,KAAI,GAAI,IAAI,CAACC,MAAM,CAACC,OAAO,CAACC,aAAa;IAE/C,IAAI,CAAC,IAAI,CAAClB,SAAS,EAAE;MACnB,IAAI,CAACL,SAAQ,GAAI,IAAI;MACrB,IAAI,CAACE,WAAU,GAAI,KAAK;MACxB,IAAI,CAACD,MAAK,GAAI,KAAK;MAEnB,IAAI,IAAI,CAACuB,YAAY,CAAC,CAAC,CAAC,CAACC,aAAa,EAAE;QACtC,IAAI,CAACjB,kBAAiB,GAAI,KAAK;QAC/B,IAAI,CAACF,WAAU,GAAK,sEAAqE,IAAI,CAACkB,YAAY,CAAC,CAAC,CAAC,CAACE,EAAG,IAAG,IAAI,CAACF,YAAY,CAAC,CAAC,CAAC,CAACG,mBAAoB,EAAC;MAChK;MACA,IAAI,CAACC,cAAc,CAAC,IAAI,CAACJ,YAAY,CAAC,CAAC,CAAC,CAAC;IAC3C;IAEA,IAAI,IAAI,CAACnB,SAAS,EAAE;MAClB,IAAI,CAACL,SAAQ,GAAI,KAAK;MACtB,IAAI,CAACE,WAAU,GAAI,IAAI;MACvB,IAAI,CAACD,MAAK,GAAI,IAAI;MAClB,IAAI,CAACO,kBAAiB,GAAI,IAAI;MAC9Bf,OAAO,CAACoC,eAAe,EAAE,CAACC,IAAI,CAAEnC,IAAI,IAAK;QACvC,IAAI,CAACY,WAAU,GAAIZ,IAAI;QACvB,IAAI,CAACY,WAAW,CAACwB,UAAS,GAAI,IAAI,CAACrB,cAAc,CAACqB,UAAU;QAC5D,IAAI,CAACxB,WAAW,CAACyB,QAAO,GAAIZ,KAAK;QACjC,IAAI,CAACvB,IAAG,GAAI,IAAI,CAACU,WAAW,CAAC0B,WAAW;QACxC,IAAI,CAAClC,eAAc,GAAI,IAAI,CAACQ,WAAW,CAAC2B,gBAAgB;QAExD,IAAI,CAACN,cAAc,CAAC,IAAI,CAACrB,WAAW,CAAC;MACvC,CAAC,CAAC;IACJ;EACF,CAAC;EACD4B,OAAO,GAAG,CAEV,CAAC;EACDC,QAAQ,EAAE;IACR,GAAG9C,UAAU,CAAC,CAAC,cAAc,EAAE,SAAS,CAAC;EAC3C,CAAC;EAED+C,OAAO,EAAE;IACPC,kBAAkB,CAACC,KAAK,EAAE;MACxB7C,WAAW,CAAC4C,kBAAkB,CAACC,KAAK,EAAE,IAAI,CAACC,OAAO,CAACd,EAAE,CAAC,CAACI,IAAI,CAAEnC,IAAI,IAAK;QACpE,IAAIA,IAAI,CAAC8C,MAAM,EAAE;UACf,IAAI,CAACD,OAAO,CAACf,aAAY,GAAI,IAAI;UACjC,IAAI,CAACe,OAAO,CAACb,mBAAkB,GAAIhC,IAAI,CAAC+C,QAAQ;UAEhDjD,OAAO,CAACkD,oBAAoB,CAAC,IAAI,CAACH,OAAO,CAAC,CAACV,IAAI,CAAEc,IAAI,IAAK;YACxD,IAAIA,IAAI,CAACH,MAAM,EAAE;cACf,IAAI,CAACjC,kBAAiB,GAAI,KAAK;cAE/B,IAAI,CAACF,WAAU,GAAK,sEAAqE,IAAI,CAACkC,OAAO,CAACd,EAAG,IAAG,IAAI,CAACc,OAAO,CAACb,mBAAoB,EAAC;YAChJ;UACF,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;IACJ,CAAC;IACDC,cAAc,CAACW,KAAK,EAAE;MACpB,IAAI,CAAC1C,IAAG,GAAI,IAAI,CAACqB,YAAY,CAAC2B,aAAa,CAACN,KAAK,CAACN,WAAW,CAAC;MAC9D,IAAI,CAAClC,eAAc,GAAI,IAAI,CAACmB,YAAY,CAAC2B,aAAa,CACpDN,KAAK,CAACL,gBAAe,CACtB;MAED,IAAI,CAACb,MAAM,CAACyB,QAAQ,CAAC,sBAAsB,EAAEP,KAAK,CAAC;IACrD,CAAC;IACDQ,YAAY,GAAG;MACbtD,OAAM,CACHuD,sBAAsB,CAAC,IAAI,CAACR,OAAO,CAACT,UAAU,EAAE,IAAI,CAACS,OAAO,CAACd,EAAE,EAC/DI,IAAI,CAAEnC,IAAI,IAAK;QACd,IAAI,CAAC0B,MAAM,CAACyB,QAAQ,CAAC,qBAAqB,EAAEnD,IAAI,CAAC;QACjD,IAAI,CAACS,UAAS,GAAI,KAAK;QACvB,IAAI,CAACR,OAAM,GAAI,KAAK;QACpB,IAAI,CAACC,IAAG,GAAI,IAAIC,IAAI,EAAE;QACtB,IAAI,CAACC,eAAc,GAAI,IAAID,IAAI,EAAE;QAEjC,IAAI,CAACS,WAAU,GAAI,EAAE;MACvB,CAAC,CAAC;IACN,CAAC;IACD0C,YAAY,GAAG;MACb,IAAI,CAAC,IAAI,CAACpD,IAAI,EAAE;QACdqD,KAAK,CAAC,iBAAiB,CAAC;QACxB;MACF;MACA,IAAI,CAAClD,SAAQ,GAAI,IAAI;MACrB,IAAI,CAACmD,OAAO,CAACC,IAAI,CAAC,kBAAkB,EAAE,KAAK,CAAC;MAC5C,IAAI,CAAChD,UAAS,GAAI,IAAI;MACtB,MAAMT,IAAG,GAAI,IAAI,CAAC6C,OAAO;MAEzB7C,IAAI,CAACsC,WAAU,GAAI,IAAI,CAACf,YAAY,CAACmC,aAAa,CAAC,IAAI,CAACxD,IAAI,CAAC;MAC7DF,IAAI,CAACuC,gBAAe,GAAI,IAAI,CAAChB,YAAY,CAACmC,aAAa,CACrD,IAAI,CAACtD,eAAc,CACpB;MAED,MAAMqB,KAAI,GAAI,IAAI,CAACC,MAAM,CAACC,OAAO,CAACC,aAAa;MAC/C5B,IAAI,CAACqC,QAAO,GAAIZ,KAAK;MAErB3B,OAAO,CAAC6D,qBAAqB,CAAC3D,IAAI,CAAC,CAACmC,IAAI,CAAEyB,GAAG,IAAK;QAChD,IAAIA,GAAG,CAACC,MAAM,EAAE;UACdhE,MAAM,CAACiE,OAAO,CAACL,IAAI,CAAC,mCAAmC,EAAEzD,IAAI,CAAC+B,EAAE,CAAC;UACjE,IAAI,CAAC1B,SAAQ,GAAI,KAAK;UACtB,IAAI,CAACE,WAAU,GAAI,IAAI;UACvB,IAAI,CAACD,MAAK,GAAI,IAAI;UAClB,IAAI,CAACyD,MAAM,CAACC,GAAG,CAAC;YACdC,QAAQ,EAAE,SAAS;YACnBC,OAAO,EAAE,iBAAiB;YAC1BC,MAAM,EAAE,sBAAsB;YAC9BC,IAAI,EAAE;UACR,CAAC,CAAC;UACF,IAAI,CAAC1C,MAAM,CAACyB,QAAQ,CAAC,qBAAqB,EAAES,GAAG,CAACS,MAAM,CAAC;UACvD,IAAI,CAAC3C,MAAM,CAACyB,QAAQ,CAAC,yBAAyB,EAAES,GAAG,CAACS,MAAM,CAAC;UAC3D,IAAI,CAAC3C,MAAM,CAACyB,QAAQ,CAAC,2BAA2B,EAAES,GAAG,CAACU,OAAO,CAAC;UAC9D,IAAI,CAACd,OAAO,CAACC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC;QACrC;MACF,CAAC,CAAC;MACF,IAAI,CAACD,OAAO,CAACC,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC;IAC/C,CAAC;IACDc,cAAc,GAAG;MACf,IAAI,CAAC,IAAI,CAACrE,IAAI,EAAE;QACdqD,KAAK,CAAC,iBAAiB,CAAC;QACxB;MACF;MACA,MAAMvD,IAAG,GAAI,IAAI,CAAC6C,OAAO;MACzB,IAAI,CAACtC,WAAU,GAAI,KAAK;MACxB,IAAI,CAACiD,OAAO,CAACC,IAAI,CAAC,kBAAkB,EAAE,KAAK,CAAC;MAC5CzD,IAAI,CAACsC,WAAU,GAAI,IAAI,CAACf,YAAY,CAACmC,aAAa,CAAC,IAAI,CAACxD,IAAI,CAAC;MAC7DF,IAAI,CAACuC,gBAAe,GAAI,IAAI,CAAChB,YAAY,CAACmC,aAAa,CACrD,IAAI,CAACtD,eAAc,CACpB;MACD,MAAMqB,KAAI,GAAI,IAAI,CAACC,MAAM,CAACC,OAAO,CAACC,aAAa;MAC/C5B,IAAI,CAACqC,QAAO,GAAIZ,KAAK;MACrB3B,OAAO,CAAC0E,uBAAuB,CAACxE,IAAI,CAAC,CAACmC,IAAI,CAAEyB,GAAG,IAAK;QAClD,IAAIA,GAAG,EAAE;UACP/D,MAAM,CAACiE,OAAO,CAACL,IAAI,CAAC,mCAAmC,EAAEzD,IAAI,CAAC+B,EAAE,CAAC;UACjE,IAAI,CAACqB,YAAY,EAAE;UACnB,IAAI,CAAC/C,SAAQ,GAAI,KAAK;UACtB,IAAI,CAACE,WAAU,GAAI,IAAI;UACvB,IAAI,CAACD,MAAK,GAAI,IAAI;UAClB,IAAI,CAACyD,MAAM,CAACC,GAAG,CAAC;YACdC,QAAQ,EAAE,SAAS;YACnBC,OAAO,EAAE,iBAAiB;YAC1BC,MAAM,EAAE,wBAAwB;YAChCC,IAAI,EAAE;UACR,CAAC,CAAC;UACF,IAAI,CAAC1C,MAAM,CAACyB,QAAQ,CAAC,qBAAqB,EAAES,GAAG,CAACS,MAAM,CAAC;UACvD,IAAI,CAAC3C,MAAM,CAACyB,QAAQ,CAAC,2BAA2B,EAAES,GAAG,CAACU,OAAO,CAAC;UAC9D,IAAI,CAAC5C,MAAM,CAACyB,QAAQ,CAAC,yBAAyB,EAAES,GAAG,CAACS,MAAM,CAAC;UAC3D,IAAI,CAACb,OAAO,CAACC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC;QACrC;MACF,CAAC,CAAC;MACF,IAAI,CAACD,OAAO,CAACC,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC;IAC/C,CAAC;IACDgB,SAAS,GAAG;MACV,IAAI,CAAC,IAAI,CAACvE,IAAI,EAAE;QACdqD,KAAK,CAAC,iBAAiB,CAAC;QACxB;MACF;MACA,IAAI,CAACjD,MAAK,GAAI,IAAI;MAClB,IAAI,CAACkD,OAAO,CAACC,IAAI,CAAC,kBAAkB,EAAE,KAAK,CAAC;MAC5C,MAAM1B,EAAC,GAAI,IAAI,CAACc,OAAO,CAACd,EAAE;MAC1BjC,OAAO,CAAC4E,kBAAkB,CAAC3C,EAAE,CAAC,CAACI,IAAI,CAAEyB,GAAG,IAAK;QAC3C,IAAIA,GAAG,EAAE;UACP/D,MAAM,CAACiE,OAAO,CAACL,IAAI,CACjB,mCAAmC,EACnC,IAAI,CAACZ,OAAO,CAACd,EAAC,CACf;UACD,IAAI,CAACqB,YAAY,EAAE;UACnB,IAAI,CAAC/C,SAAQ,GAAI,KAAK;UACtB,IAAI,CAACE,WAAU,GAAI,IAAI;UACvB,IAAI,CAACD,MAAK,GAAI,IAAI;UAClB,IAAI,CAACyD,MAAM,CAACC,GAAG,CAAC;YACdC,QAAQ,EAAE,SAAS;YACnBC,OAAO,EAAE,iBAAiB;YAC1BC,MAAM,EAAE,mBAAmB;YAC3BC,IAAI,EAAE;UACR,CAAC,CAAC;UACF,IAAI,CAAC1C,MAAM,CAACyB,QAAQ,CAAC,qBAAqB,EAAES,GAAG,CAACS,MAAM,CAAC;UACvD,IAAI,CAAC3C,MAAM,CAACyB,QAAQ,CAAC,2BAA2B,EAAES,GAAG,CAACU,OAAO,CAAC;UAC9D,IAAI,CAAC5C,MAAM,CAACyB,QAAQ,CAAC,yBAAyB,EAAES,GAAG,CAACS,MAAM,CAAC;UAC3D,IAAI,CAACb,OAAO,CAACC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC;QACrC;MACF,CAAC,CAAC;MACF,IAAI,CAACD,OAAO,CAACC,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC;IAC/C;EACF;AACF,CAAC","names":["mapGetters","LocalService","socket","service","fileService","data","is_form","date","Date","date_hatirlatma","is_kaydet","is_sil","is_degistir","select_list","is_loading","urunkayit","satisciLink","yenimusteri","dis_satisciDosyaAc","props","select_satisci","type","String","required","default","yeniSiparis","Boolean","components","localService","created","users","$store","getters","__getUsername","musteri_list","satisci_cloud","id","satisci_cloud_dosya","tahsilat_secim","getSatisciModel","then","musteriadi","temsilci","tarih_giris","hatirlatmaTarihi","mounted","computed","methods","satisciDosyaGonder","event","musteri","Status","dosyaAdi","setSatisciDosyaKayit","veri","getStringDate","dispatch","default_data","getSatisciMusteriListe","kaydet_click","alert","emitter","emit","getDateString","satisciIcerikKaydetme","res","status","siparis","$toast","add","severity","summary","detail","life","result","result2","degistir_click","satisciIcerikGuncelleme","sil_click","satisciIcerikSilme"],"sourceRoot":"","sources":["C:\\PROJELER\\NewProjects\\gitPull\\newprojectweb\\src\\components\\customers\\CustomersIslem.vue"],"sourcesContent":["<!-- eslint-disable prettier/prettier -->\r\n<template>\r\n  <section>\r\n    <br/>\r\n    <div class=\"columns\">\r\n      <div class=\"column is-12\">\r\n        <div class=\"columns is-multiline\" style=\"margin-left:22px;\">\r\n          <div class=\"column is-2\" style=\"background-color: white\">\r\n            \r\n            <span class=\"p-float-label\" v-if=\"yeniSiparis\">\r\n              <InputText id=\"musteriAdi\"  v-model=\"musteri.musteriadi\" :disabled=\"true\" />\r\n              <label for=\"musteriAdi\">Müşteri Adı</label>\r\n            </span>\r\n            <span class=\"p-float-label\" v-else>\r\n              <InputText id=\"musteriAdi\" v-model=\"musteri.musteriadi\" :disabled=\"true\" />\r\n              <label for=\"musteriAdi\">Müşteri Adı</label>\r\n            </span>\r\n            \r\n          </div>\r\n\r\n          <div class=\"column is-2\">\r\n            \r\n            <span class=\"p-float-label\">\r\n              <Calendar id=\"kayitTarihi\" v-model=\"date\" :disabled=\"is_form\" />\r\n              <label for=\"kayitTarihi\">Kayıt Tarihi</label>\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"columns\">\r\n          <div class=\"column is-6\">\r\n            <div class=\"column is-12 card\">\r\n              <div class=\"column is-12\">\r\n                <div class=\"column is-10\">\r\n                  <span class=\"p-float-label\">\r\n                    <InputText\r\n                      id=\"baslik\"\r\n                      v-model=\"musteri.baslik\"\r\n                      :disabled=\"is_form\"\r\n                    />\r\n                    <label for=\"baslik\">Başlık</label>\r\n                  </span>\r\n                </div>\r\n                <div class=\"column is-12\">\r\n                  <span class=\"p-float-label\">\r\n                    <Textarea id=\"aciklama\" v-model=\"musteri.aciklama\" rows=\"10\" cols=\"80\" />\r\n                    <label for=\"aciklama\">Açıklama</label>\r\n                  </span>\r\n                  \r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"column is-6\">\r\n            <div class=\"column is-12 card\">\r\n              <div class=\"column is-12\">\r\n                <div class=\"column is-6\">\r\n                  \r\n                  <span class=\"p-float-label\">\r\n                    <Calendar id=\"hatirlatmaTarihi\" v-model=\"date_hatirlatma\" :disabled=\"is_form\" />\r\n                    <label for=\"hatirlatmaTarihi\">Hatırlatma Tarihi</label>\r\n                  </span>\r\n                </div>\r\n                <div class=\"column is-6\">\r\n                  <span class=\"p-float-label\">\r\n                    <Textarea id=\"hatirlatmaNotu\" v-model=\"musteri.hatirlatma_notu\" rows=\"10\" cols=\"80\" />\r\n                    <label for=\"hatirlatmaNotu\">Hatırlatma Notu</label>\r\n                  </span>\r\n                  \r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"columns is-multiline\" style=\"margin-left: 530px\">\r\n          <div class=\"column is-12\">\r\n            <div class=\"columns is- multiline\">\r\n              <div class=\"column is-2\">\r\n                <Button\r\n                  class=\"p-button-secondary\"\r\n                  @click=\"kaydet_click\"\r\n                  :disabled=\"is_kaydet\"\r\n                >\r\n                  Kaydet\r\n                </Button>\r\n              </div>\r\n              <div class=\"column is-2\">\r\n                <Button\r\n                  :disabled=\"is_degistir\"\r\n                  class=\"p-button-warning\"\r\n                  @click=\"degistir_click\"\r\n                >\r\n                  Guncelle\r\n                </Button>\r\n              </div>\r\n              <div class=\"column is-2\">\r\n                <Button :disabled=\"is_sil\" class=\"p-button-danger\" @click=\"sil_click\">\r\n                  Sil\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport LocalService from \"@/service/LocalService\";\r\nimport socket from \"@/service/SocketService\";\r\nimport service from \"@/service/Customers\";\r\nimport fileService from \"@/service/FileService\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      is_form: false,\r\n      date: new Date(),\r\n      date_hatirlatma: new Date(),\r\n      is_kaydet: true,\r\n      is_sil: true,\r\n      is_degistir: true,\r\n      select_list: null,\r\n      is_loading: false,\r\n      urunkayit: false,\r\n      satisciLink: \"\",\r\n      yenimusteri: [],\r\n      dis_satisciDosyaAc: \"\",\r\n    };\r\n  },\r\n  props: {\r\n    select_satisci: {\r\n      type: String,\r\n      required: false,\r\n      default: \"\",\r\n    },\r\n    yeniSiparis: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  components: {},\r\n  localService: null,\r\n\r\n  created() {\r\n    this.localService = new LocalService();\r\n    this.urunkayit = this.yeniSiparis;\r\n    this.yenimusteri = \"\";\r\n\r\n    const users = this.$store.getters.__getUsername;\r\n\r\n    if (!this.urunkayit) {\r\n      this.is_kaydet = true;\r\n      this.is_degistir = false;\r\n      this.is_sil = false;\r\n\r\n      if (this.musteri_list[0].satisci_cloud) {\r\n        this.dis_satisciDosyaAc = false;\r\n        this.satisciLink = `https://file-service.mekmar.com/file/download/satisci/satisciDosya/${this.musteri_list[0].id}/${this.musteri_list[0].satisci_cloud_dosya}`;\r\n      }\r\n      this.tahsilat_secim(this.musteri_list[0]);\r\n    }\r\n\r\n    if (this.urunkayit) {\r\n      this.is_kaydet = false;\r\n      this.is_degistir = true;\r\n      this.is_sil = true;\r\n      this.dis_satisciDosyaAc = true;\r\n      service.getSatisciModel().then((data) => {\r\n        this.yenimusteri = data;\r\n        this.yenimusteri.musteriadi = this.select_satisci.musteriadi;\r\n        this.yenimusteri.temsilci = users;\r\n        this.date = this.yenimusteri.tarih_giris;\r\n        this.date_hatirlatma = this.yenimusteri.hatirlatmaTarihi;\r\n\r\n        this.tahsilat_secim(this.yenimusteri);\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"musteri_list\", \"musteri\"]),\r\n  },\r\n\r\n  methods: {\r\n    satisciDosyaGonder(event) {\r\n      fileService.satisciDosyaGonder(event, this.musteri.id).then((data) => {\r\n        if (data.Status) {\r\n          this.musteri.satisci_cloud = true;\r\n          this.musteri.satisci_cloud_dosya = data.dosyaAdi;\r\n\r\n          service.setSatisciDosyaKayit(this.musteri).then((veri) => {\r\n            if (veri.Status) {\r\n              this.dis_satisciDosyaAc = false;\r\n\r\n              this.satisciLink = `https://file-service.mekmar.com/file/download/satisci/satisciDosya/${this.musteri.id}/${this.musteri.satisci_cloud_dosya}`;\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    tahsilat_secim(event) {\r\n      this.date = this.localService.getStringDate(event.tarih_giris);\r\n      this.date_hatirlatma = this.localService.getStringDate(\r\n        event.hatirlatmaTarihi\r\n      );\r\n\r\n      this.$store.dispatch(\"satisciKayitSecimAct\", event);\r\n    },\r\n    default_data() {\r\n      service\r\n        .getSatisciMusteriListe(this.musteri.musteriadi, this.musteri.id)\r\n        .then((data) => {\r\n          this.$store.dispatch(\"satisciKayitLoadAct\", data);\r\n          this.is_loading = false;\r\n          this.is_form = false;\r\n          this.date = new Date();\r\n          this.date_hatirlatma = new Date();\r\n\r\n          this.yenimusteri = [];\r\n        });\r\n    },\r\n    kaydet_click() {\r\n      if (!this.date) {\r\n        alert(\"Tarih Seçiniz..\");\r\n        return;\r\n      }\r\n      this.is_kaydet = true;\r\n      this.emitter.emit(\"hatirlatmaKaydet\", false);\r\n      this.is_loading = true;\r\n      const data = this.musteri;\r\n\r\n      data.tarih_giris = this.localService.getDateString(this.date);\r\n      data.hatirlatmaTarihi = this.localService.getDateString(\r\n        this.date_hatirlatma\r\n      );\r\n\r\n      const users = this.$store.getters.__getUsername;\r\n      data.temsilci = users;\r\n\r\n      service.satisciIcerikKaydetme(data).then((res) => {\r\n        if (res.status) {\r\n          socket.siparis.emit(\"numunetahsilat_kayitdegisim_event\", data.id);\r\n          this.is_kaydet = false;\r\n          this.is_degistir = true;\r\n          this.is_sil = true;\r\n          this.$toast.add({\r\n            severity: \"success\",\r\n            summary: \"Kayıt Bildirimi\",\r\n            detail: \"Başarıyla Kaydedildi\",\r\n            life: 3000,\r\n          });\r\n          this.$store.dispatch(\"customers_yukle_act\", res.result);\r\n          this.$store.dispatch(\"customers_yukle_all_act\", res.result);\r\n          this.$store.dispatch(\"musteri_ayrinti_yukle_act\", res.result2);\r\n          this.emitter.emit(\"isSearch\", true);\r\n        }\r\n      });\r\n      this.emitter.emit(\"notificationUpdate\", true);\r\n    },\r\n    degistir_click() {\r\n      if (!this.date) {\r\n        alert(\"Tarih Seçiniz..\");\r\n        return;\r\n      }\r\n      const data = this.musteri;\r\n      this.is_degistir = false;\r\n      this.emitter.emit(\"hatirlatmaKaydet\", false);\r\n      data.tarih_giris = this.localService.getDateString(this.date);\r\n      data.hatirlatmaTarihi = this.localService.getDateString(\r\n        this.date_hatirlatma\r\n      );\r\n      const users = this.$store.getters.__getUsername;\r\n      data.temsilci = users;\r\n      service.satisciIcerikGuncelleme(data).then((res) => {\r\n        if (res) {\r\n          socket.siparis.emit(\"numunetahsilat_kayitdegisim_event\", data.id);\r\n          this.default_data();\r\n          this.is_kaydet = false;\r\n          this.is_degistir = true;\r\n          this.is_sil = true;\r\n          this.$toast.add({\r\n            severity: \"success\",\r\n            summary: \"Kayıt Bildirimi\",\r\n            detail: \"Başarıyla Değiştirildi\",\r\n            life: 3000,\r\n          });\r\n          this.$store.dispatch(\"customers_yukle_act\", res.result);\r\n          this.$store.dispatch(\"musteri_ayrinti_yukle_act\", res.result2);\r\n          this.$store.dispatch(\"customers_yukle_all_act\", res.result);\r\n          this.emitter.emit(\"isSearch\", true);\r\n        }\r\n      });\r\n      this.emitter.emit(\"notificationUpdate\", true);\r\n    },\r\n    sil_click() {\r\n      if (!this.date) {\r\n        alert(\"Tarih Seçiniz..\");\r\n        return;\r\n      }\r\n      this.is_sil = true;\r\n      this.emitter.emit(\"hatirlatmaKaydet\", false);\r\n      const id = this.musteri.id;\r\n      service.satisciIcerikSilme(id).then((res) => {\r\n        if (res) {\r\n          socket.siparis.emit(\r\n            \"numunetahsilat_kayitdegisim_event\",\r\n            this.musteri.id\r\n          );\r\n          this.default_data();\r\n          this.is_kaydet = false;\r\n          this.is_degistir = true;\r\n          this.is_sil = true;\r\n          this.$toast.add({\r\n            severity: \"success\",\r\n            summary: \"Kayıt Bildirimi\",\r\n            detail: \"Başarıyla Silindi\",\r\n            life: 3000,\r\n          });\r\n          this.$store.dispatch(\"customers_yukle_act\", res.result);\r\n          this.$store.dispatch(\"musteri_ayrinti_yukle_act\", res.result2);\r\n          this.$store.dispatch(\"customers_yukle_all_act\", res.result);\r\n          this.emitter.emit(\"isSearch\", true);\r\n        }\r\n      });\r\n      this.emitter.emit(\"notificationUpdate\", true);\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.input-style {\r\n  text-align: center;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}