{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport teklifService from \"@/service/TeklifService\";\nimport TeklifGirisForm from \"@/components/teklifler/TeklifGirisForm\";\nimport KullaniciTeklifListe from \"@/components/teklifler/KullaniciTeklifListe\";\nimport socket from \"@/service/SocketService\";\nimport TumTeklifler from \"@/components/teklifler/TumTeklifler\";\nimport EskiTeklifler from \"@/components/teklifler/EskiTeklifler\";\nimport \"@fullcalendar/core/vdom\"; // solves problem with Vite\nimport FullCalendar from \"@fullcalendar/vue3\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  computed: {\n    ...mapGetters(['hatirlatmaTeklifList'])\n  },\n  components: {\n    TeklifGirisForm: TeklifGirisForm,\n    kullaniciTeklifListe: KullaniciTeklifListe,\n    tumTeklifler: TumTeklifler,\n    eskiTeklifler: EskiTeklifler,\n    FullCalendar\n  },\n  data() {\n    return {\n      teklifFormvisible: false,\n      temsilciOzetList: null,\n      temsilciLoading: false,\n      selectOzetList: null,\n      toplam_temsilci_teklif: 0,\n      toplam_temsilci_proforma: 0,\n      hatirlatmaList: null,\n      hatirlatmaLoading: false,\n      toplam_hatirlatma_sayisi: 0,\n      musteriOzetList: null,\n      musteriOzetLoading: false,\n      toplam_musteriOzet_teklif: 0,\n      teklifFormBaslik: \"Yeni Teklif Girişi\",\n      kullaniciListeVisible: false,\n      is_tumteklifler: false,\n      kullaniciListeBaslik: \"\",\n      selectKullaniciAdi: \"\",\n      visibleFull: false,\n      calendarOptions: {\n        plugins: [dayGridPlugin, interactionPlugin],\n        initialView: \"dayGridMonth\",\n        events: []\n      },\n      takvimList: null,\n      selectDate: null,\n      teklifYeniKayit: true,\n      teklifId: null,\n      tumtekliflist: null,\n      eskitekliflist: null,\n      is_eskiteklifler: false\n    };\n  },\n  created() {\n    this.$store.dispatch(\"loadingBeginAct\");\n    teklifService.getTakvimList().then(data => {\n      this.$store.dispatch(\"hatirlatma_list_load_act\", data.hatirlatmaList);\n      const takvimData = [];\n      for (var i in data.takvimList) {\n        if (data.takvimList[i].hatirlatmaDurum == \"True\") {\n          takvimData.push(data.takvimList[i]);\n        }\n      }\n      for (let key in takvimData) {\n        takvimData[key].classNames = [\"eventColumn\"];\n      }\n      this.takvimList = takvimData;\n      this.temsilciOzetList = data.temsilciOzetList;\n      this.hatirlatmaList = data.hatirlatmaList;\n      this.musteriOzetList = data.musteriOzetList;\n      this.tabloToplariYenile();\n      this.$store.dispatch(\"loadingEndAct\");\n    });\n\n    // let username = this.$store.getters.__getUsername;\n    // socket.siparis.on(\"teklif_sil_emit\", () => {\n    //   this.baslangicIslemler();\n    // });\n    // socket.siparis.on(\"teklif_yeni_emit\", (value) => {\n    //   if (username == value) {\n    //     this.baslangicIslemler();\n    //   } else {\n    //     this.baslangicIslemler();\n\n    //     this.$toast.add({\n    //       severity: \"success\",\n    //       summary: \"Uyarı Ekranı\",\n    //       detail: `${value} Yeni Teklif Girişi Yaptı`,\n    //       life: 5000,\n    //     });\n    //   }\n    // });\n\n    // socket.siparis.on(\"teklif_guncelleme_emit\", (value) => {\n    //   if (username == value) {\n    //     this.baslangicIslemler();\n    //   } else {\n    //     this.baslangicIslemler();\n\n    //     //this.$toast.add({severity:'success', summary: 'Bilgi Ekranı', detail:`value Teklif Güncellemesi Yaptı`,  life: 5000});\n    //   }\n    // });\n  },\n\n  methods: {\n    takvimClick() {},\n    tarihSec() {\n      this.$refs.takvim.calendar.gotoDate(this.selectDate);\n    },\n    tabloToplariYenile() {\n      this.toplam_temsilci_teklif = 0;\n      this.toplam_temsilci_proforma = 0;\n      this.toplam_hatirlatma_sayisi = 0;\n      this.toplam_musteriOzet_teklif = 0;\n      for (let key in this.temsilciOzetList) {\n        const item = this.temsilciOzetList[key];\n        this.toplam_temsilci_teklif += item.teklifSayisi;\n        this.toplam_temsilci_proforma += item.proformaSayisi;\n      }\n      for (let key in this.musteriOzetList) {\n        const item = this.musteriOzetList[key];\n        this.toplam_musteriOzet_teklif += item.teklifSayisi;\n      }\n      this.toplam_hatirlatma_sayisi = this.hatirlatmaList.length;\n    },\n    teklifFormAc() {\n      this.teklifYeniKayit = true;\n      this.teklifFormvisible = true;\n    },\n    selectOzetListSec() {\n      this.selectKullaniciAdi = this.selectOzetList.adi;\n      this.kullaniciListeBaslik = this.selectOzetList.adi + \" TEKLİF LİSTESİ\";\n      this.kullaniciListeVisible = true;\n    },\n    kullaniciListeAc() {\n      this.selectKullaniciAdi = \"\";\n      this.kullaniciListeBaslik = \"TEKLİF LİSTESİ\";\n      this.kullaniciListeVisible = true;\n    },\n    teklifYeniUrunKaydiIslemi() {},\n    tumTekliflerAc() {\n      teklifService.getTumTeklifler().then(data => {\n        this.tumtekliflist = data;\n        this.is_tumteklifler = true;\n      });\n    },\n    eskiTeklifAc() {\n      teklifService.getEskiTeklifList().then(data => {\n        this.eskitekliflist = data;\n        this.is_eskiteklifler = true;\n      });\n    }\n  },\n  mounted() {\n    console.log(\"hatirlatmaTeklifList\", this.hatirlatmaTeklifList);\n    for (let item in this.hatirlatmaTeklifList) {\n      const date = this.hatirlatmaTeklifList[item].tarih.split(\"-\");\n      const timaDate = date[2] + \"-\" + date[1] + \"-\" + date[0];\n      this.calendarOptions.events.push({\n        title: this.hatirlatmaTeklifList[item].musteriAdi,\n        date: timaDate\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["teklifService","TeklifGirisForm","KullaniciTeklifListe","socket","TumTeklifler","EskiTeklifler","FullCalendar","dayGridPlugin","interactionPlugin","mapGetters","computed","components","kullaniciTeklifListe","tumTeklifler","eskiTeklifler","data","teklifFormvisible","temsilciOzetList","temsilciLoading","selectOzetList","toplam_temsilci_teklif","toplam_temsilci_proforma","hatirlatmaList","hatirlatmaLoading","toplam_hatirlatma_sayisi","musteriOzetList","musteriOzetLoading","toplam_musteriOzet_teklif","teklifFormBaslik","kullaniciListeVisible","is_tumteklifler","kullaniciListeBaslik","selectKullaniciAdi","visibleFull","calendarOptions","plugins","initialView","events","takvimList","selectDate","teklifYeniKayit","teklifId","tumtekliflist","eskitekliflist","is_eskiteklifler","created","$store","dispatch","getTakvimList","then","takvimData","i","hatirlatmaDurum","push","key","classNames","tabloToplariYenile","methods","takvimClick","tarihSec","$refs","takvim","calendar","gotoDate","item","teklifSayisi","proformaSayisi","length","teklifFormAc","selectOzetListSec","adi","kullaniciListeAc","teklifYeniUrunKaydiIslemi","tumTekliflerAc","getTumTeklifler","eskiTeklifAc","getEskiTeklifList","mounted","console","log","hatirlatmaTeklifList","date","tarih","split","timaDate","title","musteriAdi"],"sourceRoot":"","sources":["C:\\PROJELER\\NewProjects\\gitPull\\newprojectweb\\src\\views\\Teklifler.vue"],"sourcesContent":["<template>\r\n  <div class=\"columns\">\r\n    <div class=\"column is-3\">\r\n      <Card>\r\n        <template #content>\r\n          <div class=\"columns\">\r\n            <div class=\"column\">\r\n              <Button\r\n                label=\"Hepsi\"\r\n                iconPos=\"left\"\r\n                icon=\"fas fa-list\"\r\n                class=\"hepsiButton\"\r\n                @click=\"kullaniciListeAc\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"columns\">\r\n            <div class=\"column\">\r\n              <DataTable\r\n                class=\"p-datatable-responsive\"\r\n                :value=\"temsilciOzetList\"\r\n                :loading=\"temsilciLoading\"\r\n                dataKey=\"id\"\r\n                selectionMode=\"single\"\r\n                v-model:selection=\"selectOzetList\"\r\n                @row-select=\"selectOzetListSec\"\r\n              >\r\n                <Column field=\"adi\" header=\"Adi\">\r\n                  <template #body=\"slotProps\">\r\n                    <div>{{ slotProps.data.adi }}</div>\r\n                  </template>\r\n                </Column>\r\n                <Column\r\n                  field=\"teklifSayisi\"\r\n                  header=\"Teklif\"\r\n                  bodyStyle=\"text-align:center;\"\r\n                >\r\n                  <template #body=\"slotProps\">\r\n                    {{ slotProps.data.teklifSayisi }}\r\n                  </template>\r\n                  <template #footer>\r\n                    {{ toplam_temsilci_teklif }}\r\n                  </template>\r\n                </Column>\r\n                <Column\r\n                  field=\"proformaSayisi\"\r\n                  header=\"PI\"\r\n                  bodyStyle=\"text-align:center;\"\r\n                >\r\n                  <template #body=\"slotProps\">\r\n                    {{ slotProps.data.proformaSayisi }}\r\n                  </template>\r\n                  <template #footer>\r\n                    {{ toplam_temsilci_proforma }}\r\n                  </template>\r\n                </Column>\r\n              </DataTable>\r\n            </div>\r\n          </div>\r\n          <div class=\"columns\">\r\n            <div class=\"column\">\r\n              <DataTable\r\n                class=\"p-datatable-responsive\"\r\n                :value=\"hatirlatmaList\"\r\n                :loading=\"hatirlatmaLoading\"\r\n              >\r\n                <Column field=\"tarih\" header=\"Tarih\">\r\n                  <template #body=\"slotProps\">\r\n                    {{ slotProps.data.tarih }}\r\n                  </template>\r\n                </Column>\r\n                <Column field=\"musteriAdi\" header=\"Müşteri\">\r\n                  <template #body=\"slotProps\">\r\n                    {{ slotProps.data.musteriAdi }}\r\n                  </template>\r\n                  <template #footer>\r\n                    {{ toplam_hatirlatma_sayisi }}\r\n                  </template>\r\n                </Column>\r\n                <Column field=\"ulkeAdi\" header=\"Ülke\">\r\n                  <template #body=\"slotProps\">\r\n                    {{ slotProps.data.ulkeAdi }}\r\n                  </template>\r\n                </Column>\r\n              </DataTable>\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </Card>\r\n    </div>\r\n    <div class=\"column is-6\">\r\n      <Card>\r\n        <template #content>\r\n          <div class=\"columns\">\r\n            <div class=\"column\">\r\n              <Button\r\n                label=\"Teklif Girişi\"\r\n                iconPos=\"left\"\r\n                icon=\"fas fa-file\"\r\n                class=\"teklifButton\"\r\n                @click=\"teklifFormAc\"\r\n              />\r\n              <Button\r\n                label=\"Eski Teklifler\"\r\n                iconPos=\"left\"\r\n                icon=\"fas fa-paste\"\r\n                class=\"p-button-warning\"\r\n                @click=\"eskiTeklifAc\"\r\n              />\r\n              <Button\r\n                @click=\"tumTekliflerAc\"\r\n                label=\"Teklifler\"\r\n                iconPos=\"left\"\r\n                icon=\"fas fa-list\"\r\n                class=\"p-button-danger\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"columns\">\r\n            <div class=\"column is-12\">\r\n                <FullCalendar :options=\"calendarOptions\"   />\r\n\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </Card>\r\n    </div>\r\n    <div class=\"column is-3\">\r\n      <Card>\r\n        <template #header>\r\n          <div class=\"columns is-centered\">\r\n            <div class=\"column is-11\">\r\n              <DataTable\r\n                class=\"p-datatable-responsive\"\r\n                :value=\"musteriOzetList\"\r\n                :loading=\"musteriOzetLoading\"\r\n                :scrollable=\"true\"\r\n                scrollHeight=\"408px\"\r\n              >\r\n                <Column field=\"musteriAdi\" header=\"Müşteri\">\r\n                  <template #body=\"slotProps\">\r\n                    {{ slotProps.data.musteriAdi }}\r\n                  </template>\r\n                </Column>\r\n                <Column field=\"ulkeAdi\" header=\"Ülke\">\r\n                  <template #body=\"slotProps\">\r\n                    {{ slotProps.data.ulkeAdi }}\r\n                  </template>\r\n                </Column>\r\n                <Column\r\n                  field=\"teklifSayisi\"\r\n                  header=\"T\"\r\n                  headerStyle=\"width:50px\"\r\n                  bodyStyle=\"text-align:center\"\r\n                >\r\n                  <template #body=\"slotProps\">\r\n                    {{ slotProps.data.teklifSayisi }}\r\n                  </template>\r\n                  <template #footer>\r\n                    {{ toplam_musteriOzet_teklif }}\r\n                  </template>\r\n                </Column>\r\n              </DataTable>\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </Card>\r\n    </div>\r\n  </div>\r\n\r\n  <!--Dialogs-->\r\n  <Dialog\r\n    v-model:visible=\"kullaniciListeVisible\"\r\n    v-model:header=\"kullaniciListeBaslik\"\r\n    :modal=\"true\"\r\n    maximizable\r\n    position=\"top\"\r\n  >\r\n    <kullanici-teklif-liste :kullaniciAdi=\"selectKullaniciAdi\" />\r\n  </Dialog>\r\n  <Dialog\r\n    v-model:visible.sync=\"teklifFormvisible\"\r\n    v-model:header=\"teklifFormBaslik\"\r\n    :modal=\"true\"\r\n    maximizable\r\n    position=\"top\"\r\n  >\r\n    <teklif-giris-form :yeniKayit=\"teklifYeniKayit\" :teklifId=\"teklifId\" />\r\n  </Dialog>\r\n  <Dialog\r\n    v-model:visible=\"is_eskiteklifler\"\r\n    header=\"Eski Teklif Listesi\"\r\n    :modal=\"true\"\r\n    maximizable\r\n    position=\"top\"\r\n  >\r\n    <eskiTeklifler :eskitekliflist=\"eskitekliflist\" />\r\n  </Dialog>\r\n  <Dialog\r\n    v-model:visible=\"is_tumteklifler\"\r\n    header=\"Teklif Listesi\"\r\n    :modal=\"true\"\r\n    maximizable\r\n    position=\"top\"\r\n  >\r\n    <tumTeklifler :tumtekliflist=\"tumtekliflist\" />\r\n  </Dialog>\r\n</template>\r\n<script>\r\nimport teklifService from \"@/service/TeklifService\";\r\nimport TeklifGirisForm from \"@/components/teklifler/TeklifGirisForm\";\r\nimport KullaniciTeklifListe from \"@/components/teklifler/KullaniciTeklifListe\";\r\nimport socket from \"@/service/SocketService\";\r\nimport TumTeklifler from \"@/components/teklifler/TumTeklifler\";\r\nimport EskiTeklifler from \"@/components/teklifler/EskiTeklifler\";\r\nimport \"@fullcalendar/core/vdom\"; // solves problem with Vite\r\nimport FullCalendar from \"@fullcalendar/vue3\";\r\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\r\nimport interactionPlugin from \"@fullcalendar/interaction\";\r\nimport { mapGetters } from \"vuex\";\r\nexport default {\r\n  computed: {\r\n    ...mapGetters([\r\n      'hatirlatmaTeklifList'\r\n    ])\r\n  },\r\n  components: {\r\n    TeklifGirisForm: TeklifGirisForm,\r\n    kullaniciTeklifListe: KullaniciTeklifListe,\r\n    tumTeklifler: TumTeklifler,\r\n    eskiTeklifler: EskiTeklifler,\r\n    FullCalendar,\r\n  },\r\n  data() {\r\n    return {\r\n      teklifFormvisible: false,\r\n      temsilciOzetList: null,\r\n      temsilciLoading: false,\r\n      selectOzetList: null,\r\n      toplam_temsilci_teklif: 0,\r\n      toplam_temsilci_proforma: 0,\r\n      hatirlatmaList: null,\r\n      hatirlatmaLoading: false,\r\n      toplam_hatirlatma_sayisi: 0,\r\n      musteriOzetList: null,\r\n      musteriOzetLoading: false,\r\n      toplam_musteriOzet_teklif: 0,\r\n      teklifFormBaslik: \"Yeni Teklif Girişi\",\r\n      kullaniciListeVisible: false,\r\n      is_tumteklifler: false,\r\n      kullaniciListeBaslik: \"\",\r\n      selectKullaniciAdi: \"\",\r\n      visibleFull: false,\r\n      calendarOptions: {\r\n        plugins: [dayGridPlugin, interactionPlugin],\r\n        initialView: \"dayGridMonth\",\r\n        events: [],\r\n      },\r\n      takvimList: null,\r\n      selectDate: null,\r\n      teklifYeniKayit: true,\r\n      teklifId: null,\r\n      tumtekliflist: null,\r\n      eskitekliflist: null,\r\n      is_eskiteklifler: false,\r\n    };\r\n  },\r\n  created() {\r\n    this.$store.dispatch(\"loadingBeginAct\");\r\n\r\n    teklifService.getTakvimList().then((data) => {\r\n      this.$store.dispatch(\"hatirlatma_list_load_act\", data.hatirlatmaList);\r\n\r\n      const takvimData = [];\r\n      for (var i in data.takvimList) {\r\n        if (data.takvimList[i].hatirlatmaDurum == \"True\") {\r\n          takvimData.push(data.takvimList[i]);\r\n        }\r\n      }\r\n\r\n      for (let key in takvimData) {\r\n        takvimData[key].classNames = [\"eventColumn\"];\r\n      }\r\n\r\n      this.takvimList = takvimData;\r\n      this.temsilciOzetList = data.temsilciOzetList;\r\n      this.hatirlatmaList = data.hatirlatmaList\r\n      this.musteriOzetList = data.musteriOzetList;\r\n      this.tabloToplariYenile();\r\n      this.$store.dispatch(\"loadingEndAct\");\r\n    });\r\n\r\n\r\n    // let username = this.$store.getters.__getUsername;\r\n    // socket.siparis.on(\"teklif_sil_emit\", () => {\r\n    //   this.baslangicIslemler();\r\n    // });\r\n    // socket.siparis.on(\"teklif_yeni_emit\", (value) => {\r\n    //   if (username == value) {\r\n    //     this.baslangicIslemler();\r\n    //   } else {\r\n    //     this.baslangicIslemler();\r\n\r\n    //     this.$toast.add({\r\n    //       severity: \"success\",\r\n    //       summary: \"Uyarı Ekranı\",\r\n    //       detail: `${value} Yeni Teklif Girişi Yaptı`,\r\n    //       life: 5000,\r\n    //     });\r\n    //   }\r\n    // });\r\n\r\n    // socket.siparis.on(\"teklif_guncelleme_emit\", (value) => {\r\n    //   if (username == value) {\r\n    //     this.baslangicIslemler();\r\n    //   } else {\r\n    //     this.baslangicIslemler();\r\n\r\n    //     //this.$toast.add({severity:'success', summary: 'Bilgi Ekranı', detail:`value Teklif Güncellemesi Yaptı`,  life: 5000});\r\n    //   }\r\n    // });\r\n\r\n\r\n  },\r\n  methods: {\r\n    takvimClick() {},\r\n    tarihSec() {\r\n      this.$refs.takvim.calendar.gotoDate(this.selectDate);\r\n    },\r\n    tabloToplariYenile() {\r\n      this.toplam_temsilci_teklif = 0;\r\n      this.toplam_temsilci_proforma = 0;\r\n      this.toplam_hatirlatma_sayisi = 0;\r\n      this.toplam_musteriOzet_teklif = 0;\r\n      for (let key in this.temsilciOzetList) {\r\n        const item = this.temsilciOzetList[key];\r\n\r\n        this.toplam_temsilci_teklif += item.teklifSayisi;\r\n        this.toplam_temsilci_proforma += item.proformaSayisi;\r\n      }\r\n\r\n      for (let key in this.musteriOzetList) {\r\n        const item = this.musteriOzetList[key];\r\n\r\n        this.toplam_musteriOzet_teklif += item.teklifSayisi;\r\n      }\r\n\r\n      this.toplam_hatirlatma_sayisi = this.hatirlatmaList.length;\r\n    },\r\n    teklifFormAc() {\r\n      this.teklifYeniKayit = true;\r\n\r\n      this.teklifFormvisible = true;\r\n    },\r\n    selectOzetListSec() {\r\n      this.selectKullaniciAdi = this.selectOzetList.adi;\r\n\r\n      this.kullaniciListeBaslik = this.selectOzetList.adi + \" TEKLİF LİSTESİ\";\r\n      this.kullaniciListeVisible = true;\r\n    },\r\n    kullaniciListeAc() {\r\n      this.selectKullaniciAdi = \"\";\r\n      this.kullaniciListeBaslik = \"TEKLİF LİSTESİ\";\r\n      this.kullaniciListeVisible = true;\r\n    },\r\n    teklifYeniUrunKaydiIslemi() {},\r\n    tumTekliflerAc() {\r\n      teklifService.getTumTeklifler().then((data) => {\r\n        this.tumtekliflist = data;\r\n        this.is_tumteklifler = true;\r\n      });\r\n    },\r\n    eskiTeklifAc() {\r\n      teklifService.getEskiTeklifList().then((data) => {\r\n        this.eskitekliflist = data;\r\n        this.is_eskiteklifler = true;\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    console.log(\"hatirlatmaTeklifList\", this.hatirlatmaTeklifList)\r\n    for (let item in this.hatirlatmaTeklifList) {\r\n      const date = this.hatirlatmaTeklifList[item].tarih.split(\"-\");\r\n      const timaDate = date[2] + \"-\" + date[1] + \"-\" + date[0];\r\n\r\n      this.calendarOptions.events.push({\r\n        title: this.hatirlatmaTeklifList[item].musteriAdi,\r\n        date: timaDate,\r\n      });\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.p-datatable {\r\n  font-size: 10px;\r\n}\r\n\r\n.p-inputtext {\r\n  justify-content: center;\r\n  display: flex;\r\n}\r\n\r\n.p-calendar {\r\n  text-align: center;\r\n}\r\n\r\n.eventColumn {\r\n  font-size: 8px !important;\r\n  color: yellow;\r\n}\r\n\r\n.teklifButton {\r\n  background-color: #65b9a4;\r\n  border: none;\r\n}\r\n\r\n.teklifButton:hover {\r\n  background-color: #008261;\r\n  border: none;\r\n}\r\n\r\n.hepsiButton {\r\n  background-color: #65b9a4;\r\n  border: none;\r\n}\r\n\r\n#takiptekiler {\r\n  height: 280px;\r\n}\r\n\r\n#takiptekilerBottom {\r\n  height: 450px;\r\n}\r\n\r\n@media screen and (max-width: 576px) {\r\n  #takiptekiler {\r\n    height: auto;\r\n  }\r\n\r\n  #takiptekilerBottom {\r\n    display: none;\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}