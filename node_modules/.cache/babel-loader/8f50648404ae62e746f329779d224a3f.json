{"ast":null,"code":"import service from \"@/service/OperasyonService\";\nimport { mapGetters } from \"vuex\";\n// import store from \"@/store\";\nimport fileService from \"@/service/FileService\";\nimport CustomInputFile from \"@/components/shared/CustomInputFile\";\nexport default {\n  components: {\n    customFileInput: CustomInputFile\n  },\n  computed: {\n    ...mapGetters([\"SiparisEvrakList\"])\n  },\n  created() {\n    if (this.SiparisEvrakList.Listem != null) {\n      this.evrakLink = `${this.SiparisEvrakList.Listem.Draft}`;\n      this.dis_download = false;\n    } else {\n      this.dis_download = true;\n    }\n    console.log(this.SiparisEvrakList.siparisno);\n    service.getEvrakTedarikciFaturaList(this.SiparisEvrakList.siparisno).then(data => {\n      this.tedarikciList = data;\n      this.TedarikciTur = this.tedarikciList.find(x => x.ID == this.id);\n    });\n  },\n  data() {\n    return {\n      tedarikciList: [],\n      tedarikci: \"\",\n      tedarikci_adi: \"\",\n      id: null,\n      filterTedarikciTurList: null,\n      TedarikciTur: null,\n      veri: [],\n      faturaNo: \"\",\n      tedarikciLink: \"\",\n      dis_DosyaAc: true\n    };\n  },\n  mounted() {},\n  methods: {\n    faturaDosyaGonder(event) {\n      if (event.size > 1000000) {\n        alert(\"Evrak Boyutunu Kontrol Ediniz.\");\n      } else {\n        const veri = {\n          FaturaNo: this.faturaNo,\n          tedarikci_id: this.TedarikciTur.ID,\n          tedarikci: this.TedarikciTur.tedarikci,\n          evrak: this.TedarikciTur.tedarikci + \".pdf\",\n          siparisno: this.SiparisEvrakList.siparisno,\n          kullaniciAdi: this.$store.getters.getUser\n        };\n        fileService.TedarikciDosyaGonder(event, this.SiparisEvrakList.siparisno, this.TedarikciTur.tedarikci + \".pdf\").then(data => {\n          console.log(data);\n          service.setTedarikciFaturaKayit(veri).then(veri => {\n            if (veri.Status) {\n              alert(\"Kayıt İşlemi Yapıldı.\");\n              this.dis_numuneDosyaAc = false;\n              this.tedarikciLink = `https://file-service.mekmar.com/file/tedarikci/download/30/${this.SiparisEvrakList.siparisno}/${this.TedarikciTur.tedarikci + \".pdf\"}`;\n              this.dis_DosyaAc = false;\n            }\n          });\n        });\n      }\n    },\n    urunKaydet() {\n      const veri = {\n        FaturaNo: this.faturaNo,\n        tedarikci_id: this.TedarikciTur.ID,\n        tedarikci: this.TedarikciTur.tedarikci,\n        evrak: this.TedarikciTur.tedarikci + \".pdf\",\n        siparisno: this.SiparisEvrakList.siparisno,\n        kullaniciAdi: this.$store.getters.getUser\n      };\n      service.setTedarikciEvrakFaturaKayit(veri).then(veri => {\n        if (veri.Status) {\n          alert(\"Kayıt İşlemi Yapıldı.\");\n        } else {\n          alert(\"Ops! Lütfen Yeniden Deneyiniz.\");\n        }\n      });\n    },\n    siparisTurDegisim() {\n      this.id = this.TedarikciTur.ID;\n    },\n    aramaTedarikciTur(event) {\n      setTimeout(() => {\n        let result;\n        if (event.query.length === 0) {\n          result = [...this.tedarikciList];\n        } else {\n          result = this.tedarikciList.filter(ted => {\n            return ted.tedarikci.toLowerCase().startsWith(event.query.toLowerCase());\n          });\n        }\n        this.filterTedarikciTurList = result;\n      }, 250);\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["service","mapGetters","fileService","CustomInputFile","components","customFileInput","computed","created","SiparisEvrakList","Listem","evrakLink","Draft","dis_download","console","log","siparisno","getEvrakTedarikciFaturaList","then","data","tedarikciList","TedarikciTur","find","x","ID","id","tedarikci","tedarikci_adi","filterTedarikciTurList","veri","faturaNo","tedarikciLink","dis_DosyaAc","mounted","methods","faturaDosyaGonder","event","size","alert","FaturaNo","tedarikci_id","evrak","kullaniciAdi","$store","getters","getUser","TedarikciDosyaGonder","setTedarikciFaturaKayit","Status","dis_numuneDosyaAc","urunKaydet","setTedarikciEvrakFaturaKayit","siparisTurDegisim","aramaTedarikciTur","setTimeout","result","query","length","filter","ted","toLowerCase","startsWith"],"sourceRoot":"","sources":["C:\\PROJELER\\NewProjects\\gitPull\\newprojectweb\\src\\components\\evrakgiris\\EvrakTedarikciForm.vue"],"sourcesContent":["<template>\r\n  <section>\r\n    <br/>\r\n    <div class=\"columns\">\r\n      <div class=\"column\">\r\n        <AutoComplete\r\n          :dropdown=\"true\"\r\n          size=\"20%;\"\r\n          v-model=\"TedarikciTur\"\r\n          :suggestions=\"filterTedarikciTurList\"\r\n          @complete=\"aramaTedarikciTur($event)\"\r\n          field=\"tedarikci\"\r\n          @item-select=\"siparisTurDegisim\"\r\n        >\r\n          <template #items=\"slotProps\">\r\n            <div class=\"p-clearfix p-autocomplete-brand-item\">\r\n              <div>\r\n                {{ slotProps.tedarikci }}\r\n              </div>\r\n            </div>\r\n          </template>\r\n        </AutoComplete>\r\n      </div>\r\n      <div class=\"column\">\r\n        <custom-file-input\r\n          baslik=\"  Dosya Yükle  \"\r\n          @sunucuDosyaYolla=\"faturaDosyaGonder($event)\"\r\n        />\r\n      </div>\r\n      <div class=\"column\">\r\n        <InputText v-model=\"faturaNo\" />\r\n      </div>\r\n      \r\n    </div>\r\n    <div class=\"columns\">\r\n      <div class=\"column is-12\">\r\n        <Button @click=\"urunKaydet\" style=\"width:100%;\" class=\"p-button-success\" label=\"KAYDET\" />\r\n      </div>\r\n      <!-- <div class=\"column\">\r\n        <a :href=\"tedarikciLink\" target=\"_self\">\r\n          <Button\r\n            label=\"Download\"\r\n            style=\"width: 120px\"\r\n            class=\"p-button-success\"\r\n            icon=\"fas fa-download\"\r\n            :disabled=\"dis_DosyaAc\"\r\n          />\r\n        </a>\r\n      </div> -->\r\n      <!-- <div class=\"column\">\r\n        <Button v-model=\"faturaNo\" style=\"width: 220px\" />\r\n      </div> -->\r\n    </div>\r\n  </section>\r\n</template>\r\n<script>\r\nimport service from \"@/service/OperasyonService\";\r\nimport { mapGetters } from \"vuex\";\r\n// import store from \"@/store\";\r\nimport fileService from \"@/service/FileService\";\r\nimport CustomInputFile from \"@/components/shared/CustomInputFile\";\r\nexport default {\r\n  components: {\r\n    customFileInput: CustomInputFile,\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"SiparisEvrakList\"]),\r\n  },\r\n  created() {\r\n    if (this.SiparisEvrakList.Listem != null) {\r\n      this.evrakLink = `${this.SiparisEvrakList.Listem.Draft}`;\r\n      this.dis_download = false;\r\n    } else {\r\n      this.dis_download = true;\r\n    }\r\n    console.log(this.SiparisEvrakList.siparisno);\r\n    service\r\n      .getEvrakTedarikciFaturaList(this.SiparisEvrakList.siparisno)\r\n      .then((data) => {\r\n        this.tedarikciList = data;\r\n        this.TedarikciTur = this.tedarikciList.find((x) => x.ID == this.id);\r\n      });\r\n  },\r\n  data() {\r\n    return {\r\n      tedarikciList: [],\r\n      tedarikci: \"\",\r\n      tedarikci_adi: \"\",\r\n      id: null,\r\n      filterTedarikciTurList: null,\r\n      TedarikciTur: null,\r\n      veri: [],\r\n      faturaNo: \"\",\r\n      tedarikciLink: \"\",\r\n      dis_DosyaAc: true,\r\n    };\r\n  },\r\n\r\n  mounted() {},\r\n  methods: {\r\n    faturaDosyaGonder(event) {\r\n      if (event.size > 1000000) {\r\n        alert(\"Evrak Boyutunu Kontrol Ediniz.\");\r\n      } else {\r\n        const veri = {\r\n          FaturaNo: this.faturaNo,\r\n          tedarikci_id: this.TedarikciTur.ID,\r\n          tedarikci: this.TedarikciTur.tedarikci,\r\n          evrak: this.TedarikciTur.tedarikci + \".pdf\",\r\n          siparisno: this.SiparisEvrakList.siparisno,\r\n          kullaniciAdi: this.$store.getters.getUser,\r\n        };\r\n\r\n        fileService\r\n          .TedarikciDosyaGonder(\r\n            event,\r\n            this.SiparisEvrakList.siparisno,\r\n            this.TedarikciTur.tedarikci + \".pdf\"\r\n          )\r\n          .then((data) => {\r\n            console.log(data);\r\n            service.setTedarikciFaturaKayit(veri).then((veri) => {\r\n              if (veri.Status) {\r\n                alert(\"Kayıt İşlemi Yapıldı.\");\r\n                this.dis_numuneDosyaAc = false;\r\n                this.tedarikciLink = `https://file-service.mekmar.com/file/tedarikci/download/30/${\r\n                  this.SiparisEvrakList.siparisno\r\n                }/${this.TedarikciTur.tedarikci + \".pdf\"}`;\r\n\r\n                this.dis_DosyaAc = false;\r\n              }\r\n            });\r\n          });\r\n      }\r\n    },\r\n    urunKaydet() {\r\n      const veri = {\r\n        FaturaNo: this.faturaNo,\r\n        tedarikci_id: this.TedarikciTur.ID,\r\n        tedarikci: this.TedarikciTur.tedarikci,\r\n        evrak: this.TedarikciTur.tedarikci + \".pdf\",\r\n        siparisno: this.SiparisEvrakList.siparisno,\r\n        kullaniciAdi: this.$store.getters.getUser,\r\n      };\r\n\r\n      service.setTedarikciEvrakFaturaKayit(veri).then((veri) => {\r\n        if (veri.Status) {\r\n          alert(\"Kayıt İşlemi Yapıldı.\");\r\n        } else {\r\n          alert(\"Ops! Lütfen Yeniden Deneyiniz.\");\r\n        }\r\n      });\r\n    },\r\n\r\n    siparisTurDegisim() {\r\n      this.id = this.TedarikciTur.ID;\r\n    },\r\n    aramaTedarikciTur(event) {\r\n      setTimeout(() => {\r\n        let result;\r\n        if (event.query.length === 0) {\r\n          result = [...this.tedarikciList];\r\n        } else {\r\n          result = this.tedarikciList.filter((ted) => {\r\n            return ted.tedarikci\r\n              .toLowerCase()\r\n              .startsWith(event.query.toLowerCase());\r\n          });\r\n        }\r\n\r\n        this.filterTedarikciTurList = result;\r\n      }, 250);\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.card {\r\n  font-size: 20px;\r\n}\r\n.stilim {\r\n  margin-top: 10px;\r\n  margin-bottom: 10px;\r\n\r\n  margin-left: 20px;\r\n  margin-right: 20px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}