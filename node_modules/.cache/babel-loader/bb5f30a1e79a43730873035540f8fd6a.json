{"ast":null,"code":"import { createApp, h } from 'vue';\nimport { createPlugin } from '@fullcalendar/core';\n/*\r\nwrap it in an object with a `vue` key, which the custom content-type handler system will look for\r\n*/\nexport function wrapVDomGenerator(vDomGenerator) {\n  return function (props) {\n    return {\n      vue: vDomGenerator(props)\n    };\n  };\n}\nexport function createVueContentTypePlugin(appContext) {\n  return createPlugin({\n    contentTypeHandlers: {\n      vue: () => buildVDomHandler(appContext) // looks for the `vue` key\n    }\n  });\n}\n\nfunction buildVDomHandler(appContext) {\n  let currentEl;\n  let app;\n  let componentInstance;\n  function render(el, vDomContent) {\n    if (currentEl !== el) {\n      if (currentEl && app) {\n        // if changing elements, recreate the vue\n        app.unmount();\n      }\n      currentEl = el;\n    }\n    if (!app) {\n      app = initApp(vDomContent, appContext);\n      // vue's mount method *replaces* the given element. create an artificial inner el\n      let innerEl = document.createElement('span');\n      el.appendChild(innerEl);\n      componentInstance = app.mount(innerEl);\n    } else {\n      componentInstance.content = vDomContent;\n    }\n  }\n  function destroy() {\n    if (app) {\n      // needed?\n      app.unmount();\n    }\n  }\n  return {\n    render,\n    destroy\n  };\n}\nfunction initApp(initialContent, appContext) {\n  // TODO: do something with appContext\n  return createApp({\n    data() {\n      return {\n        content: initialContent\n      };\n    },\n    render() {\n      let {\n        content\n      } = this;\n      // the slot result can be an array, but the returned value of a vue component's\n      // render method must be a single node.\n      if (content.length === 1) {\n        return content[0];\n      } else {\n        return h('span', {}, content);\n      }\n    }\n  });\n}","map":{"version":3,"mappings":"AAAA,SAAcA,SAAS,EAAwCC,CAAC,QAAoB,KAAK;AACzF,SAASC,YAAY,QAAmB,oBAAoB;AAO5D;;;AAGA,OAAM,SAAUC,iBAAiB,CAACC,aAAmB;EACnD,OAAO,UAASC,KAAU;IACxB,OAAO;MAAEC,GAAG,EAAEF,aAAa,CAACC,KAAK;IAAC,CAAE;EACtC,CAAC;AACH;AAEA,OAAM,SAAUE,0BAA0B,CAACC,UAAsB;EAC/D,OAAON,YAAY,CAAC;IAClBO,mBAAmB,EAAE;MACnBH,GAAG,EAAE,MAAMI,gBAAgB,CAACF,UAAU,CAAC,CAAE;;GAE5C,CAAC;AACJ;;AAEA,SAASE,gBAAgB,CAACF,UAAsB;EAC9C,IAAIG,SAAsB;EAC1B,IAAIC,GAAQ;EACZ,IAAIC,iBAAwC;EAE5C,SAASC,MAAM,CAACC,EAAe,EAAEC,WAAoB;IACnD,IAAIL,SAAS,KAAKI,EAAE,EAAE;MACpB,IAAIJ,SAAS,IAAIC,GAAG,EAAE;QAAE;QACtBA,GAAG,CAACK,OAAO,EAAE;;MAEfN,SAAS,GAAGI,EAAE;;IAGhB,IAAI,CAACH,GAAG,EAAE;MACRA,GAAG,GAAGM,OAAO,CAACF,WAAW,EAAER,UAAU,CAAC;MAEtC;MACA,IAAIW,OAAO,GAAGC,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;MAC5CN,EAAE,CAACO,WAAW,CAACH,OAAO,CAAC;MAEvBN,iBAAiB,GAAGD,GAAG,CAACW,KAAK,CAACJ,OAAO,CAA0B;KAChE,MAAM;MACLN,iBAAiB,CAACW,OAAO,GAAGR,WAAW;;EAE3C;EAEA,SAASS,OAAO;IACd,IAAIb,GAAG,EAAE;MAAE;MACTA,GAAG,CAACK,OAAO,EAAE;;EAEjB;EAEA,OAAO;IAAEH,MAAM;IAAEW;EAAO,CAAE;AAC5B;AAEA,SAASP,OAAO,CAACQ,cAAuB,EAAElB,UAAsB;EAC9D;EACA,OAAOR,SAAS,CAAC;IACf2B,IAAI;MACF,OAAO;QACLH,OAAO,EAAEE;OACW;IACxB,CAAC;IACDZ,MAAM;MACJ,IAAI;QAAEU;MAAO,CAAE,GAAG,IAAI;MAEtB;MACA;MACA,IAAIA,OAAO,CAACI,MAAM,KAAK,CAAC,EAAE;QACxB,OAAOJ,OAAO,CAAC,CAAC,CAAC;OAClB,MAAM;QACL,OAAOvB,CAAC,CAAC,MAAM,EAAE,EAAE,EAAEuB,OAAO,CAAC;;IAEjC;GACD,CAAC;AACJ","names":["createApp","h","createPlugin","wrapVDomGenerator","vDomGenerator","props","vue","createVueContentTypePlugin","appContext","contentTypeHandlers","buildVDomHandler","currentEl","app","componentInstance","render","el","vDomContent","unmount","initApp","innerEl","document","createElement","appendChild","mount","content","destroy","initialContent","data","length"],"sourceRoot":"","sources":["../src/custom-content-type.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}