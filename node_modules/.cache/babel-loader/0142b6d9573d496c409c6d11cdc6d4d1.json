{"ast":null,"code":"import { mapGetters } from 'vuex';\nimport service from '../../service/RaporService';\nimport operasyon from '../../service/OperasyonService';\nexport default {\n  computed: {\n    ...mapGetters(['maliyet_data'])\n  },\n  created() {\n    this.siparisno = this.maliyet_data.siparis_no;\n    this.loading = true;\n    operasyon.getEvrakFaturaList(this.siparisno).then(data => {\n      this.loading = true;\n      this.evrakList = data.fatura_listesi;\n      this.olmayan_evraklar = data.color_listesi;\n      this.loading = false;\n    });\n    this.loading = true;\n    service.getMaliyetAyrintiYeni(this.siparisno).then(data => {\n      this.masraf_list = data.maliyet;\n      this.maliyet_usd = data.maliyet[0].total_in;\n      this.banka = data.banka;\n      this.toplam_try = 0;\n      this.toplam_usd = 0;\n      this.toplam_masraf = 0;\n      this.ortalama_kur = 0;\n      for (let key in this.banka) {\n        const item = this.banka[key];\n        this.toplam_try += item.tutartl;\n        this.toplam_usd += item.tutar;\n        this.toplam_masraf += item.masraf;\n      }\n      this.ortalama_kur = this.toplam_try / this.toplam_usd;\n      if (!this.ortalama_kur) {\n        this.ortalama_kur = 0;\n      }\n      this.profit_try = this.ortalama_kur * this.maliyet_usd;\n      this.maliyet_try = this.ortalama_kur * this.maliyet_usd;\n      this.profit_try = this.toplam_try - this.profit_try;\n      this.loading = false;\n    });\n  },\n  data() {\n    return {\n      siparisno: null,\n      masraf_list: null,\n      banka: null,\n      toplam_try: 0,\n      toplam_usd: 0,\n      profit_try: 0,\n      maliyet_usd: 0,\n      ortalama_kur: 0,\n      toplam_masraf: 0,\n      evrakList: null,\n      loading: false,\n      maliyet_try: 0,\n      olmayan_evraklar: null\n    };\n  },\n  methods: {\n    evrak_indir(dosya_link, dosya_adi) {\n      this.$store.dispatch('loadBegin');\n      const link = document.createElement('a');\n      link.href = dosya_link;\n      link.setAttribute('download', `${dosya_adi}.pdf`);\n      document.body.appendChild(link);\n      link.click();\n      this.$store.dispatch('loadEnd');\n    },\n    faturaDowload(id) {\n      console.log(this.evrakList[id].Draft);\n      window.open(this.evrakList[id].Draft, \"_blank\");\n      //  this.evrak_indir(this.yuklemeList[id].Draft,'Fatura')\n    },\n\n    formatPrice(value) {\n      let val = (value / 1).toFixed(2).replace('.', ',');\n      return \"$\" + val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n    },\n    formatPriceTL(value) {\n      let val = (value / 1).toFixed(2).replace('.', ',');\n      return \"₺\" + val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["mapGetters","service","operasyon","computed","created","siparisno","maliyet_data","siparis_no","loading","getEvrakFaturaList","then","data","evrakList","fatura_listesi","olmayan_evraklar","color_listesi","getMaliyetAyrintiYeni","masraf_list","maliyet","maliyet_usd","total_in","banka","toplam_try","toplam_usd","toplam_masraf","ortalama_kur","key","item","tutartl","tutar","masraf","profit_try","maliyet_try","methods","evrak_indir","dosya_link","dosya_adi","$store","dispatch","link","document","createElement","href","setAttribute","body","appendChild","click","faturaDowload","id","console","log","Draft","window","open","formatPrice","value","val","toFixed","replace","toString","formatPriceTL"],"sourceRoot":"","sources":["C:\\PROJELER\\NewProjects\\gitPull\\newprojectweb\\src\\components\\maliyetraporlari\\MaliyetAyrinti.vue"],"sourcesContent":["<template>\r\n    <section>\r\n\r\n        <div class=\"column is-12\">\r\n       <DataTable\r\n          \r\n            :value=\"masraf_list\"\r\n            :loading=\"loading\"\r\n          >\r\n             <template #header>\r\n                     <div class=\"columns is-multiline\">\r\n                             <div class=\"column is-12\">\r\n                                 <span style=\"font-size:15px;\">Masraflar</span>\r\n                           </div>\r\n                                    \r\n                      </div>\r\n               \r\n                 </template> \r\n                <Column field=\"invoiced\" header=\"Fatura\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;background-color:#8AFF8A;\">\r\n                    <template #body=\"slotProps\">\r\n  \r\n                         <span style=\"color:#007500; font-weight:bold; \">{{formatPrice(slotProps.data.invoiced)}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                 \r\n                 <Column field=\"mekmer_alim\" header=\"Mekmar Üretim\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n                       <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.mekmer_alim)}}</span>  \r\n                    </template>\r\n                   \r\n                </Column>\r\n                 <Column field=\"mek_moz_alim\" header=\"Mek-Moz Üretim\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n                       <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.mek_moz_alim)}}</span>  \r\n                    </template>\r\n                   \r\n                </Column>\r\n                 <Column field=\"dis_alim\" header=\"Dış Üretim\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n                         <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.dis_alim)}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                  <Column field=\"nakliye\" header=\"Nakliye\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n                        <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.nakliye)}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                 <Column field=\"gumruk\" header=\"Gümrük\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;;\">\r\n                    <template #body=\"slotProps\">\r\n                      <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.gumruk)}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                  <Column field=\"ilaclama\" header=\"İlaçlama\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n                       <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.ilaclama)}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                  <Column field=\"liman\" header=\"Liman\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n                         <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.liman)}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                 <Column field=\"sigorta\"  header=\"Sigorta\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                   \r\n                    <template #body=\"slotProps\">\r\n                        <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.sigorta)}}</span>\r\n                    </template>\r\n                </Column>\r\n                 <Column field=\"navlun_alis\" header=\"Navlun\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n                         <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.navlun_alis)}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                 <Column field=\"detay_1\" header=\"Detay 1 \" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n                        <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.detay_1)}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                 <Column field=\"detay_2\" header=\"Detay 2 \" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n                        <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.detay_2)}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                 <Column field=\"detay_3\" header=\"Detay 3 \" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n                        <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.detay_3)}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                 <Column field=\"mekus_masraf\" header=\"Mekus Masraf\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n                       <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.mekus_masraf)}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                 <Column field=\"komisyon\" header=\"Komisyon\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n                        <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.komisyon)}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                  <Column field=\"ozel_iscilik\" header=\"Özel İşçilik\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                   <template #body=\"slotProps\">\r\n                       <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.ozel_iscilik)}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                <Column  field=\"banka_masrafi\" header=\"Banka Masrafı\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n                       <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.banka_masrafi)}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                  <Column  field=\"kurye\" header=\"Kurye\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n                      <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.kurye)}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                 <Column field=\"total_in\" header=\"Maliyet-USD\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;background-color:#FDEDEC;\">\r\n                       <template #body=\"slotProps\">\r\n                      <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPrice(slotProps.data.total_in)}}</span>\r\n                    </template>\r\n                   </Column>\r\n                    <Column  header=\"Maliyet-TRY\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;background-color:#FDEDEC;\">\r\n                       <template #body>\r\n                      <span style=\"color:#E74C3C; font-weight:bold; \">{{formatPriceTL(maliyet_try)}}</span>\r\n                    </template>\r\n                   </Column>\r\n                    <Column  header=\"Profit-USD\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;background-color:#8AFF8A;\">\r\n                    <template #body=\"slotProps\">\r\n                      <span style=\"color:#007500; font-weight:bold; \">{{formatPrice(slotProps.data.invoiced-slotProps.data.total_in)}}</span>\r\n                    </template>\r\n                   <template #footer>\r\n                          \r\n                        </template>\r\n                </Column>\r\n                <Column   header=\"Profit-TRY\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;background-color:#8AFF8A;\">\r\n                  \r\n                      <template #body>\r\n                            <span v-if=\"profit_try <=0\" style=\"color:#007500; font-weight:bold; \">{{formatPriceTL(0)}}</span>\r\n                             <span v-else style=\"color:#007500; font-weight:bold; \">{{formatPriceTL(profit_try)}}</span>\r\n                         \r\n                        </template>\r\n                    \r\n    \r\n                  \r\n                </Column>\r\n        </DataTable>  \r\n        </div>\r\n        <div class=\"columns\">\r\n            <div class=\"column is-6\">\r\n                 <DataTable\r\n          \r\n                 :value=\"banka\"\r\n                 :loading=\"loading\"\r\n                  >\r\n                    <template #header>\r\n                                <div class=\"columns is-multiline\">\r\n                                        <div class=\"column is-12\">\r\n                                        <span style=\"font-size:15px;\">Banka Özeti</span>\r\n                                        </div>\r\n                                    \r\n                                </div>\r\n               \r\n                        </template> \r\n                <Column field=\"tarih\" header=\"Ödenme Tarihi\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n  \r\n                         <span >{{(slotProps.data.tarih)}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                 <Column field=\"tutar\" header=\"Gelen-USD\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n  \r\n                         <span >{{formatPrice(slotProps.data.tutar)}}</span>\r\n                    </template>\r\n                    <template #footer>\r\n                            {{ formatPrice(toplam_usd )}}\r\n                        </template>\r\n                </Column>\r\n                   <Column field=\"tutartl\" header=\"Gelen-TRY\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n  \r\n                         <span >{{formatPriceTL(slotProps.data.tutartl)}}</span>\r\n                    </template>\r\n                    <template #footer>\r\n                            {{ formatPriceTL(toplam_try )}}\r\n                        </template>\r\n                </Column>\r\n                  <Column field=\"masraf\" header=\"Banka Masrafı\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n  \r\n                         <span >{{formatPrice(slotProps.data.masraf)}}</span>\r\n                    </template>\r\n                     <template #footer>\r\n                            {{ formatPrice(toplam_masraf )}}\r\n                        </template>\r\n                </Column>\r\n                 <Column field=\"kur\" header=\"Kur\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #body=\"slotProps\">\r\n  \r\n                         <span >{{slotProps.data.kur}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                 <Column  header=\"Maliyet Kur\" headerStyle=\"width:20px;\" bodyStyle=\"text-align:center;\">\r\n                    <template #footer>\r\n  \r\n                         <span >{{ortalama_kur | toDecimal}}</span>\r\n                    </template>\r\n                   \r\n                </Column>\r\n                </DataTable>   \r\n            </div>\r\n             <div class=\"column is-6\">\r\n                 \r\n                \r\n                    <DataTable \r\n                        :value=\"evrakList\" \r\n                        :sortOrder=\"-1\"\r\n                        :scrollable=\"true\"\r\n                        scrollHeight=\"330%\"\r\n                        :loading=\"loading\"\r\n                         class=\"p-datatable-customers\" \r\n                        >\r\n                       <template #header>\r\n                     <div class=\"columns is-multiline\">\r\n                             <div class=\"column is-12\">\r\n                                 <span style=\"font-size:15px;\">Yüklenen Evraklar</span>\r\n                           </div>\r\n                                    \r\n                      </div>\r\n               \r\n                 </template> \r\n                        <Column field=\"faturano\" header=\"#\"  bodyStyle=\"text-align:center;\"  headerStyle=\"width:5%;\"  ></Column>\r\n                        <Column field=\"yuklemeTarihi\"  headerStyle=\"width:2px;\"   bodyStyle=\"text-align:center;\" header=\"Evrak Yukleme Tarihi\"></Column>\r\n                        <Column field=\"adi\" header=\"Evrak Adı\"  headerStyle=\"width:6px;\"  bodyStyle=\"text-align:left\"  ></Column>\r\n                    \r\n                        <Column    header=\"İndir\"  headerStyle=\"width:9%;\"  bodyStyle=\"text-align:center;\">\r\n                        <template #body=\"slotProps\">\r\n                                <Button type=\"button\"  \r\n                           \r\n                                    :disabled=\"slotProps.data.adi.length > 0  ? false : true\"\r\n                                    @click=\"faturaDowload(slotProps.data.id)\"  icon=\"fas fa-download\" class=\"p-button\" style=\"margin-right: .5em; background-color:#3CB371;\"></Button>\r\n                            </template>\r\n                        </Column>\r\n                        <Column field=\"kullanici\" headerStyle=\"width:5px;\" bodyStyle=\"text-align:center;\">\r\n                       \r\n                        </Column>\r\n                        <template #footer>\r\n                        </template>\r\n                   </DataTable>\r\n                   \r\n                  \r\n             </div>\r\n        </div>\r\n       \r\n    </section>\r\n</template>\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport service from '../../service/RaporService'\r\nimport operasyon from '../../service/OperasyonService'\r\n\r\nexport default {\r\n    \r\n    computed : {\r\n\r\n        ...mapGetters(\r\n            ['maliyet_data']\r\n        )\r\n    },\r\n    created(){\r\n      \r\n      this.siparisno = this.maliyet_data.siparis_no\r\n      this.loading = true\r\n      operasyon.getEvrakFaturaList(this.siparisno).then(data => {\r\n          \r\n          this.loading = true\r\n          this.evrakList = data.fatura_listesi\r\n          this.olmayan_evraklar = data.color_listesi\r\n          \r\n         this.loading = false\r\n      })\r\n        this.loading = true\r\n      service.getMaliyetAyrintiYeni(this.siparisno).then(data => {\r\n          this.masraf_list = data.maliyet\r\n          this.maliyet_usd = data.maliyet[0].total_in\r\n        \r\n          this.banka = data.banka\r\n            this.toplam_try = 0\r\n            this.toplam_usd = 0\r\n            this.toplam_masraf = 0\r\n            this.ortalama_kur = 0\r\n            \r\n             for(let key in this.banka){\r\n\r\n                 const item = this.banka[key]\r\n\r\n                 this.toplam_try += item.tutartl\r\n                  this.toplam_usd += item.tutar\r\n                  this.toplam_masraf += item.masraf\r\n              \r\n             }\r\n              this.ortalama_kur = ( this.toplam_try / this.toplam_usd )\r\n              if (!this.ortalama_kur){this.ortalama_kur = 0}\r\n             this.profit_try = this.ortalama_kur  * this.maliyet_usd\r\n             this.maliyet_try = this.ortalama_kur  * this.maliyet_usd\r\n             this.profit_try  =  this.toplam_try - this.profit_try\r\n             this.loading = false\r\n        \r\n       })\r\n    \r\n       \r\n    },\r\n     data() {\r\n     return{\r\n        siparisno : null,\r\n        masraf_list : null,\r\n        banka : null ,\r\n        toplam_try: 0,\r\n        toplam_usd : 0,\r\n        profit_try : 0,\r\n        maliyet_usd : 0,\r\n        ortalama_kur : 0,\r\n        toplam_masraf : 0,\r\n        evrakList : null,\r\n        loading : false,\r\n        maliyet_try : 0,\r\n        olmayan_evraklar : null,\r\n     \r\n     }},\r\n    methods : {\r\n             evrak_indir(dosya_link,dosya_adi){\r\n\r\n                    this.$store.dispatch('loadBegin')\r\n                    const link = document.createElement('a')\r\n                    link.href = dosya_link\r\n                    \r\n                    link.setAttribute('download',`${dosya_adi}.pdf`)\r\n                    document.body.appendChild(link)\r\n                    link.click()\r\n                    this.$store.dispatch('loadEnd')\r\n             },\r\n              faturaDowload(id){\r\n            console.log(this.evrakList[id].Draft)\r\n              window.open(this.evrakList[id].Draft, \"_blank\");\r\n          //  this.evrak_indir(this.yuklemeList[id].Draft,'Fatura')\r\n         },\r\n         formatPrice(value) {\r\n            let val = (value/1).toFixed(2).replace('.', ',')\r\n            return \"$\" +  val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")\r\n          },\r\n          formatPriceTL(value) {\r\n            let val = (value/1).toFixed(2).replace('.', ',')\r\n            return \"₺\" +  val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")\r\n          },\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n  .input-css{\r\n\r\n      text-align: center;\r\n       \r\n  }\r\n  .p-datatable{\r\n\r\n        font-size:9px;\r\n    }\r\n.table-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n \r\n</style>"]},"metadata":{},"sourceType":"module"}