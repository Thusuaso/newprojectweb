{"ast":null,"code":"import { mapGetters } from \"vuex\";\nimport service from \"@/service/FinansService\";\nimport store from \"@/store\";\nimport FinansAyrintiList from \"@/components/finans/FinansAyrintiList\";\nimport socket from \"@/service/SocketService\";\nimport DepoAnaList from \"@/components/finans/DepoAnaList\";\nimport VadeliAlacaklar from \"@/components/finans/VadeliAlacaklar\";\nimport MusteriOdemeler from \"@/components/finans/MusteriOdemeler\";\nimport PesinatTahsil from \"@/components/finans/PesinatTahsil\";\nimport { FilterMatchMode } from \"primevue/api\";\nexport default {\n  components: {\n    FinansAyrintiList,\n    DepoAnaList,\n    MusteriOdemeler,\n    PesinatTahsil,\n    VadeliAlacaklar\n  },\n  beforeRouteEnter(to, from, next) {\n    const username = store.getters.__getUsername;\n    const ad = username;\n    const d = new Date();\n    const year = d.getFullYear(); // 2021\n    store.dispatch(\"loadingBeginAct\");\n    service.getKonteynerAnaListe(year).then(data => {\n      if (ad == \"Ozlem\" || ad == \"Hakan\") {\n        data.konteyner_list = [...data.konteyner_list.filter(x => x.temsilci == ad)];\n      } else if (ad == \"Gizem\") {\n        data.konteyner_list = [...data.konteyner_list.filter(x => x.marketing == \"Mekmar\")];\n      }\n      store.dispatch(\"finansAnaListeYukleAct\", data);\n      store.dispatch(\"depo_ana_list_yukle_act\", data);\n      store.dispatch(\"loadingEndAct\");\n      next();\n    });\n  },\n  created() {\n    socket.siparis.on(\"tahsilat_kayitdegisim_emit\", () => {\n      this.finans_loading = true;\n      const d = new Date();\n      const year = d.getFullYear(); // 2021\n      service.getKonteynerAnaListe(year).then(data => {\n        store.dispatch(\"finansAnaListeYukleAct\", data);\n        this.finans_loading = false;\n      });\n    });\n    if (window.innerWidth < 576) {\n      this.isMobile = \"8px\";\n    }\n    this.genel_bakiye = this.finans_toplam_genel_bakiye;\n    this.yeni_pesinat = this.finans_toplam_pesinat + this.finans_toplam_eski_pesinat;\n    this.yuklemeden_alacak = this.finans_toplam_bakiye - this.finans_toplam_odenen;\n    this.yeni_odenen = this.finans_toplam_odenen;\n    this.yeni_yukleme = this.finans_toplam_bakiye;\n    this.eski_pesinat = this.finans_toplam_eski_pesinat;\n    this.eski_alacak = this.finans_toplam_devir;\n  },\n  data() {\n    return {\n      isMobile: \"\",\n      filters: {\n        musteriadi: {\n          value: null,\n          matchMode: FilterMatchMode.STARTS_WITH\n        }\n      },\n      datalist: [],\n      select_konteyner: null,\n      konteyner_list_hepsi: false,\n      isKonteyner: false,\n      konteynerBaslik: \"\",\n      finans_loading: false,\n      excel_cikti: \"konteyner\",\n      is_tahsilat: false,\n      ciro: 0,\n      is_pesinat: false,\n      is_form1: false,\n      genel_bakiye: 0,\n      yeni_pesinat: 0,\n      yuklemeden_alacak: 0,\n      yeni_odenen: 0,\n      yeni_yukleme: 0,\n      eski_pesinat: 0,\n      eski_alacak: 0\n    };\n  },\n  computed: {\n    ...mapGetters([\"konteyner_ana_list_all\", \"konteyner_ana_list_filter\", \"finans_toplam_devir\", \"finans_toplam_ciro\", \"finans_toplam_odenen\", \"finans_toplam_bakiye\", \"finans_toplam_pesinat\", \"finans_toplam_genel_bakiye\", \"depo_ana_list\", \"servis_adres\", \"finans_toplam_eski_pesinat\"])\n  },\n  methods: {\n    atlanta_depo() {\n      const d = new Date();\n      const year = d.getFullYear(); // 2021\n      service.getKonteynerAnaListe(year).then(data => {\n        store.dispatch(\"depo_ana_list_yukle_act\", data);\n        this.is_form1 = true;\n      });\n    },\n    formatPrice(value) {\n      let val = (value / 1).toFixed(2).replace(\".\", \",\");\n      return \"$\" + val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n    },\n    siparisFilterDegisim(event) {\n      this.toplamGuncelle(event.filteredValue);\n    },\n    toplamGuncelle(liste) {\n      this.genel_bakiye = 0;\n      this.yeni_pesinat = 0;\n      this.yuklemeden_alacak = 0;\n      this.yeni_odenen = 0;\n      this.yeni_yukleme = 0;\n      this.eski_pesinat = 0;\n      this.eski_alacak = 0;\n      for (let key in liste) {\n        const data = liste[key];\n        this.genel_bakiye += data.genel_bakiye;\n        this.yeni_pesinat += data.pesinat;\n        this.yuklemeden_alacak += data.kapanmayan_kalan;\n        this.yeni_odenen += data.kapanmayan_odenen;\n        this.yeni_yukleme += data.kapanmayan_siparis;\n        this.eski_pesinat += data.eski_pesinat;\n        this.eski_alacak += data.devir;\n      }\n    },\n    konteynerHepsiEvent() {\n      if (this.konteyner_list_hepsi) {\n        const data = [...this.konteyner_ana_list_all];\n        store.dispatch(\"finansAnaListe_hepsiAct\", data);\n        this.tableToplamGuncelle(this.konteyner_list_all);\n        //this.$refs.finans_ana_liste.value = this.konteyner_ana_list_all\n      } else {\n        const data = [...this.konteyner_ana_list_filter];\n        store.dispatch(\"finansAnaListe_filterAct\", data);\n        this.tableToplamGuncelle(data);\n\n        //this.$refs.finans_ana_liste.value = this.konteyner_ana_list_filter\n      }\n    },\n\n    konteyner_item_select(event) {\n      this.select_konteyner = event.data;\n      service.getFinansAyrintiListYukle(event.data.id).then(data => {\n        store.dispatch(\"finansAyrintiListYukleAct\", data);\n        this.konteynerBaslik = event.data.musteriadi;\n        this.isKonteyner = true;\n      });\n    },\n    tableToplamGuncelle(data_list) {\n      this.ciro = 0;\n      for (let key in data_list) {\n        const item = data_list[key];\n        this.ciro += item.ciro;\n      }\n    },\n    excel_cikti_click() {\n      if (this.excel_cikti == \"konteyner\") {\n        const data = !this.konteyner_list_hepsi ? this.konteyner_ana_list_filter : this.konteyner_ana_list_all;\n        service.getKonteynerExcelListe(data).then(response => {\n          if (response.status) {\n            const link = document.createElement(\"a\");\n            link.href = this.servis_adres + \"finans/dosyalar/konteynerExcelCikti\";\n            link.setAttribute(\"download\", \"konteyter_listesi.xlsx\");\n            document.body.appendChild(link);\n            link.click();\n            this.is_excel = false;\n            this.musteri_loading = false;\n          }\n        });\n      } else {\n        service.getDepoExcelListe(this.depo_ana_list).then(x => {\n          if (x.status) {\n            const link = document.createElement(\"a\");\n            link.href = this.servis_adres + \"finans/dosyalar/depoExcelCikti\";\n            link.setAttribute(\"download\", \"depo_listesi.xlsx\");\n            document.body.appendChild(link);\n            link.click();\n            this.is_excel = false;\n            this.musteri_loading = false;\n          }\n        });\n      }\n    },\n    tahsilat_liste_ac_click() {\n      this.is_tahsilat = true;\n    },\n    pesinat_event_click() {\n      this.$store.dispatch(\"new_pesinat_model_act\");\n      service.getPesinatIslemListesi().then(data => {\n        this.$store.dispatch(\"pesinat_listesi_yukle_act\", data);\n        this.is_pesinat = true;\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["mapGetters","service","store","FinansAyrintiList","socket","DepoAnaList","VadeliAlacaklar","MusteriOdemeler","PesinatTahsil","FilterMatchMode","components","beforeRouteEnter","to","from","next","username","getters","__getUsername","ad","d","Date","year","getFullYear","dispatch","getKonteynerAnaListe","then","data","konteyner_list","filter","x","temsilci","marketing","created","siparis","on","finans_loading","window","innerWidth","isMobile","genel_bakiye","finans_toplam_genel_bakiye","yeni_pesinat","finans_toplam_pesinat","finans_toplam_eski_pesinat","yuklemeden_alacak","finans_toplam_bakiye","finans_toplam_odenen","yeni_odenen","yeni_yukleme","eski_pesinat","eski_alacak","finans_toplam_devir","filters","musteriadi","value","matchMode","STARTS_WITH","datalist","select_konteyner","konteyner_list_hepsi","isKonteyner","konteynerBaslik","excel_cikti","is_tahsilat","ciro","is_pesinat","is_form1","computed","methods","atlanta_depo","formatPrice","val","toFixed","replace","toString","siparisFilterDegisim","event","toplamGuncelle","filteredValue","liste","key","pesinat","kapanmayan_kalan","kapanmayan_odenen","kapanmayan_siparis","devir","konteynerHepsiEvent","konteyner_ana_list_all","tableToplamGuncelle","konteyner_list_all","konteyner_ana_list_filter","konteyner_item_select","getFinansAyrintiListYukle","id","data_list","item","excel_cikti_click","getKonteynerExcelListe","response","status","link","document","createElement","href","servis_adres","setAttribute","body","appendChild","click","is_excel","musteri_loading","getDepoExcelListe","depo_ana_list","tahsilat_liste_ac_click","pesinat_event_click","$store","getPesinatIslemListesi"],"sourceRoot":"","sources":["C:\\PROJELER\\NewProjects\\gitPull\\newprojectweb\\src\\views\\FinansAnaSayfa.vue"],"sourcesContent":["<template>\r\n  <section>\r\n    <div class=\"columns is-multiline\">\r\n      <div class=\"column is-3\">\r\n        <Checkbox @input=\"konteynerHepsiEvent\" v-model=\"konteyner_list_hepsi\" />\r\n        Hepsi\r\n      </div>\r\n      <div class=\"columns is-multiline\">\r\n        <div class=\"column is-6\">\r\n          <Button\r\n            class=\"p-button-primary\"\r\n            label=\"Tahsilat\"\r\n            @click=\"tahsilat_liste_ac_click\"\r\n          />\r\n          <Dialog\r\n            v-model:visible=\"is_tahsilat\"\r\n            header=\"TAHSİLAT LİSTESİ\"\r\n            :modal=\"true\"\r\n            maximizable\r\n            position=\"top\"\r\n          >\r\n            <section>\r\n              <div\r\n                class=\"container\"\r\n                style=\"height: 800px; background-color: white\"\r\n              >\r\n                <div\r\n                  class=\"columns\"\r\n                  style=\"height: 800px; background-color: white\"\r\n                >\r\n                  <div\r\n                    class=\"column is-12\"\r\n                    style=\"height: 800px; background-color: white\"\r\n                  >\r\n                    <MusteriOdemeler />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </section>\r\n          </Dialog>\r\n        </div>\r\n        <div class=\"column is-6\">\r\n          <Button\r\n            style=\"background-color: #7aa998\"\r\n            @click=\"pesinat_event_click\"\r\n            label=\"Peşinat\"\r\n            class=\"p-button-primary\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <Dialog\r\n        v-model:visible=\"is_pesinat\"\r\n        header=\"PEŞİNAT LİSTESİ\"\r\n        :modal=\"true\"\r\n        maximizable\r\n        position=\"top\"\r\n      >\r\n        <section>\r\n          <div class=\"columns\">\r\n            <div class=\"column is-12\">\r\n              <PesinatTahsil />\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </Dialog>\r\n      <div class=\"column is-3\">\r\n        <div class=\"columns is-multiline is-right\">\r\n          <div class=\"column is-3\">\r\n            <RadioButton v-model=\"excel_cikti\" value=\"konteyner\" /> Konteynır\r\n          </div>\r\n          <div class=\"column is-2\">\r\n            <RadioButton v-model=\"excel_cikti\" value=\"depo\" />Depo\r\n          </div>\r\n          <div class=\"column is-2\">\r\n            <Button\r\n              @click=\"excel_cikti_click\"\r\n              style=\"background-color: #609377; color: white; margin-top: -10px\"\r\n              label=\"Excel\"\r\n              class=\"p-button-primary\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"columns\" style=\"margin-top: -20px\">\r\n      <div class=\"column is-9\">\r\n        <DataTable\r\n          :value=\"\r\n            !konteyner_list_hepsi\r\n              ? konteyner_ana_list_filter\r\n              : konteyner_ana_list_all\r\n          \"\r\n          sortField=\"genel_bakiye\"\r\n          dataKey=\"id\"\r\n          :sortOrder=\"-1\"\r\n          :scrollable=\"true\" \r\n          scrollHeight=\"800px\"\r\n          v-model:filters=\"filters\"\r\n          filterDisplay=\"row\"\r\n          @filter=\"siparisFilterDegisim($event)\"\r\n          selectionMode=\"single\"\r\n          v-model:selection=\"select_konteyner\"\r\n          ref=\"finans_ana_liste\"\r\n          @row-select=\"konteyner_item_select($event)\"\r\n        >\r\n          <template #header>\r\n            <div class=\"columns is-multiline\">\r\n              <div class=\"column is-12\">\r\n                <span style=\"font-size: 15px\"> Konteynır Alacak Tablosu </span>\r\n              </div>\r\n            </div>\r\n          </template>\r\n          <Column\r\n            field=\"musteriadi\"\r\n            headerStyle=\"width:16.6%;\"\r\n            :bodyStyle=\"{ fontSize: isMobile, paddingLeft: '20px' }\"\r\n            :showFilterMenu=\"false\"\r\n          >\r\n            <template #body=\"slotProps\">\r\n              {{ slotProps.data.musteriadi }}\r\n            </template>\r\n            <template #filter=\"{filterModel,filterCallback}\">\r\n              <InputText\r\n                type=\"text\"\r\n                v-model=\"filterModel.value\"\r\n                @input=\"filterCallback()\"\r\n                class=\"p-column-filter\"\r\n                :placeholder=\"`Search by name - `\" v-tooltip.top.focus=\"'Hit enter key to filter'\" />\r\n            </template>\r\n          </Column>\r\n\r\n          <Column\r\n            header=\"Açık Po Fatura Toplamı\"\r\n            field=\"ciro\"\r\n            headerStyle=\"width:16.6%;\"\r\n            :bodyStyle=\"{\r\n              textAlign: 'center',\r\n              color: 'black',\r\n              fontSize: isMobile,\r\n            }\"\r\n          >\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.kapanmayan_siparis) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(yeni_yukleme) }}\r\n            </template>\r\n          </Column>\r\n          <Column\r\n            header=\"Açık Po için Ödemeler\"\r\n            field=\"odenen\"\r\n            headerStyle=\"width:16.6%;\"\r\n            :bodyStyle=\"{\r\n              textAlign: 'center',\r\n              color: 'black',\r\n              fontSize: isMobile,\r\n            }\"\r\n          >\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.kapanmayan_odenen) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(yeni_odenen) }}\r\n            </template>\r\n          </Column>\r\n          <Column\r\n            header=\"Açık Po için Kalan Alacak\"\r\n            field=\"bakiye\"\r\n            :sortable=\"true\"\r\n            headerStyle=\"width:16.6%;\"\r\n            :bodyStyle=\"{\r\n              textAlign: 'center',\r\n              color: 'black',\r\n              fontSize: isMobile,\r\n            }\"\r\n          >\r\n            <template #body=\"slotProps\">\r\n              {{ formatPrice(slotProps.data.kapanmayan_kalan) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(yuklemeden_alacak) }}\r\n            </template>\r\n          </Column>\r\n          <Column\r\n            header=\"Yüklenmemiş Order Peşinatı\"\r\n            field=\"pesinat\"\r\n            headerStyle=\"width:16.6%;font-size:8.5px;\"\r\n            :bodyStyle=\"{\r\n              textAlign: 'center',\r\n              color: 'black',\r\n              fontSize: isMobile,\r\n            }\"\r\n          >\r\n            <template #body=\"slotProps\">\r\n              <!--   <div :style=\"{'background-color' : slotProps.data.pesinat >10 || slotProps.data.pesinat <-8 ? '#7aa998'  : ''}\">\r\n                                        {{formatPrice(slotProps.data.pesinat)}}\r\n                                    </div>\r\n                                 -->\r\n              <div\r\n                :class=\"\r\n                  slotProps.data.pesinat > 10 ||\r\n                  slotProps.data.eski_pesinat > 10 ||\r\n                  (slotProps.data.pesinat < -8 &&\r\n                    slotProps.data.genel_bakiye < -8)\r\n                    ? 'genel_bakiye_style'\r\n                    : ''\r\n                \"\r\n              >\r\n                {{\r\n                  formatPrice(\r\n                    slotProps.data.pesinat + slotProps.data.eski_pesinat\r\n                  )\r\n                }}\r\n              </div>\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(yeni_pesinat) }}\r\n            </template>\r\n          </Column>\r\n          <Column\r\n            header=\"RİSK BAKİYE\"\r\n            field=\"genel_bakiye\"\r\n            :sortable=\"true\"\r\n            headerStyle=\"width:16.6%;\"\r\n            :bodyStyle=\"{\r\n              textAlign: 'center',\r\n              color: 'black',\r\n              fontSize: isMobile,\r\n              fontWeight: 'bold',\r\n            }\"\r\n          >\r\n            <template #body=\"slotProps\">\r\n              <!--\r\n                                    <div\r\n                                        :class=\"slotProps.data.genel_bakiye < -8 ? 'genel_bakiye_style' : 'genel_bakiye_style2'\">\r\n                                        {{formatPrice(slotProps.data.genel_bakiye)}}\r\n                                    </div>\r\n                                -->\r\n              <div\r\n                v-if=\"slotProps.data.genel_bakiye < -8\"\r\n                class=\"genel_bakiye_style\"\r\n              >\r\n                {{ formatPrice(slotProps.data.genel_bakiye) }}\r\n              </div>\r\n              <div\r\n                v-else-if=\"slotProps.data.genel_bakiye > 8\"\r\n                class=\"genel_bakiye_style2\"\r\n              >\r\n                {{ formatPrice(slotProps.data.genel_bakiye) }}\r\n              </div>\r\n              <div v-else class=\"genelClassRisk\">\r\n                {{ formatPrice(slotProps.data.genel_bakiye) }}\r\n              </div>\r\n            </template>\r\n            <template #footer>\r\n              {{ formatPrice(genel_bakiye) }}\r\n            </template>\r\n          </Column>\r\n        </DataTable>\r\n      </div>\r\n\r\n      <Dialog\r\n        v-model:visible=\"isKonteyner\"\r\n        v-model:header=\"konteynerBaslik\"\r\n        :modal=\"true\"\r\n        maximizable\r\n        position=\"top\"\r\n      >\r\n        <FinansAyrintiList />\r\n      </Dialog>\r\n\r\n      <div class=\"column is-3\">\r\n        <DepoAnaList />\r\n        <VadeliAlacaklar />\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport service from \"@/service/FinansService\";\r\nimport store from \"@/store\";\r\nimport FinansAyrintiList from \"@/components/finans/FinansAyrintiList\";\r\nimport socket from \"@/service/SocketService\";\r\nimport DepoAnaList from \"@/components/finans/DepoAnaList\";\r\nimport VadeliAlacaklar from \"@/components/finans/VadeliAlacaklar\";\r\nimport MusteriOdemeler from \"@/components/finans/MusteriOdemeler\";\r\nimport PesinatTahsil from \"@/components/finans/PesinatTahsil\";\r\nimport { FilterMatchMode } from \"primevue/api\";\r\nexport default {\r\n  components: {\r\n    FinansAyrintiList,\r\n    DepoAnaList,\r\n    MusteriOdemeler,\r\n    PesinatTahsil,\r\n    VadeliAlacaklar,\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    const username = store.getters.__getUsername;\r\n    const ad = username;\r\n\r\n    const d = new Date();\r\n    const year = d.getFullYear(); // 2021\r\n    store.dispatch(\"loadingBeginAct\");\r\n    service.getKonteynerAnaListe(year).then((data) => {\r\n      if (ad == \"Ozlem\" || ad == \"Hakan\") {\r\n        data.konteyner_list = [\r\n          ...data.konteyner_list.filter((x) => x.temsilci == ad),\r\n        ];\r\n      } else if (ad == \"Gizem\") {\r\n        data.konteyner_list = [\r\n          ...data.konteyner_list.filter((x) => x.marketing == \"Mekmar\"),\r\n        ];\r\n      }\r\n\r\n      store.dispatch(\"finansAnaListeYukleAct\", data);\r\n      store.dispatch(\"depo_ana_list_yukle_act\", data);\r\n      store.dispatch(\"loadingEndAct\");\r\n\r\n      next();\r\n    });\r\n  },\r\n  created() {\r\n    socket.siparis.on(\"tahsilat_kayitdegisim_emit\", () => {\r\n      this.finans_loading = true;\r\n      const d = new Date();\r\n      const year = d.getFullYear(); // 2021\r\n      service.getKonteynerAnaListe(year).then((data) => {\r\n        store.dispatch(\"finansAnaListeYukleAct\", data);\r\n        this.finans_loading = false;\r\n      });\r\n    });\r\n    if (window.innerWidth < 576) {\r\n      this.isMobile = \"8px\";\r\n    }\r\n\r\n    this.genel_bakiye = this.finans_toplam_genel_bakiye;\r\n\r\n    this.yeni_pesinat =\r\n      this.finans_toplam_pesinat + this.finans_toplam_eski_pesinat;\r\n    this.yuklemeden_alacak =\r\n      this.finans_toplam_bakiye - this.finans_toplam_odenen;\r\n    this.yeni_odenen = this.finans_toplam_odenen;\r\n    this.yeni_yukleme = this.finans_toplam_bakiye;\r\n    this.eski_pesinat = this.finans_toplam_eski_pesinat;\r\n    this.eski_alacak = this.finans_toplam_devir;\r\n  },\r\n  data() {\r\n    return {\r\n      isMobile: \"\",\r\n      filters: {\r\n        musteriadi: { value: null, matchMode: FilterMatchMode.STARTS_WITH },\r\n      },\r\n      datalist: [],\r\n      select_konteyner: null,\r\n      konteyner_list_hepsi: false,\r\n      isKonteyner: false,\r\n      konteynerBaslik: \"\",\r\n      finans_loading: false,\r\n      excel_cikti: \"konteyner\",\r\n      is_tahsilat: false,\r\n      ciro: 0,\r\n      is_pesinat: false,\r\n      is_form1: false,\r\n      genel_bakiye: 0,\r\n      yeni_pesinat: 0,\r\n      yuklemeden_alacak: 0,\r\n      yeni_odenen: 0,\r\n      yeni_yukleme: 0,\r\n      eski_pesinat: 0,\r\n      eski_alacak: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      \"konteyner_ana_list_all\",\r\n      \"konteyner_ana_list_filter\",\r\n      \"finans_toplam_devir\",\r\n      \"finans_toplam_ciro\",\r\n      \"finans_toplam_odenen\",\r\n      \"finans_toplam_bakiye\",\r\n      \"finans_toplam_pesinat\",\r\n      \"finans_toplam_genel_bakiye\",\r\n      \"depo_ana_list\",\r\n      \"servis_adres\",\r\n      \"finans_toplam_eski_pesinat\",\r\n    ]),\r\n  },\r\n  methods: {\r\n    atlanta_depo() {\r\n      const d = new Date();\r\n      const year = d.getFullYear(); // 2021\r\n      service.getKonteynerAnaListe(year).then((data) => {\r\n        store.dispatch(\"depo_ana_list_yukle_act\", data);\r\n        this.is_form1 = true;\r\n      });\r\n    },\r\n    formatPrice(value) {\r\n      let val = (value / 1).toFixed(2).replace(\".\", \",\");\r\n      return \"$\" + val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\r\n    },\r\n    siparisFilterDegisim(event) {\r\n      this.toplamGuncelle(event.filteredValue);\r\n    },\r\n    toplamGuncelle(liste) {\r\n      this.genel_bakiye = 0;\r\n      this.yeni_pesinat = 0;\r\n      this.yuklemeden_alacak = 0;\r\n      this.yeni_odenen = 0;\r\n      this.yeni_yukleme = 0;\r\n      this.eski_pesinat = 0;\r\n      this.eski_alacak = 0;\r\n\r\n      for (let key in liste) {\r\n        const data = liste[key];\r\n\r\n        this.genel_bakiye += data.genel_bakiye;\r\n        this.yeni_pesinat += data.pesinat;\r\n        this.yuklemeden_alacak += data.kapanmayan_kalan;\r\n        this.yeni_odenen += data.kapanmayan_odenen;\r\n        this.yeni_yukleme += data.kapanmayan_siparis;\r\n        this.eski_pesinat += data.eski_pesinat;\r\n        this.eski_alacak += data.devir;\r\n      }\r\n    },\r\n    konteynerHepsiEvent() {\r\n      if (this.konteyner_list_hepsi) {\r\n        const data = [...this.konteyner_ana_list_all];\r\n\r\n        store.dispatch(\"finansAnaListe_hepsiAct\", data);\r\n        this.tableToplamGuncelle(this.konteyner_list_all);\r\n        //this.$refs.finans_ana_liste.value = this.konteyner_ana_list_all\r\n      } else {\r\n        const data = [...this.konteyner_ana_list_filter];\r\n        store.dispatch(\"finansAnaListe_filterAct\", data);\r\n        this.tableToplamGuncelle(data);\r\n\r\n        //this.$refs.finans_ana_liste.value = this.konteyner_ana_list_filter\r\n      }\r\n    },\r\n    konteyner_item_select(event) {\r\n      this.select_konteyner = event.data;\r\n      service.getFinansAyrintiListYukle(event.data.id).then((data) => {\r\n        store.dispatch(\"finansAyrintiListYukleAct\", data);\r\n        this.konteynerBaslik = event.data.musteriadi;\r\n        this.isKonteyner = true;\r\n      });\r\n    },\r\n    tableToplamGuncelle(data_list) {\r\n      this.ciro = 0;\r\n\r\n      for (let key in data_list) {\r\n        const item = data_list[key];\r\n\r\n        this.ciro += item.ciro;\r\n      }\r\n    },\r\n    excel_cikti_click() {\r\n      if (this.excel_cikti == \"konteyner\") {\r\n        const data = !this.konteyner_list_hepsi\r\n          ? this.konteyner_ana_list_filter\r\n          : this.konteyner_ana_list_all;\r\n\r\n        service.getKonteynerExcelListe(data).then((response) => {\r\n          if (response.status) {\r\n            const link = document.createElement(\"a\");\r\n            link.href =\r\n              this.servis_adres + \"finans/dosyalar/konteynerExcelCikti\";\r\n\r\n            link.setAttribute(\"download\", \"konteyter_listesi.xlsx\");\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            this.is_excel = false;\r\n            this.musteri_loading = false;\r\n          }\r\n        });\r\n      } else {\r\n        service.getDepoExcelListe(this.depo_ana_list).then((x) => {\r\n          if (x.status) {\r\n            const link = document.createElement(\"a\");\r\n            link.href = this.servis_adres + \"finans/dosyalar/depoExcelCikti\";\r\n            link.setAttribute(\"download\", \"depo_listesi.xlsx\");\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            this.is_excel = false;\r\n            this.musteri_loading = false;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    tahsilat_liste_ac_click() {\r\n      this.is_tahsilat = true;\r\n    },\r\n    pesinat_event_click() {\r\n      this.$store.dispatch(\"new_pesinat_model_act\");\r\n      service.getPesinatIslemListesi().then((data) => {\r\n        this.$store.dispatch(\"pesinat_listesi_yukle_act\", data);\r\n        this.is_pesinat = true;\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.p-datatable {\r\n  font-size: 10px;\r\n}\r\n\r\n.depo-radio {\r\n  margin-top: -15px;\r\n  margin-bottom: -35px;\r\n}\r\n\r\n.genel_bakiye_style {\r\n  background-color: #f59c9c;\r\n  color: #f23a3a;\r\n  font-weight: bold;\r\n  font-size: 11px;\r\n}\r\n\r\n.genel_bakiye_style2 {\r\n  color: #527f62;\r\n  background-color: #c8fdda;\r\n  font-weight: bold;\r\n  font-size: 11px;\r\n}\r\n\r\n@media screen and (max-width: 576px) {\r\n  .genel_bakiye_style {\r\n    background-color: #f59c9c;\r\n    color: #f23a3a;\r\n    font-weight: bold;\r\n    font-size: 8px;\r\n  }\r\n\r\n  .genel_bakiye_style2 {\r\n    color: #527f62;\r\n    background-color: #c8fdda;\r\n    font-weight: bold;\r\n    font-size: 8px;\r\n  }\r\n}\r\n\r\n.genel_pesinat_style {\r\n  color: #527f62;\r\n  background-color: #c8fdda;\r\n  font-weight: bold;\r\n  font-size: 11px;\r\n}\r\n\r\n.dairesel {\r\n  border-radius: 150px;\r\n\r\n  -webkit-border-radius: 150px;\r\n\r\n  -moz-border-radius: 150px;\r\n}\r\n\r\n.genelClassRisk {\r\n  background-color: transparent;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}