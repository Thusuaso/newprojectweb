{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport service from \"@/service/RaporService\";\nimport musteriBazindaUretim from \"@/components/newyuklemeraporlari/musteriBazindaUretim\";\nimport byMarketingYukleme from \"@/components/newyuklemeraporlari/byMarketingYukleme\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  components: {\n    musteriBazindaUretim,\n    byMarketingYukleme\n  },\n  data() {\n    return {\n      toplamListe: [],\n      toplamFob: 0,\n      toplamCfr: 0,\n      totalBdFob: 0,\n      totalBdCfr: 0,\n      totalYuklemeFob: null,\n      totalYuklemeCfr: null,\n      fobToplami: 0,\n      cfrToplami: 0,\n      yil_listesi: null,\n      ay_listesi: null,\n      select_yil: 0,\n      select_ay: 0,\n      select_aystr: \"\",\n      filters: {},\n      aylik_yukleme_listesi: null,\n      musteribazinda_aylik: null,\n      yillik_yukleme_listesi: null,\n      aylik_sayim_listesi: null,\n      yillik_sayim_listesi: null,\n      aylik_liste: null,\n      yillik_liste: null,\n      tur: \"musteri\",\n      marketing: \"null\",\n      excelrapor: null,\n      siparis_no_durum: false,\n      siparis_no: \"\",\n      fob_ay_top: 0,\n      dtp_ay_top: 0,\n      fob_yil_top: 0,\n      dtp_yil_top: 0,\n      yukleme_ay_top: 0,\n      yukleme_yil_top: 0,\n      pdfrapor: null,\n      ay_baslik: \"\",\n      yil_baslik: \"\"\n    };\n  },\n  computed: {\n    ...mapGetters([\"servis_adres\", \"mekmarTotalLoadMonths\", \"mekmarLoadMonths\", \"mekmarBdLoadMonths\", \"byCustomersProduct\", \"byMarketingLoadMonth\", \"byMarketingProduct\", \"byMarketingWarehouseLoad\"])\n  },\n  created() {\n    service.getYuklemeYilListesi().then(yil_list => {\n      this.yil_listesi = yil_list;\n      this.select_yil = yil_list[0].yil;\n      this.yil_baslik = this.select_yil;\n      service.getYuklemeAyListesi(this.select_yil).then(ay_list => {\n        this.ay_listesi = ay_list;\n        this.select_ay = ay_list[0].ay;\n        this.select_aystr = ay_list[0].ay_str;\n        this.ay_baslik = this.select_aystr;\n        this.yukleme_listesi_yukle();\n      });\n    });\n    service.getYuklemeRapor(this.select_yil, this.select_ay).then(data => {\n      this.aylik_yukleme_listesi = data.aylik_yukleme_listesi;\n      this.yillik_yukleme_listesi = data.yillik_yukleme_listesi;\n      this.aylik_sayim_listesi = data.aylik_sayim_listesi;\n      this.yillik_sayim_listesi = data.yillik_sayim_listesi;\n      this.musteribazinda_aylik = data.musteribazinda_aylik;\n    });\n  },\n  methods: {\n    excel_cikti_click() {\n      const data = {\n        mekmarTotalLoadMonths: this.mekmarTotalLoadMonths,\n        mekmarLoadMonths: this.mekmarLoadMonths,\n        mekmarBdLoadMonths: this.mekmarBdLoadMonths\n      };\n      service.getMarketingExcell(data).then(response => {\n        if (response.status) {\n          const link = document.createElement(\"a\");\n          link.href = this.servis_adres + \"raporlar/dosyalar/marketingExcellCikti\";\n          link.setAttribute(\"download\", \"Yükleme_Raporu_(Fabrika+Depo).xlsx\");\n          document.body.appendChild(link);\n          link.click();\n        }\n      });\n    },\n    formatPrice(value) {\n      let val = (value / 1).toFixed(2).replace(\".\", \",\");\n      return \"$\" + val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n    },\n    yukleme_listesi_yukle() {\n      this.$store.dispatch(\"loadingBeginAct\");\n      service.getMarketingRaporlari().then(data => {\n        this.tabloToplamAlma(data.data.marketingYuklemeAylik, data.data.marketingBd);\n        this.$store.dispatch(\"mekmarTotalLoadMonthsAct\", this.toplamListe);\n        this.yuklemeToplamList(data.data.marketingYuklemeAylik);\n        this.bdToplamList(data.data.marketingBd);\n      });\n    },\n    yuklemeToplamList(liste) {\n      this.totalYuklemeFob = 0;\n      this.totalYuklemeCfr = 0;\n      for (let i of liste) {\n        this.totalYuklemeFob += i.fobToplam;\n        this.totalYuklemeCfr += i.cfrToplam;\n      }\n    },\n    bdToplamList(liste) {\n      this.totalBdFob = 0;\n      this.totalBdCfr = 0;\n      for (let i of liste) {\n        this.totalBdFob += i.fobToplam;\n        this.totalBdCfr += i.cfrToplam;\n      }\n    },\n    tabloToplamAlma(yuklemeListe, bdListe) {\n      this.fobToplami = 0;\n      this.cfrToplami = 0;\n      for (let item of yuklemeListe) {\n        this.fobToplami = item.fobToplam;\n        this.cfrToplami = item.cfrToplam;\n        const result = this.getTabloToplamBd(bdListe, item.ay)[0];\n        if (result.length == 0) {\n          this.fobToplami = item.fobToplam;\n          this.cfrToplami = item.cfrToplam;\n          this.toplamListe.push({\n            ay: item.ay,\n            fobToplami: this.fobToplami,\n            cfrToplami: this.cfrToplami\n          });\n        } else {\n          this.fobToplami += result.fobToplam;\n          this.cfrToplami += result.cfrToplam;\n          this.toplamListe.push({\n            ay: item.ay,\n            fobToplami: this.fobToplami,\n            cfrToplami: this.cfrToplami\n          });\n        }\n      }\n      this.toplamFob = 0;\n      this.toplamCfr = 0;\n      for (let item of this.toplamListe) {\n        this.toplamFob += item.fobToplami;\n        this.toplamCfr += item.cfrToplami;\n      }\n    },\n    getTabloToplamBd(bdListe, ay) {\n      const result = bdListe.filter(x => x.ay == ay);\n      if (result.length > 0) {\n        return result;\n      } else {\n        return [{\n          ay: ay,\n          fobToplam: 0,\n          cfrToplam: 0\n        }];\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["service","musteriBazindaUretim","byMarketingYukleme","mapGetters","components","data","toplamListe","toplamFob","toplamCfr","totalBdFob","totalBdCfr","totalYuklemeFob","totalYuklemeCfr","fobToplami","cfrToplami","yil_listesi","ay_listesi","select_yil","select_ay","select_aystr","filters","aylik_yukleme_listesi","musteribazinda_aylik","yillik_yukleme_listesi","aylik_sayim_listesi","yillik_sayim_listesi","aylik_liste","yillik_liste","tur","marketing","excelrapor","siparis_no_durum","siparis_no","fob_ay_top","dtp_ay_top","fob_yil_top","dtp_yil_top","yukleme_ay_top","yukleme_yil_top","pdfrapor","ay_baslik","yil_baslik","computed","created","getYuklemeYilListesi","then","yil_list","yil","getYuklemeAyListesi","ay_list","ay","ay_str","yukleme_listesi_yukle","getYuklemeRapor","methods","excel_cikti_click","mekmarTotalLoadMonths","mekmarLoadMonths","mekmarBdLoadMonths","getMarketingExcell","response","status","link","document","createElement","href","servis_adres","setAttribute","body","appendChild","click","formatPrice","value","val","toFixed","replace","toString","$store","dispatch","getMarketingRaporlari","tabloToplamAlma","marketingYuklemeAylik","marketingBd","yuklemeToplamList","bdToplamList","liste","i","fobToplam","cfrToplam","yuklemeListe","bdListe","item","result","getTabloToplamBd","length","push","filter","x"],"sourceRoot":"","sources":["C:\\PROJELER\\NewProjects\\gitPull\\newprojectweb\\src\\views\\YeniYuklemeRaporlari.vue"],"sourcesContent":["<template>\r\n  <section>\r\n    <TabView>\r\n      <TabPanel header=\"Rapor 1\">\r\n        <Button\r\n          icon=\"pi pi-file-excel\"\r\n          class=\"p-button-primary\"\r\n          label=\"Excel\"\r\n          @click=\"excel_cikti_click\"\r\n        />\r\n        <div class=\"columns is-multiline is-centered\">\r\n          <div class=\"column is-4\">\r\n            <DataTable\r\n              :value=\"mekmarLoadMonths\"\r\n              :scrollable=\"true\"\r\n              scrollHeight=\"420px\"\r\n              dataKey=\"id\"\r\n            >\r\n              <template #header>\r\n                <div class=\"columns is-multiline\">\r\n                  <div class=\"column is-12\">\r\n                    <span style=\"font-size: 15px\"\r\n                      >1) Aylık Toplam Yükleme (Bütün Pazarlamalar)\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </template>\r\n              <Column field=\"ay\" header=\"Ay\" bodyStyle=\"text-align:center;\">\r\n                <template #body=\"slotProps\">\r\n                  {{ slotProps.data.ay }}\r\n                </template>\r\n              </Column>\r\n              <Column\r\n                field=\"fobToplam\"\r\n                header=\"Fob\"\r\n                bodyStyle=\"text-align:center;\"\r\n              >\r\n                <template #body=\"slotProps\">\r\n                  {{ formatPrice(slotProps.data.fobToplam) }}\r\n                </template>\r\n                <template #footer>\r\n                  {{ formatPrice(totalYuklemeFob) }}\r\n                </template>\r\n              </Column>\r\n              <Column\r\n                field=\"cfrToplam\"\r\n                header=\"Cfr\"\r\n                bodyStyle=\"text-align:center;\"\r\n              >\r\n                <template #body=\"slotProps\">\r\n                  {{ formatPrice(slotProps.data.cfrToplam) }}\r\n                </template>\r\n                <template #footer>\r\n                  {{ formatPrice(totalYuklemeCfr) }}\r\n                </template>\r\n              </Column>\r\n            </DataTable>\r\n          </div>\r\n          <div class=\"column is-4\">\r\n            <DataTable\r\n              :value=\"mekmarBdLoadMonths\"\r\n              responsiveLayout=\"scroll\"\r\n              :scrollable=\"true\"\r\n              scrollHeight=\"420px\"\r\n            >\r\n              <template #header>\r\n                <div class=\"table-header\" style=\"font-size: 15px\">\r\n                  2) Kutu Bazında Depo Satışları\r\n                </div>\r\n              </template>\r\n              <Column field=\"ay\" header=\"Ay\">\r\n                <template #body=\"slotProps\">\r\n                  {{ slotProps.data.ay }}\r\n                </template>\r\n              </Column>\r\n              <Column field=\"fobToplam\" header=\"Fob\">\r\n                <template #body=\"slotProps\">\r\n                  {{ formatPrice(slotProps.data.fobToplam) }}\r\n                </template>\r\n                <template #footer>\r\n                  {{ formatPrice(totalBdFob) }}\r\n                </template>\r\n              </Column>\r\n              <Column field=\"cfrToplam\" header=\"Cfr\">\r\n                <template #body=\"slotProps\">\r\n                  {{ formatPrice(slotProps.data.cfrToplam) }}\r\n                </template>\r\n                <template #footer>\r\n                  {{ formatPrice(totalBdCfr) }}\r\n                </template>\r\n              </Column>\r\n            </DataTable>\r\n          </div>\r\n          <div class=\"column is-4\">\r\n            <DataTable\r\n              :value=\"mekmarTotalLoadMonths\"\r\n              responsiveLayout=\"scroll\"\r\n              :scrollable=\"true\"\r\n              scrollHeight=\"420px\"\r\n            >\r\n              <template #header>\r\n                <div class=\"table-header\" style=\"font-size: 15px\">\r\n                  3) Toplam\r\n                </div>\r\n              </template>\r\n              <Column field=\"ay\" header=\"Ay\">\r\n                <template #body=\"slotProps\">\r\n                  {{ slotProps.data.ay }}\r\n                </template>\r\n                <template #filter>\r\n                  <InputText v-model=\"filters['ay']\" class=\"p-column-filter\" />\r\n                </template>\r\n              </Column>\r\n              <Column field=\"fobToplam\" header=\"Fob\">\r\n                <template #body=\"slotProps\">\r\n                  {{ formatPrice(slotProps.data.fobToplami) }}\r\n                </template>\r\n                <template #footer>\r\n                  {{ formatPrice(toplamFob) }}\r\n                </template>\r\n              </Column>\r\n              <Column field=\"cfrToplam\" header=\"Cfr\">\r\n                <template #body=\"slotProps\">\r\n                  {{ formatPrice(slotProps.data.cfrToplami) }}\r\n                </template>\r\n                <template #footer>\r\n                  {{ formatPrice(toplamCfr) }}\r\n                </template>\r\n              </Column>\r\n            </DataTable>\r\n          </div>\r\n        </div>\r\n        <p style=\"color: red\">\r\n          * Yükleme tarihleri ve tutarları baz alınmıştır.\r\n        </p>\r\n        <p style=\"color: red\">\r\n          * Depodan Bd kutu satışları baz alınmıştır. BD ödemesi DDP olarak\r\n          gelirken FOB tutar, DDP' nin %70' i alınarak hesaplanır.\r\n        </p>\r\n      </TabPanel>\r\n      <TabPanel header=\"Rapor 2\">\r\n        <musteriBazindaUretim> </musteriBazindaUretim>\r\n        <p style=\"color: red\">\r\n          * Siparişler üretim aşamasında olduğu için yükleme sonrası değerlerde\r\n          farklılık görülebilir.\r\n        </p>\r\n      </TabPanel>\r\n      <TabPanel header=\"Rapor 3\">\r\n        <byMarketingYukleme></byMarketingYukleme>\r\n      </TabPanel>\r\n    </TabView>\r\n  </section>\r\n</template>\r\n<script>\r\nimport service from \"@/service/RaporService\";\r\nimport musteriBazindaUretim from \"@/components/newyuklemeraporlari/musteriBazindaUretim\";\r\nimport byMarketingYukleme from \"@/components/newyuklemeraporlari/byMarketingYukleme\";\r\n\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  components: {\r\n    musteriBazindaUretim,\r\n    byMarketingYukleme,\r\n  },\r\n  data() {\r\n    return {\r\n      toplamListe: [],\r\n      toplamFob: 0,\r\n      toplamCfr: 0,\r\n      totalBdFob: 0,\r\n      totalBdCfr: 0,\r\n      totalYuklemeFob: null,\r\n      totalYuklemeCfr: null,\r\n      fobToplami: 0,\r\n      cfrToplami: 0,\r\n      yil_listesi: null,\r\n      ay_listesi: null,\r\n      select_yil: 0,\r\n      select_ay: 0,\r\n      select_aystr: \"\",\r\n      filters: {},\r\n      aylik_yukleme_listesi: null,\r\n      musteribazinda_aylik: null,\r\n      yillik_yukleme_listesi: null,\r\n      aylik_sayim_listesi: null,\r\n      yillik_sayim_listesi: null,\r\n      aylik_liste: null,\r\n      yillik_liste: null,\r\n      tur: \"musteri\",\r\n      marketing: \"null\",\r\n      excelrapor: null,\r\n      siparis_no_durum: false,\r\n      siparis_no: \"\",\r\n      fob_ay_top: 0,\r\n      dtp_ay_top: 0,\r\n      fob_yil_top: 0,\r\n      dtp_yil_top: 0,\r\n      yukleme_ay_top: 0,\r\n      yukleme_yil_top: 0,\r\n      pdfrapor: null,\r\n      ay_baslik: \"\",\r\n      yil_baslik: \"\",\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n      \"servis_adres\",\r\n      \"mekmarTotalLoadMonths\",\r\n      \"mekmarLoadMonths\",\r\n      \"mekmarBdLoadMonths\",\r\n      \"byCustomersProduct\",\r\n      \"byMarketingLoadMonth\",\r\n      \"byMarketingProduct\",\r\n      \"byMarketingWarehouseLoad\",\r\n    ]),\r\n  },\r\n\r\n  created() {\r\n    service.getYuklemeYilListesi().then((yil_list) => {\r\n      this.yil_listesi = yil_list;\r\n      this.select_yil = yil_list[0].yil;\r\n      this.yil_baslik = this.select_yil;\r\n\r\n      service.getYuklemeAyListesi(this.select_yil).then((ay_list) => {\r\n        this.ay_listesi = ay_list;\r\n\r\n        this.select_ay = ay_list[0].ay;\r\n        this.select_aystr = ay_list[0].ay_str;\r\n        this.ay_baslik = this.select_aystr;\r\n        this.yukleme_listesi_yukle();\r\n      });\r\n    });\r\n    service.getYuklemeRapor(this.select_yil, this.select_ay).then((data) => {\r\n      this.aylik_yukleme_listesi = data.aylik_yukleme_listesi;\r\n      this.yillik_yukleme_listesi = data.yillik_yukleme_listesi;\r\n      this.aylik_sayim_listesi = data.aylik_sayim_listesi;\r\n      this.yillik_sayim_listesi = data.yillik_sayim_listesi;\r\n      this.musteribazinda_aylik = data.musteribazinda_aylik;\r\n    });\r\n  },\r\n  methods: {\r\n    excel_cikti_click() {\r\n      const data = {\r\n        mekmarTotalLoadMonths: this.mekmarTotalLoadMonths,\r\n        mekmarLoadMonths: this.mekmarLoadMonths,\r\n        mekmarBdLoadMonths: this.mekmarBdLoadMonths,\r\n      };\r\n      service.getMarketingExcell(data).then((response) => {\r\n        if (response.status) {\r\n          const link = document.createElement(\"a\");\r\n          link.href =\r\n            this.servis_adres + \"raporlar/dosyalar/marketingExcellCikti\";\r\n          link.setAttribute(\"download\", \"Yükleme_Raporu_(Fabrika+Depo).xlsx\");\r\n\r\n          document.body.appendChild(link);\r\n          link.click();\r\n        }\r\n      });\r\n    },\r\n    formatPrice(value) {\r\n      let val = (value / 1).toFixed(2).replace(\".\", \",\");\r\n      return \"$\" + val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\r\n    },\r\n    yukleme_listesi_yukle() {\r\n      this.$store.dispatch(\"loadingBeginAct\");\r\n      service.getMarketingRaporlari().then((data) => {\r\n        this.tabloToplamAlma(\r\n          data.data.marketingYuklemeAylik,\r\n          data.data.marketingBd\r\n        );\r\n        this.$store.dispatch(\"mekmarTotalLoadMonthsAct\", this.toplamListe);\r\n        this.yuklemeToplamList(data.data.marketingYuklemeAylik);\r\n        this.bdToplamList(data.data.marketingBd);\r\n      });\r\n    },\r\n    yuklemeToplamList(liste) {\r\n      this.totalYuklemeFob = 0;\r\n      this.totalYuklemeCfr = 0;\r\n      for (let i of liste) {\r\n        this.totalYuklemeFob += i.fobToplam;\r\n        this.totalYuklemeCfr += i.cfrToplam;\r\n      }\r\n    },\r\n    bdToplamList(liste) {\r\n      this.totalBdFob = 0;\r\n      this.totalBdCfr = 0;\r\n      for (let i of liste) {\r\n        this.totalBdFob += i.fobToplam;\r\n        this.totalBdCfr += i.cfrToplam;\r\n      }\r\n    },\r\n\r\n    tabloToplamAlma(yuklemeListe, bdListe) {\r\n      this.fobToplami = 0;\r\n      this.cfrToplami = 0;\r\n      for (let item of yuklemeListe) {\r\n        this.fobToplami = item.fobToplam;\r\n        this.cfrToplami = item.cfrToplam;\r\n        const result = this.getTabloToplamBd(bdListe, item.ay)[0];\r\n        if (result.length == 0) {\r\n          this.fobToplami = item.fobToplam;\r\n          this.cfrToplami = item.cfrToplam;\r\n          this.toplamListe.push({\r\n            ay: item.ay,\r\n            fobToplami: this.fobToplami,\r\n            cfrToplami: this.cfrToplami,\r\n          });\r\n        } else {\r\n          this.fobToplami += result.fobToplam;\r\n          this.cfrToplami += result.cfrToplam;\r\n          this.toplamListe.push({\r\n            ay: item.ay,\r\n            fobToplami: this.fobToplami,\r\n            cfrToplami: this.cfrToplami,\r\n          });\r\n        }\r\n      }\r\n      this.toplamFob = 0;\r\n      this.toplamCfr = 0;\r\n      for (let item of this.toplamListe) {\r\n        this.toplamFob += item.fobToplami;\r\n        this.toplamCfr += item.cfrToplami;\r\n      }\r\n    },\r\n    getTabloToplamBd(bdListe, ay) {\r\n      const result = bdListe.filter((x) => x.ay == ay);\r\n      if (result.length > 0) {\r\n        return result;\r\n      } else {\r\n        return [{ ay: ay, fobToplam: 0, cfrToplam: 0 }];\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.p-datatable {\r\n  font-size: 10px;\r\n}\r\n\r\n.p-column-filter {\r\n  font-size: 9px;\r\n}\r\n\r\n.page-button-excell {\r\n  margin-top: 30px;\r\n}\r\n\r\n.block {\r\n  margin-top: 15px;\r\n  margin-right: -25px;\r\n}\r\n\r\n.excel {\r\n  margin-top: 15px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}