{"ast":null,"code":"import SiparisBilgileri from \"./siparisGiris/SiparisBilgileri\";\n// import Etiketler from './siparisGiris/Etiketler';\n\nimport ProformaBilgileri from \"@/components/siparisler/siparisGiris/ProformaBilgileri\";\nimport Masraflar from \"@/components/siparisler/siparisGiris/Masraflar\";\nimport Tedarikciler from \"@/components/siparisler/siparisGiris/Tedarikciler\";\nimport SiparisService from \"@/service/SiparisService\";\nimport MusteriService from \"@/service/MusteriService\";\nimport KullaniciService from \"@/service/KullaniciService\";\nimport LocalService from \"@/service/LocalService\";\nimport CekiListesi from \"@/components/siparisler/siparisGiris/CekiListesi\";\nimport Evraklar from \"@/components/siparisler/siparisGiris/Evraklar\";\nimport Chat from \"@/components/siparisler/siparisGiris/Chat\";\nimport CurrencyInput2 from \"@/components/shared/CurrencyInput2\";\nimport socket from \"@/service/SocketService\";\nimport { mapGetters } from \"vuex\";\nimport store from \"@/store\";\nimport SiparisBolmeAlani from \"@/components/siparisler/siparisListeler/SiparisBolmeAlani.vue\";\nimport GidecekSipBilgileriRaporuUretim from \"@/components/raporlar/GidecekSipBilgileriRaporuUretim.vue\";\nexport default {\n  data() {\n    return {\n      iscilikData: 0,\n      sipData: null,\n      isSipBolForm: false,\n      isYeniSiparisForm: false,\n      siparisFormBaslik: \"\",\n      dialogVisible: false,\n      yeniSiparis2: true,\n      siparisTarihi: null,\n      TahminiyuklemeTarihi: null,\n      yuklemeTarihi: null,\n      eta: null,\n      musteri: null,\n      musteriList: null,\n      filterMusteriList: null,\n      kullanici: null,\n      kullaniciOp: null,\n      kullaniciFinans: null,\n      kullaniciList: null,\n      OperasyonkullaniciList: null,\n      FinansmankullaniciList: null,\n      filterKullaniciList: null,\n      filterOperasyonKullaniciList: null,\n      filterFinansmanKullaniciList: null,\n      siparis: {\n        siparisNo: \"\"\n      },\n      siparisUrunler: {},\n      siparisUrunLoading: true,\n      disPesinat: true,\n      urunModel: null,\n      urunler_yeni: [],\n      urunler_degisenler: [],\n      urunler_silinenler: [],\n      kayitDurum: true,\n      maliyet: {\n        fobMasraf: 0,\n        uretici: 0,\n        navlun: 0,\n        komisyon: 0,\n        digerTutar: 0,\n        genelToplam: 0,\n        iscilik: 0,\n        mekus_masraf: 0\n      },\n      localMasraflar: null,\n      profData: {},\n      isPesinat: true\n    };\n  },\n  props: {\n    dtSiparisNo: {\n      type: String,\n      required: false,\n      default: \"\"\n    },\n    yeniSiparis: {\n      type: Boolean,\n      default: true\n    }\n  },\n  computed: {\n    ...mapGetters([\"kayit_kontrol_degeri\", \"iscilik\", \"genelToplam\", \"uretici\", \"fobMasraf\", \"navlun\", \"komisyon\", \"digerTutar\", \"mekus_masraf\"])\n  },\n  watch: {\n    kayit_kontrol_degeri: function () {\n      this.kayitDurum = this.kayit_kontrol_degeri;\n    }\n  },\n  components: {\n    siparisBolmeAlani: SiparisBolmeAlani,\n    siparisBilgileri: SiparisBilgileri,\n    proformaBilgileri: ProformaBilgileri,\n    masraflar: Masraflar,\n    tedarikciler: Tedarikciler,\n    cekiListesi: CekiListesi,\n    inputCurrency: CurrencyInput2,\n    evraklar: Evraklar,\n    chat: Chat,\n    gidecekSipBilgileri: GidecekSipBilgileriRaporuUretim\n    // Etiketler\n  },\n\n  siparisService: null,\n  musteriService: null,\n  kullaniciService: null,\n  localService: null,\n  methods: {\n    close() {\n      if (this.kayitDurum == false) {\n        if (confirm(\"Kaydetmeden çıkmak istediğinize emin misiniz?\")) {\n          this.emitter.emit(\"kaydetmeden_cikma\", false);\n        }\n      } else {\n        this.emitter.emit(\"kaydetmeden_cikma\", false);\n      }\n    },\n    siparisBol() {\n      this.isSipBolForm = true;\n      if (this.sipData.siparis.pesinat > 0) {\n        this.isPesinat = false;\n      }\n    },\n    aramaMusteri(event) {\n      setTimeout(() => {\n        let result;\n        if (event.query.length === 0) {\n          result = [...this.musteriList];\n        } else {\n          result = this.musteriList.filter(ted => {\n            return ted.firmaAdi.toLowerCase().startsWith(event.query.toLowerCase());\n          });\n        }\n        this.filterMusteriList = result;\n      }, 250);\n    },\n    aramaKullanici(event) {\n      setTimeout(() => {\n        let result;\n        if (event.query.length === 0) {\n          result = [...this.kullaniciList];\n        } else {\n          result = this.kullaniciList.filter(ted => {\n            return ted.kullaniciAdi.toLowerCase().startsWith(event.query.toLowerCase());\n          });\n        }\n        this.filterKullaniciList = result;\n      }, 250);\n    },\n    aramaOperasyonKullanici(event) {\n      setTimeout(() => {\n        let result;\n        if (event.query.length === 0) {\n          result = [...this.OperasyonkullaniciList];\n        } else {\n          result = this.OperasyonkullaniciList.filter(ted => {\n            return ted.kullaniciAdi.toLowerCase().startsWith(event.query.toLowerCase());\n          });\n        }\n        this.filterOperasyonKullaniciList = result;\n      }, 250);\n    },\n    aramaFinansmanKullanici(event) {\n      setTimeout(() => {\n        let result;\n        if (event.query.length === 0) {\n          result = [...this.FinansmankullaniciList];\n        } else {\n          result = this.FinansmankullaniciList.filter(ted => {\n            return ted.kullaniciAdi.toLowerCase().startsWith(event.query.toLowerCase());\n          });\n        }\n        this.filterFinansmanKullaniciList = result;\n      }, 250);\n    },\n    siparisTarihiDegisim() {\n      this.siparis.siparisTarihi = this.localService.getDateString(this.siparisTarihi);\n    },\n    TahminiyuklemeTarihiDegisim() {\n      this.siparis.TahminiyuklemeTarihi = this.localService.getDateString(this.TahminiyuklemeTarihi);\n      this.kayitDurum = false;\n    },\n    faturaBilgileriGuncelle() {\n      //ürün toplamı alma\n      this.siparis.malBedeli = 0;\n      for (let key in this.siparisUrunler) {\n        this.siparis.malBedeli += this.siparisUrunler[key].satisToplam;\n      }\n      this.siparis.digerTutarToplam = this.siparis.detayTutar_1 + this.siparis.detayTutar_2 + this.siparis.detayTutar_3;\n      this.siparis.genelToplam = this.siparis.malBedeli + this.siparis.navlunSatis + this.siparis.digerTutarToplam;\n      this.$store.dispatch(\"navlun_act\", this.siparis.navlunSatis);\n      this.maliyetYenile();\n    },\n    siparisKaydet() {\n      if (this.kayitDurum != true) {\n        this.kayitDurum = true;\n        store.dispatch(\"kayit_kontrol_degeri_act\", true);\n        if (this.yeniSiparis) this.yeniSiparisKayit();else this.siparisGuncelleme();\n      } else {\n        this.$toast.add({\n          severity: \"error\",\n          summary: \"Uyarı Ekranı\",\n          detail: \"Sipariş iki kez kaydedilemez\"\n        });\n      }\n    },\n    yeniSiparisKayit() {\n      const username = this.$store.getters.__getUsername.toUpperCase();\n      const username2 = this.$store.getters.__getUsername.toLowerCase();\n      this.ad = username[0] + username2.substring(1);\n      this.siparis.kayit_kisi = this.ad;\n      this.siparis.siparisDurumId = 2;\n      if (this.siparis.odemeTurId == 1 || this.siparis.odemeTurId == 2) this.siparis.siparisDurumId = 1;\n      const siparisVeri = {\n        siparis: this.siparis,\n        siparisUrunler: this.siparisUrunler\n      };\n      this.kayitDurum = true;\n      this.siparisService.setSiparisKaydet(siparisVeri).then(data => {\n        if (data.status == true) {\n          this.$toast.add({\n            severity: \"success\",\n            summary: \"Bilgi Ekranı\",\n            detail: \"Sipariş Kaydı Tamamlandı.\",\n            life: 5000\n          });\n          this.kayitDurum = true;\n          socket.siparis.emit(\"siparis_yeni_event\", this.siparis.siparisNo);\n          this.yeniSiparis = false;\n          socket.siparis.emit(\"anaSayfaDegisiklikEvent\", data.anaSayfaDegisiklikList);\n          return;\n        } else {\n          this.$toast.add({\n            severity: \"error\",\n            summary: \"Bilgi Ekranı\",\n            detail: \"Sipariş Kaydı Yapılamadı. Tekrar Deneyiniz\",\n            life: 5000\n          });\n          this.kayitDurum = false;\n        }\n      });\n    },\n    siparisGuncelleme() {\n      const username = this.$store.getters.__getUsername.toUpperCase();\n      const username2 = this.$store.getters.__getUsername.toLowerCase();\n      this.ad = username[0] + username2.substring(1);\n      this.siparis.kayit_kisi = this.ad;\n      const siparisVeri = {\n        siparis: this.siparis,\n        urunlerYeni: this.urunler_yeni,\n        urunlerDegisenler: this.urunler_degisenler,\n        urunlerSilinenler: this.urunler_silinenler\n      };\n      this.siparisService.setSiparisGuncelle(siparisVeri).then(data => {\n        if (data.status == true) {\n          this.$toast.add({\n            severity: \"success\",\n            summary: \"Bilgi Ekranı\",\n            detail: \"Sipariş Değişiklikleri Yapıldı.\",\n            life: 5000\n          });\n          this.urunler_yeni = [];\n          this.kayitDurum = true;\n          let siparisDurum = \"\";\n          if (this.siparis.siparisDurumId == 1) siparisDurum = \"bekleyen\";\n          if (this.siparis.siparisDurumId == 2) siparisDurum = \"üretim\";\n          if (this.siparis.siparisDurumId == 3) siparisDurum = \"sevk\";\n          socket.siparis.emit(\"siparis_guncelleme_event\", {\n            siparisNo: this.siparis.siparisNo,\n            siparisTur: siparisDurum\n          });\n          socket.siparis.emit(\"anaSayfaDegisiklikEvent\", data.anaSayfaDegisiklikList);\n        } else {\n          this.$toast.add({\n            severity: \"error\",\n            summary: \"Bilgi Ekranı\",\n            detail: \"Sipariş Değişiklik Kaydı Yapılamadı. Tekrar Deneyiniz\",\n            life: 5000\n          });\n        }\n      });\n    },\n    odemeTurDegisim(event) {\n      const username = this.$store.getters.getUser.toLowerCase();\n      this.disPesinat = true;\n      if (event == 1) this.siparis.pesinat = this.siparis.genelToplam;\n      if (event == 2) {\n        if (username == \"huseyin\") {\n          this.disPesinat = false;\n        }\n      }\n    },\n    musteriDegisim() {\n      if (this.musteri) {\n        this.siparis.musteriId = this.musteri.id;\n      }\n    },\n    kullaniciDegisim() {\n      let then = this.siparis.siparisSahibi;\n      let now = this.kullanici.id;\n      let orderNo = this.siparis.siparisNo;\n      let info = \"Satışçı\";\n      const datas = {\n        then: then,\n        now: now,\n        orderNo: orderNo,\n        username: JSON.parse(localStorage.getItem(\"user\")).kullaniciAdi,\n        info: info\n      };\n      if (!this.yeniSiparis) {\n        this.siparisService.getOpChangeMailSend(datas).then(data => {\n          console.log(data);\n        });\n      }\n      if (this.kullanici) {\n        this.siparis.siparisSahibi = this.kullanici.id;\n        this.kayitDurum = false;\n      }\n    },\n    kullaniciOpDegisim() {\n      let then = this.siparis.operasyon;\n      let now = this.kullaniciOp.id;\n      let orderNo = this.siparis.siparisNo;\n      let info = \"Operasyon\";\n      const datas = {\n        then: then,\n        now: now,\n        orderNo: orderNo,\n        username: JSON.parse(localStorage.getItem(\"user\")).kullaniciAdi,\n        info: info\n      };\n      if (!this.yeniSiparis) {\n        this.siparisService.getOpChangeMailSend(datas).then(data => {\n          console.log(data);\n        });\n      }\n      if (this.kullaniciOp) {\n        this.siparis.operasyon = this.kullaniciOp.id;\n        this.kayitDurum = false;\n      }\n    },\n    kullaniciFinansmanDegisim() {\n      if (this.kullaniciFinans) {\n        this.siparis.finansman = this.kullaniciFinans.id;\n        this.kayitDurum = false;\n      }\n    },\n    maliyetYenile() {\n      this.maliyet.fobMasraf = 0;\n      this.maliyet.uretici = 0;\n      //    if (parseFloat(this.iscilikData) != 0) {\n\n      //        this.maliyet.iscilik += parseFloat(this.iscilikData)\n      //    } else {\n      //      this.maliyet.iscilik = 0\n      //      this.maliyet.iscilik = this.siparis.iscilikTutar;\n\n      //    }\n      this.maliyet.iscilik = this.siparis.iscilikTutar;\n\n      //local masraflar\n      for (let key in this.localMasraflar) {\n        this.maliyet.fobMasraf += this.localMasraflar[key].tutar;\n      }\n\n      //ürünler\n      for (let key in this.siparisUrunler) {\n        let data = this.siparisUrunler[key];\n        this.maliyet.uretici += data.alisFiyati * data.miktar;\n      }\n      this.maliyet.navlun = this.siparis.navlunAlis;\n      this.maliyet.komisyon = this.siparis.komisyon;\n      this.maliyet.digerTutar = this.siparis.detayAlis_1 + this.siparis.detayAlis_2 + this.siparis.detayAlis_3;\n      this.maliyet.mekus_masraf = this.siparis.mekus_masraf;\n      //    this.maliyet.genelToplam = this.maliyet.fobMasraf + this.maliyet.uretici + this.maliyet.navlun + this.maliyet.digerTutar + this.maliyet.iscilik +this.maliyet.mekus_masraf ;\n      this.$store.dispatch(\"iscilik_act\", this.maliyet.iscilik);\n      this.$store.dispatch(\"uretici_act\", this.maliyet.uretici);\n      this.$store.dispatch(\"navlun_act\", this.maliyet.navlun);\n      this.$store.dispatch(\"komisyon_act\", this.maliyet.komisyon);\n      this.$store.dispatch(\"diger_tutar_act\", this.maliyet.digerTutar);\n      this.$store.dispatch(\"mekus_masraf_act\", this.maliyet.mekus_masraf);\n      this.$store.dispatch(\"genel_toplam_act\");\n    },\n    musteriListYukle() {\n      this.musteriService.getMusteriList().then(data => {\n        this.musteriList = data;\n        this.musteri = data.find(x => x.id == this.siparis.musteriId);\n      });\n    },\n    kullaniciListYukle() {\n      this.kullaniciService.getKullaniciList().then(data => {\n        this.kullaniciList = data;\n        this.kullanici = data.find(x => x.id == this.siparis.siparisSahibi);\n        this.kullaniciOp = data.find(x => x.id == this.siparis.operasyon);\n      });\n      this.kullaniciService.getOperasyonKullaniciList().then(data => {\n        this.OperasyonkullaniciList = data;\n        this.FinansmankullaniciList = data;\n        this.kullaniciFinans = data.find(x => x.id == this.siparis.finansman);\n        this.kullaniciOp = data.find(x => x.id == this.siparis.operasyon);\n      });\n    },\n    siparisList() {\n      if (!this.yeniSiparis) {\n        this.siparisService.getSiparis(this.dtSiparisNo).then(data => {\n          this.sipData = data;\n          this.siparis = data.siparis;\n          this.kullaniciListYukle();\n          this.musteriListYukle();\n          this.siparisUrunler = data.siparisUrunler;\n          this.profData = data.siparis;\n          this.urunModel = data.urunModel;\n          this.siparisUrunLoading = false;\n          this.siparisTarihi = this.localService.getStringDate(this.siparis.siparisTarihi);\n          const d = new Date(this.siparis.TahminiyuklemeTarihi);\n          var year = d.getFullYear();\n          if (year <= \"1900\") {\n            this.TahminiyuklemeTarihi = null;\n          } else {\n            this.TahminiyuklemeTarihi = this.localService.getStringDate(this.siparis.TahminiyuklemeTarihi);\n          }\n\n          //\n          const d2 = new Date(this.siparis.eta);\n          var year2 = d2.getFullYear();\n          if (this.siparis.siparisDurumId == 3) {\n            this.yuklemeTarihi = this.localService.getStringDate(this.siparis.yuklemeTarihi);\n          }\n          if (year2 <= \"1900\") {\n            this.eta = null;\n          } else {\n            if (this.siparis.eta.length > 0) {\n              this.eta = this.localService.getStringDate(this.siparis.eta);\n            }\n          }\n\n          /*if(this.siparis.siparisDurumId == 3){\r\n              this.yuklemeTarihi = this.localService.getStringDate(this.siparis.yuklemeTarihi)\r\n          }\r\n              if(this.siparis.eta.length > 0) {\r\n              this.eta = this.localService.getStringDate(this.siparis.eta)\r\n          }*/\n\n          this.siparisService.getMasrafListesi(this.dtSiparisNo).then(data => {\n            this.localMasraflar = data.filter(x => x.tur != \"Navlun\");\n            this.localMasraflar = this.localMasraflar.filter(x => x.tur != \"Özel İşçilik\");\n            this.maliyetYenile();\n          });\n          this.siparisUrunLoading = false;\n        });\n      } else {\n        this.siparisService.getSiparisModel().then(data => {\n          this.siparis = data.siparis;\n          this.kullaniciListYukle();\n          this.musteriListYukle();\n          this.maliyetYenile();\n          this.siparisUrunler = data.siparisUrunler;\n          this.profData = data.siparis;\n          this.siparisUrunLoading = false;\n          this.urunModel = data.urunModel;\n        });\n      }\n    }\n  },\n  created() {\n    this.maliyet.iscilik = 0;\n    this.siparisService = new SiparisService();\n    this.musteriService = new MusteriService();\n    this.kullaniciService = new KullaniciService();\n    this.localService = new LocalService();\n    this.siparisList();\n    this.kullaniciListYukle();\n  },\n  mounted() {\n    this.emitter.on(\"navlunSatis\", data => {\n      // this.siparis.genelToplam += data.target.value\n      console.log(data);\n      this.faturaBilgileriGuncelle();\n    });\n    socket.siparis.on(\"siparis_iscilik_emit\", data => {\n      this.siparis.iscilikTutar = data.iscilikToplam;\n    });\n\n    // eventListener.$on('currencyInputIscilik', data => {\n    //     this.iscilikData = data\n    //     this.maliyetYenile()\n\n    //  })\n  }\n};","map":{"version":3,"mappings":"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","names":["SiparisBilgileri","ProformaBilgileri","Masraflar","Tedarikciler","SiparisService","MusteriService","KullaniciService","LocalService","CekiListesi","Evraklar","Chat","CurrencyInput2","socket","mapGetters","store","SiparisBolmeAlani","GidecekSipBilgileriRaporuUretim","data","iscilikData","sipData","isSipBolForm","isYeniSiparisForm","siparisFormBaslik","dialogVisible","yeniSiparis2","siparisTarihi","TahminiyuklemeTarihi","yuklemeTarihi","eta","musteri","musteriList","filterMusteriList","kullanici","kullaniciOp","kullaniciFinans","kullaniciList","OperasyonkullaniciList","FinansmankullaniciList","filterKullaniciList","filterOperasyonKullaniciList","filterFinansmanKullaniciList","siparis","siparisNo","siparisUrunler","siparisUrunLoading","disPesinat","urunModel","urunler_yeni","urunler_degisenler","urunler_silinenler","kayitDurum","maliyet","fobMasraf","uretici","navlun","komisyon","digerTutar","genelToplam","iscilik","mekus_masraf","localMasraflar","profData","isPesinat","props","dtSiparisNo","type","String","required","default","yeniSiparis","Boolean","computed","watch","kayit_kontrol_degeri","components","siparisBolmeAlani","siparisBilgileri","proformaBilgileri","masraflar","tedarikciler","cekiListesi","inputCurrency","evraklar","chat","gidecekSipBilgileri","siparisService","musteriService","kullaniciService","localService","methods","close","confirm","emitter","emit","siparisBol","pesinat","aramaMusteri","event","setTimeout","result","query","length","filter","ted","firmaAdi","toLowerCase","startsWith","aramaKullanici","kullaniciAdi","aramaOperasyonKullanici","aramaFinansmanKullanici","siparisTarihiDegisim","getDateString","TahminiyuklemeTarihiDegisim","faturaBilgileriGuncelle","malBedeli","key","satisToplam","digerTutarToplam","detayTutar_1","detayTutar_2","detayTutar_3","navlunSatis","$store","dispatch","maliyetYenile","siparisKaydet","yeniSiparisKayit","siparisGuncelleme","$toast","add","severity","summary","detail","username","getters","__getUsername","toUpperCase","username2","ad","substring","kayit_kisi","siparisDurumId","odemeTurId","siparisVeri","setSiparisKaydet","then","status","life","anaSayfaDegisiklikList","urunlerYeni","urunlerDegisenler","urunlerSilinenler","setSiparisGuncelle","siparisDurum","siparisTur","odemeTurDegisim","getUser","musteriDegisim","musteriId","id","kullaniciDegisim","siparisSahibi","now","orderNo","info","datas","JSON","parse","localStorage","getItem","getOpChangeMailSend","console","log","kullaniciOpDegisim","operasyon","kullaniciFinansmanDegisim","finansman","iscilikTutar","tutar","alisFiyati","miktar","navlunAlis","detayAlis_1","detayAlis_2","detayAlis_3","musteriListYukle","getMusteriList","find","x","kullaniciListYukle","getKullaniciList","getOperasyonKullaniciList","siparisList","getSiparis","getStringDate","d","Date","year","getFullYear","d2","year2","getMasrafListesi","tur","getSiparisModel","created","mounted","on","iscilikToplam"],"sourceRoot":"","sources":["C:\\PROJELER\\NewProjects\\gitPull\\newprojectweb\\src\\components\\siparisler\\SiparisGirisForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"columns\">\r\n    <div class=\"column is-9\">\r\n      <TabView>\r\n        <TabPanel header=\"SİPARİŞ BİLGİLERİ\">\r\n          <siparis-bilgileri\r\n            v-model:siparisUrunler=\"siparisUrunler\"\r\n            :siparisUrunLoading=\"siparisUrunLoading\"\r\n            :urunModel=\"urunModel\"\r\n            :yeniSiparis=\"yeniSiparis\"\r\n            :urunler_yeni=\"urunler_yeni\"\r\n            :urunler_degisenler=\"urunler_degisenler\"\r\n            :urunler_silinenler=\"urunler_silinenler\"\r\n            :siparisNo=\"dtSiparisNo\"\r\n            @siparisBilgileriDegisim=\"kayitDurum = $event\"\r\n            @siparisUrunDegisim=\"faturaBilgileriGuncelle\"\r\n          />\r\n        </TabPanel>\r\n        <TabPanel header=\"PROFORMA BİLGİLERİ\">\r\n          <proforma-bilgileri\r\n            :profData=\"profData\"\r\n            @proformaBilgileriDegisim=\"kayitDurum = $event\"\r\n            @odemeTur=\"odemeTurDegisim($event)\"\r\n            @navlunDigerTutarDegisim=\"faturaBilgileriGuncelle\"\r\n            :siparisNo=\"dtSiparisNo\"\r\n            :siparisUrunler=\"siparisUrunler\"\r\n          />\r\n        </TabPanel>\r\n        <TabPanel header=\"MASRAFLAR\">\r\n          <masraflar :siparisNo=\"dtSiparisNo\" :yeniSiparis=\"yeniSiparis\" />\r\n        </TabPanel>\r\n        <TabPanel header=\"TEDARİKÇİLER\">\r\n          <tedarikciler\r\n            :siparisUrunler=\"siparisUrunler\"\r\n            :siparisNo=\"dtSiparisNo\"\r\n          />\r\n        </TabPanel>\r\n        <TabPanel header=\"EVRAKLAR\">\r\n          <evraklar :siparisNo=\"dtSiparisNo\" :siparisUrunler=\"siparisUrunler\" />\r\n        </TabPanel>\r\n        <TabPanel header=\"ÇEKİ LİSTESİ\">\r\n          <ceki-listesi :siparisNo=\"dtSiparisNo\" :yeniSiparis=\"yeniSiparis\" />\r\n        </TabPanel>\r\n        <TabPanel header=\"KALAN SİPARİŞ BİLGİSİ\">\r\n          <gidecek-sip-bilgileri\r\n            :selectOrderNo=\"dtSiparisNo\"\r\n          ></gidecek-sip-bilgileri>\r\n        </TabPanel>\r\n        <!-- <TabPanel header=\" CHAT\">\r\n            <chat :siparisNo=\"dtSiparisNo\" :yeniSiparis=\"yeniSiparis\" />\r\n          </TabPanel> -->\r\n      </TabView>\r\n    </div>\r\n\r\n    <div class=\"column is-3\">\r\n      <div class=\"columns\">\r\n        <div class=\"column is-12\">\r\n          <Card>\r\n            <template #content>\r\n              <div class=\"columns\">\r\n                <div class=\"column\">\r\n                  <Button\r\n                    :disabled=\"kayitDurum\"\r\n                    @click=\"siparisKaydet\"\r\n                    label=\"KAYDET\"\r\n                    icon=\"pi pi-save\"\r\n                  />\r\n                </div>\r\n                <div class=\"column\">\r\n                  <Button\r\n                    @click=\"siparisBol\"\r\n                    label=\"Böl\"\r\n                    icon=\"pi pi-th-large\"\r\n                    class=\"p-button-info\"\r\n                  />\r\n                </div>\r\n                <div class=\"column\">\r\n                  <Button label=\"Çık\" @click=\"close\" class=\"p-button-danger\" />\r\n                </div>\r\n              </div>\r\n            </template>\r\n          </Card>\r\n          <Card>\r\n            <template #header>\r\n              <span style=\"text-decoration: underline; margin-left: 120px\">\r\n                Sipariş Bilgileri\r\n              </span>\r\n            </template>\r\n            <template #content>\r\n              <InputText\r\n                id=\"siparisNo\"\r\n                :disabled=\"!yeniSiparis\"\r\n                v-model=\"siparis.siparisNo\"\r\n                placeholder=\"Sipariş No\"\r\n                class=\"inputs\"\r\n              />\r\n              <Calendar\r\n                v-model=\"siparisTarihi\"\r\n                :disabled=\"!yeniSiparis\"\r\n                :value=\"siparis.siparisTarihi\"\r\n                :showIcon=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                @date-select=\"siparisTarihiDegisim\"\r\n                placeholder=\"Sipariş Tarihi\"\r\n                class=\"inputs\"\r\n              />\r\n              <Calendar\r\n                v-model=\"TahminiyuklemeTarihi\"\r\n                :value=\"siparis.TahminiyuklemeTarihi\"\r\n                :showIcon=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                @date-select=\"TahminiyuklemeTarihiDegisim\"\r\n                placeholder=\"Tahmini Yükleme\"\r\n                class=\"inputs\"\r\n              />\r\n\r\n              <AutoComplete\r\n                id=\"firmaAdi\"\r\n                :disabled=\"!yeniSiparis\"\r\n                v-model=\"musteri\"\r\n                :suggestions=\"filterMusteriList\"\r\n                @complete=\"aramaMusteri($event)\"\r\n                optionLabel=\"firmaAdi\"\r\n                :dropdown=\"true\"\r\n                @item-select=\"musteriDegisim\"\r\n                placeholder=\"Müşteri Adı\"\r\n                class=\"inputs\"\r\n              />\r\n            </template>\r\n          </Card>\r\n          <Card>\r\n            <template #content>\r\n              <AutoComplete\r\n                v-model=\"kullanici\"\r\n                :suggestions=\"filterKullaniciList\"\r\n                @complete=\"aramaKullanici($event)\"\r\n                optionLabel=\"kullaniciAdi\"\r\n                placeholder=\"Satışçı\"\r\n                :dropdown=\"true\"\r\n                class=\"inputs\"\r\n                @item-select=\"kullaniciDegisim\"\r\n              >\r\n                <template #items=\"slotProps\">\r\n                  <div class=\"p-clearfix p-autocomplete-brand-item\">\r\n                    <div>{{ slotProps.kullaniciAdi }}</div>\r\n                  </div>\r\n                </template>\r\n              </AutoComplete>\r\n              <AutoComplete\r\n                v-model=\"kullaniciOp\"\r\n                :suggestions=\"filterOperasyonKullaniciList\"\r\n                @complete=\"aramaOperasyonKullanici($event)\"\r\n                optionLabel=\"kullaniciAdi\"\r\n                placeholder=\"Operasyon\"\r\n                :dropdown=\"true\"\r\n                @item-select=\"kullaniciOpDegisim\"\r\n                class=\"inputs\"\r\n              />\r\n              <AutoComplete\r\n                v-model=\"kullaniciFinans\"\r\n                :suggestions=\"filterFinansmanKullaniciList\"\r\n                @complete=\"aramaFinansmanKullanici($event)\"\r\n                optionLabel=\"kullaniciAdi\"\r\n                placeholder=\"Finansman\"\r\n                :dropdown=\"true\"\r\n                @item-select=\"kullaniciFinansmanDegisim\"\r\n                class=\"inputs\"\r\n              />\r\n            </template>\r\n          </Card>\r\n          <Card>\r\n            <template #content>\r\n              <span class=\"p-float-label\">\r\n                <input-currency\r\n                  id=\"toplam\"\r\n                  :disAktif=\"true\"\r\n                  :value=\"siparis.malBedeli\"\r\n                  @input=\"siparis.malBedeli = $event\"\r\n                  class=\"inputs\"\r\n                />\r\n                <label for=\"toplam\">Toplam</label>\r\n              </span>\r\n              <br />\r\n              <span class=\"p-float-label\">\r\n                <input-currency\r\n                  id=\"navlun\"\r\n                  :disAktif=\"true\"\r\n                  @input=\"siparis.navlunSatis = $event\"\r\n                  class=\"inputs\"\r\n                />\r\n                <label for=\"navlun\">Navlun</label>\r\n              </span>\r\n              <br />\r\n\r\n              <span class=\"p-float-label\">\r\n                <input-currency\r\n                  id=\"diger\"\r\n                  :disAktif=\"true\"\r\n                  @input=\"siparis.digerTutarToplam = $event\"\r\n                  class=\"inputs\"\r\n                />\r\n                <label for=\"diger\">Diğer</label>\r\n              </span>\r\n              <br />\r\n\r\n              <span class=\"p-float-label\">\r\n                <input-currency\r\n                  id=\"genelToplam\"\r\n                  :disAktif=\"true\"\r\n                  @input=\"siparis.genelToplam = $event\"\r\n                  class=\"inputs\"\r\n                />\r\n                <label for=\"genelToplam\">Genel Toplam</label>\r\n              </span>\r\n              <br />\r\n\r\n              <span class=\"p-float-label\">\r\n                <input-currency\r\n                  id=\"pesinat\"\r\n                  :disAktif=\"disPesinat\"\r\n                  :value=\"siparis.pesinat\"\r\n                  @input=\"siparis.pesinat = $event\"\r\n                  class=\"inputs\"\r\n                />\r\n                <label for=\"pesinat\">Peşinat</label>\r\n              </span>\r\n            </template>\r\n          </Card>\r\n          <Card>\r\n            <template #header>\r\n              <span style=\"text-decoration: underline; margin-left: 120px\"\r\n                >Yükleme Detayları</span\r\n              >\r\n            </template>\r\n            <template #content>\r\n              <span class=\"p-float-label\">\r\n                <Calendar\r\n                  id=\"yuklemeTarihi\"\r\n                  v-model=\"yuklemeTarihi\"\r\n                  :showIcon=\"true\"\r\n                  dateFormat=\"dd/mm/yy\"\r\n                  class=\"inputs\"\r\n                />\r\n\r\n                <label for=\"yuklemeTarihi\">Yükleme Tarihi</label>\r\n              </span>\r\n              <br />\r\n              <span class=\"p-float-label\">\r\n                <Calendar\r\n                  id=\"etaTarihi\"\r\n                  v-model=\"eta\"\r\n                  :showIcon=\"true\"\r\n                  dateFormat=\"dd/mm/yy\"\r\n                  class=\"inputs\"\r\n                />\r\n\r\n                <label for=\"etaTarihi\">Eta Tarihi</label>\r\n              </span>\r\n              <br />\r\n\r\n              <span class=\"p-float-label\">\r\n                <InputText\r\n                  id=\"konteynırNo\"\r\n                  v-model=\"siparis.konteynerNo\"\r\n                  class=\"inputs\"\r\n                />\r\n\r\n                <label for=\"konteynırNo\">Konteynır No</label>\r\n              </span>\r\n              <br />\r\n\r\n              <span class=\"p-float-label\">\r\n                <InputText\r\n                  id=\"siparisFaturaNo\"\r\n                  v-model=\"siparis.siparisFaturaNo\"\r\n                  class=\"inputs\"\r\n                />\r\n\r\n                <label for=\"siparisFaturaNo\">Sipariş Fatura No</label>\r\n              </span>\r\n            </template>\r\n          </Card>\r\n          <Card>\r\n            <template #header>\r\n              <span style=\"text-decoration: underline; margin-left: 120px\"\r\n                >Maliyet Toplamları</span\r\n              >\r\n            </template>\r\n            <template #content>\r\n              <span class=\"p-float-label\">\r\n                <input-currency\r\n                  id=\"uretici\"\r\n                  :disAktif=\"true\"\r\n                  :value=\"uretici\"\r\n                  @input=\"maliyet.uretici = $event\"\r\n                  class=\"inputs\"\r\n                />\r\n\r\n                <label for=\"uretici\">Üretici</label>\r\n              </span>\r\n              <br />\r\n              <span class=\"p-float-label\">\r\n                <input-currency\r\n                  id=\"iscilik\"\r\n                  :disAktif=\"true\"\r\n                  :value=\"iscilik\"\r\n                  @input=\"maliyet.iscilik = $event\"\r\n                  class=\"inputs\"\r\n                />\r\n\r\n                <label for=\"iscilik\">İşçilik</label>\r\n              </span>\r\n              <br />\r\n\r\n              <span class=\"p-float-label\">\r\n                <input-currency\r\n                  id=\"navlun\"\r\n                  :disAktif=\"true\"\r\n                  :value=\"maliyet.navlun\"\r\n                  @input=\"navlun = $event\"\r\n                  class=\"inputs\"\r\n                />\r\n                <label for=\"navlun\">Navlun</label>\r\n              </span>\r\n              <br />\r\n\r\n              <span class=\"p-float-label\">\r\n                <input-currency\r\n                  id=\"digerTutarlar\"\r\n                  :disAktif=\"true\"\r\n                  :value=\"digerTutar\"\r\n                  class=\"inputs\"\r\n                />\r\n\r\n                <label for=\"digerTutarlar\">Diğer</label>\r\n              </span>\r\n              <br />\r\n\r\n              <span class=\"p-float-label\">\r\n                <input-currency\r\n                  id=\"komisyon\"\r\n                  :disAktif=\"true\"\r\n                  :value=\"komisyon\"\r\n                  @input=\"maliyet.komisyon = $event\"\r\n                  class=\"inputs\"\r\n                />\r\n\r\n                <label for=\"komisyon\">Komisyon</label>\r\n              </span>\r\n              <br />\r\n\r\n              <span class=\"p-float-label\">\r\n                <input-currency\r\n                  id=\"mekus\"\r\n                  :disAktif=\"true\"\r\n                  :value=\"mekus_masraf\"\r\n                  @input=\"maliyet.mekus_masraf = $event\"\r\n                  class=\"inputs\"\r\n                />\r\n\r\n                <label for=\"mekus\">Mekus</label>\r\n              </span>\r\n              <br />\r\n\r\n              <span class=\"p-float-label\">\r\n                <input-currency\r\n                  id=\"fobMasraf\"\r\n                  :disAktif=\"true\"\r\n                  :value=\"fobMasraf\"\r\n                  @input=\"maliyet.fobMasraf = $event\"\r\n                  class=\"inputs\"\r\n                />\r\n\r\n                <label for=\"fobMasraf\">Fob Masraf</label>\r\n              </span>\r\n              <br />\r\n\r\n              <span class=\"p-float-label\">\r\n                <input-currency\r\n                  :disAktif=\"true\"\r\n                  id=\"genelToplam\"\r\n                  :value=\"genelToplam\"\r\n                  class=\"inputs\"\r\n                />\r\n\r\n                <label for=\"genelToplam\">Genel Toplam</label>\r\n              </span>\r\n              <br />\r\n\r\n              <span class=\"p-float-label\">\r\n                <input-currency\r\n                  id=\"profit\"\r\n                  :disAktif=\"true\"\r\n                  :value=\"siparis.genelToplam - genelToplam\"\r\n                  class=\"inputs\"\r\n                />\r\n\r\n                <label for=\"profit\">Profit (USD)</label>\r\n              </span>\r\n            </template>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <Dialog\r\n    v-model:visible=\"isSipBolForm\"\r\n    :modal=\"true\"\r\n    header=\"Sipariş Bölme Form\"\r\n    position=\"top\"\r\n  >\r\n    <siparisBolmeAlani :sipBilgiler=\"sipData\" :isPesinat=\"isPesinat\">\r\n    </siparisBolmeAlani>\r\n  </Dialog>\r\n</template>\r\n\r\n<script>\r\nimport SiparisBilgileri from \"./siparisGiris/SiparisBilgileri\";\r\n// import Etiketler from './siparisGiris/Etiketler';\r\n\r\nimport ProformaBilgileri from \"@/components/siparisler/siparisGiris/ProformaBilgileri\";\r\nimport Masraflar from \"@/components/siparisler/siparisGiris/Masraflar\";\r\nimport Tedarikciler from \"@/components/siparisler/siparisGiris/Tedarikciler\";\r\nimport SiparisService from \"@/service/SiparisService\";\r\nimport MusteriService from \"@/service/MusteriService\";\r\nimport KullaniciService from \"@/service/KullaniciService\";\r\nimport LocalService from \"@/service/LocalService\";\r\nimport CekiListesi from \"@/components/siparisler/siparisGiris/CekiListesi\";\r\nimport Evraklar from \"@/components/siparisler/siparisGiris/Evraklar\";\r\nimport Chat from \"@/components/siparisler/siparisGiris/Chat\";\r\nimport CurrencyInput2 from \"@/components/shared/CurrencyInput2\";\r\nimport socket from \"@/service/SocketService\";\r\nimport { mapGetters } from \"vuex\";\r\nimport store from \"@/store\";\r\nimport SiparisBolmeAlani from \"@/components/siparisler/siparisListeler/SiparisBolmeAlani.vue\";\r\nimport GidecekSipBilgileriRaporuUretim from \"@/components/raporlar/GidecekSipBilgileriRaporuUretim.vue\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      iscilikData: 0,\r\n      sipData: null,\r\n      isSipBolForm: false,\r\n      isYeniSiparisForm: false,\r\n      siparisFormBaslik: \"\",\r\n      dialogVisible: false,\r\n      yeniSiparis2: true,\r\n      siparisTarihi: null,\r\n      TahminiyuklemeTarihi: null,\r\n      yuklemeTarihi: null,\r\n      eta: null,\r\n      musteri: null,\r\n      musteriList: null,\r\n      filterMusteriList: null,\r\n      kullanici: null,\r\n      kullaniciOp: null,\r\n      kullaniciFinans: null,\r\n      kullaniciList: null,\r\n      OperasyonkullaniciList: null,\r\n      FinansmankullaniciList: null,\r\n      filterKullaniciList: null,\r\n      filterOperasyonKullaniciList: null,\r\n      filterFinansmanKullaniciList: null,\r\n      siparis: {\r\n        siparisNo: \"\",\r\n      },\r\n      siparisUrunler: {},\r\n      siparisUrunLoading: true,\r\n      disPesinat: true,\r\n      urunModel: null,\r\n      urunler_yeni: [],\r\n      urunler_degisenler: [],\r\n      urunler_silinenler: [],\r\n      kayitDurum: true,\r\n      maliyet: {\r\n        fobMasraf: 0,\r\n        uretici: 0,\r\n        navlun: 0,\r\n        komisyon: 0,\r\n        digerTutar: 0,\r\n        genelToplam: 0,\r\n        iscilik: 0,\r\n        mekus_masraf: 0,\r\n      },\r\n      localMasraflar: null,\r\n      profData: {},\r\n      isPesinat: true,\r\n    };\r\n  },\r\n  props: {\r\n    dtSiparisNo: {\r\n      type: String,\r\n      required: false,\r\n      default: \"\",\r\n    },\r\n    yeniSiparis: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      \"kayit_kontrol_degeri\",\r\n      \"iscilik\",\r\n      \"genelToplam\",\r\n      \"uretici\",\r\n      \"fobMasraf\",\r\n      \"navlun\",\r\n      \"komisyon\",\r\n      \"digerTutar\",\r\n      \"mekus_masraf\",\r\n    ]),\r\n  },\r\n  watch: {\r\n    kayit_kontrol_degeri: function () {\r\n      this.kayitDurum = this.kayit_kontrol_degeri;\r\n    },\r\n  },\r\n  components: {\r\n    siparisBolmeAlani: SiparisBolmeAlani,\r\n    siparisBilgileri: SiparisBilgileri,\r\n    proformaBilgileri: ProformaBilgileri,\r\n    masraflar: Masraflar,\r\n    tedarikciler: Tedarikciler,\r\n    cekiListesi: CekiListesi,\r\n    inputCurrency: CurrencyInput2,\r\n    evraklar: Evraklar,\r\n    chat: Chat,\r\n    gidecekSipBilgileri: GidecekSipBilgileriRaporuUretim,\r\n    // Etiketler\r\n  },\r\n  siparisService: null,\r\n  musteriService: null,\r\n  kullaniciService: null,\r\n  localService: null,\r\n  methods: {\r\n    close() {\r\n      if (this.kayitDurum == false) {\r\n        if (confirm(\"Kaydetmeden çıkmak istediğinize emin misiniz?\")) {\r\n          this.emitter.emit(\"kaydetmeden_cikma\", false);\r\n        }\r\n      } else {\r\n        this.emitter.emit(\"kaydetmeden_cikma\", false);\r\n      }\r\n    },\r\n    siparisBol() {\r\n      this.isSipBolForm = true;\r\n      if (this.sipData.siparis.pesinat > 0) {\r\n        this.isPesinat = false;\r\n      }\r\n    },\r\n    aramaMusteri(event) {\r\n      setTimeout(() => {\r\n        let result;\r\n        if (event.query.length === 0) {\r\n          result = [...this.musteriList];\r\n        } else {\r\n          result = this.musteriList.filter((ted) => {\r\n            return ted.firmaAdi\r\n              .toLowerCase()\r\n              .startsWith(event.query.toLowerCase());\r\n          });\r\n        }\r\n\r\n        this.filterMusteriList = result;\r\n      }, 250);\r\n    },\r\n    aramaKullanici(event) {\r\n      setTimeout(() => {\r\n        let result;\r\n        if (event.query.length === 0) {\r\n          result = [...this.kullaniciList];\r\n        } else {\r\n          result = this.kullaniciList.filter((ted) => {\r\n            return ted.kullaniciAdi\r\n              .toLowerCase()\r\n              .startsWith(event.query.toLowerCase());\r\n          });\r\n        }\r\n\r\n        this.filterKullaniciList = result;\r\n      }, 250);\r\n    },\r\n    aramaOperasyonKullanici(event) {\r\n      setTimeout(() => {\r\n        let result;\r\n        if (event.query.length === 0) {\r\n          result = [...this.OperasyonkullaniciList];\r\n        } else {\r\n          result = this.OperasyonkullaniciList.filter((ted) => {\r\n            return ted.kullaniciAdi\r\n              .toLowerCase()\r\n              .startsWith(event.query.toLowerCase());\r\n          });\r\n        }\r\n\r\n        this.filterOperasyonKullaniciList = result;\r\n      }, 250);\r\n    },\r\n    aramaFinansmanKullanici(event) {\r\n      setTimeout(() => {\r\n        let result;\r\n        if (event.query.length === 0) {\r\n          result = [...this.FinansmankullaniciList];\r\n        } else {\r\n          result = this.FinansmankullaniciList.filter((ted) => {\r\n            return ted.kullaniciAdi\r\n              .toLowerCase()\r\n              .startsWith(event.query.toLowerCase());\r\n          });\r\n        }\r\n\r\n        this.filterFinansmanKullaniciList = result;\r\n      }, 250);\r\n    },\r\n    siparisTarihiDegisim() {\r\n      this.siparis.siparisTarihi = this.localService.getDateString(\r\n        this.siparisTarihi\r\n      );\r\n    },\r\n    TahminiyuklemeTarihiDegisim() {\r\n      this.siparis.TahminiyuklemeTarihi = this.localService.getDateString(\r\n        this.TahminiyuklemeTarihi\r\n      );\r\n      this.kayitDurum = false;\r\n    },\r\n    faturaBilgileriGuncelle() {\r\n      //ürün toplamı alma\r\n      this.siparis.malBedeli = 0;\r\n\r\n      for (let key in this.siparisUrunler) {\r\n        this.siparis.malBedeli += this.siparisUrunler[key].satisToplam;\r\n      }\r\n\r\n      this.siparis.digerTutarToplam =\r\n        this.siparis.detayTutar_1 +\r\n        this.siparis.detayTutar_2 +\r\n        this.siparis.detayTutar_3;\r\n\r\n      this.siparis.genelToplam =\r\n        this.siparis.malBedeli +\r\n        this.siparis.navlunSatis +\r\n        this.siparis.digerTutarToplam;\r\n      this.$store.dispatch(\"navlun_act\", this.siparis.navlunSatis);\r\n\r\n      this.maliyetYenile();\r\n    },\r\n\r\n    siparisKaydet() {\r\n      if (this.kayitDurum != true) {\r\n        this.kayitDurum = true;\r\n        store.dispatch(\"kayit_kontrol_degeri_act\", true);\r\n        if (this.yeniSiparis) this.yeniSiparisKayit();\r\n        else this.siparisGuncelleme();\r\n      } else {\r\n        this.$toast.add({\r\n          severity: \"error\",\r\n          summary: \"Uyarı Ekranı\",\r\n          detail: \"Sipariş iki kez kaydedilemez\",\r\n        });\r\n      }\r\n    },\r\n    yeniSiparisKayit() {\r\n      const username = this.$store.getters.__getUsername.toUpperCase();\r\n      const username2 = this.$store.getters.__getUsername.toLowerCase();\r\n      this.ad = username[0] + username2.substring(1);\r\n\r\n      this.siparis.kayit_kisi = this.ad;\r\n\r\n      this.siparis.siparisDurumId = 2;\r\n      if (this.siparis.odemeTurId == 1 || this.siparis.odemeTurId == 2)\r\n        this.siparis.siparisDurumId = 1;\r\n\r\n      const siparisVeri = {\r\n        siparis: this.siparis,\r\n        siparisUrunler: this.siparisUrunler,\r\n      };\r\n      this.kayitDurum = true;\r\n      this.siparisService.setSiparisKaydet(siparisVeri).then((data) => {\r\n        if (data.status == true) {\r\n          this.$toast.add({\r\n            severity: \"success\",\r\n            summary: \"Bilgi Ekranı\",\r\n            detail: \"Sipariş Kaydı Tamamlandı.\",\r\n            life: 5000,\r\n          });\r\n          this.kayitDurum = true;\r\n          socket.siparis.emit(\"siparis_yeni_event\", this.siparis.siparisNo);\r\n          this.yeniSiparis = false;\r\n          socket.siparis.emit(\r\n            \"anaSayfaDegisiklikEvent\",\r\n            data.anaSayfaDegisiklikList\r\n          );\r\n          return;\r\n        } else {\r\n          this.$toast.add({\r\n            severity: \"error\",\r\n            summary: \"Bilgi Ekranı\",\r\n            detail: \"Sipariş Kaydı Yapılamadı. Tekrar Deneyiniz\",\r\n            life: 5000,\r\n          });\r\n          this.kayitDurum = false;\r\n        }\r\n      });\r\n    },\r\n    siparisGuncelleme() {\r\n      const username = this.$store.getters.__getUsername.toUpperCase();\r\n      const username2 = this.$store.getters.__getUsername.toLowerCase();\r\n      this.ad = username[0] + username2.substring(1);\r\n      this.siparis.kayit_kisi = this.ad;\r\n\r\n      const siparisVeri = {\r\n        siparis: this.siparis,\r\n        urunlerYeni: this.urunler_yeni,\r\n        urunlerDegisenler: this.urunler_degisenler,\r\n        urunlerSilinenler: this.urunler_silinenler,\r\n      };\r\n\r\n      this.siparisService.setSiparisGuncelle(siparisVeri).then((data) => {\r\n        if (data.status == true) {\r\n          this.$toast.add({\r\n            severity: \"success\",\r\n            summary: \"Bilgi Ekranı\",\r\n            detail: \"Sipariş Değişiklikleri Yapıldı.\",\r\n            life: 5000,\r\n          });\r\n          this.urunler_yeni = [];\r\n          this.kayitDurum = true;\r\n          let siparisDurum = \"\";\r\n          if (this.siparis.siparisDurumId == 1) siparisDurum = \"bekleyen\";\r\n          if (this.siparis.siparisDurumId == 2) siparisDurum = \"üretim\";\r\n          if (this.siparis.siparisDurumId == 3) siparisDurum = \"sevk\";\r\n          socket.siparis.emit(\"siparis_guncelleme_event\", {\r\n            siparisNo: this.siparis.siparisNo,\r\n            siparisTur: siparisDurum,\r\n          });\r\n          socket.siparis.emit(\r\n            \"anaSayfaDegisiklikEvent\",\r\n            data.anaSayfaDegisiklikList\r\n          );\r\n        } else {\r\n          this.$toast.add({\r\n            severity: \"error\",\r\n            summary: \"Bilgi Ekranı\",\r\n            detail: \"Sipariş Değişiklik Kaydı Yapılamadı. Tekrar Deneyiniz\",\r\n            life: 5000,\r\n          });\r\n        }\r\n      });\r\n    },\r\n    odemeTurDegisim(event) {\r\n      const username = this.$store.getters.getUser.toLowerCase();\r\n\r\n      this.disPesinat = true;\r\n      if (event == 1) this.siparis.pesinat = this.siparis.genelToplam;\r\n      if (event == 2) {\r\n        if (username == \"huseyin\") {\r\n          this.disPesinat = false;\r\n        }\r\n      }\r\n    },\r\n    musteriDegisim() {\r\n      if (this.musteri) {\r\n        this.siparis.musteriId = this.musteri.id;\r\n      }\r\n    },\r\n\r\n    kullaniciDegisim() {\r\n      let then = this.siparis.siparisSahibi;\r\n      let now = this.kullanici.id;\r\n      let orderNo = this.siparis.siparisNo;\r\n      let info = \"Satışçı\";\r\n\r\n      const datas = {\r\n        then: then,\r\n        now: now,\r\n        orderNo: orderNo,\r\n        username: JSON.parse(localStorage.getItem(\"user\")).kullaniciAdi,\r\n        info: info,\r\n      };\r\n      if (!this.yeniSiparis) {\r\n        this.siparisService.getOpChangeMailSend(datas).then((data) => {\r\n          console.log(data);\r\n        });\r\n      }\r\n      if (this.kullanici) {\r\n        this.siparis.siparisSahibi = this.kullanici.id;\r\n        this.kayitDurum = false;\r\n      }\r\n    },\r\n    kullaniciOpDegisim() {\r\n      let then = this.siparis.operasyon;\r\n      let now = this.kullaniciOp.id;\r\n      let orderNo = this.siparis.siparisNo;\r\n      let info = \"Operasyon\";\r\n\r\n      const datas = {\r\n        then: then,\r\n        now: now,\r\n        orderNo: orderNo,\r\n        username: JSON.parse(localStorage.getItem(\"user\")).kullaniciAdi,\r\n        info: info,\r\n      };\r\n      if (!this.yeniSiparis) {\r\n        this.siparisService.getOpChangeMailSend(datas).then((data) => {\r\n          console.log(data);\r\n        });\r\n      }\r\n      if (this.kullaniciOp) {\r\n        this.siparis.operasyon = this.kullaniciOp.id;\r\n        this.kayitDurum = false;\r\n      }\r\n    },\r\n    kullaniciFinansmanDegisim() {\r\n      if (this.kullaniciFinans) {\r\n        this.siparis.finansman = this.kullaniciFinans.id;\r\n        this.kayitDurum = false;\r\n      }\r\n    },\r\n    maliyetYenile() {\r\n      this.maliyet.fobMasraf = 0;\r\n      this.maliyet.uretici = 0;\r\n      //    if (parseFloat(this.iscilikData) != 0) {\r\n\r\n      //        this.maliyet.iscilik += parseFloat(this.iscilikData)\r\n      //    } else {\r\n      //      this.maliyet.iscilik = 0\r\n      //      this.maliyet.iscilik = this.siparis.iscilikTutar;\r\n\r\n      //    }\r\n      this.maliyet.iscilik = this.siparis.iscilikTutar;\r\n\r\n      //local masraflar\r\n      for (let key in this.localMasraflar) {\r\n        this.maliyet.fobMasraf += this.localMasraflar[key].tutar;\r\n      }\r\n\r\n      //ürünler\r\n      for (let key in this.siparisUrunler) {\r\n        let data = this.siparisUrunler[key];\r\n\r\n        this.maliyet.uretici += data.alisFiyati * data.miktar;\r\n      }\r\n\r\n      this.maliyet.navlun = this.siparis.navlunAlis;\r\n      this.maliyet.komisyon = this.siparis.komisyon;\r\n      this.maliyet.digerTutar =\r\n        this.siparis.detayAlis_1 +\r\n        this.siparis.detayAlis_2 +\r\n        this.siparis.detayAlis_3;\r\n      this.maliyet.mekus_masraf = this.siparis.mekus_masraf;\r\n      //    this.maliyet.genelToplam = this.maliyet.fobMasraf + this.maliyet.uretici + this.maliyet.navlun + this.maliyet.digerTutar + this.maliyet.iscilik +this.maliyet.mekus_masraf ;\r\n      this.$store.dispatch(\"iscilik_act\", this.maliyet.iscilik);\r\n      this.$store.dispatch(\"uretici_act\", this.maliyet.uretici);\r\n      this.$store.dispatch(\"navlun_act\", this.maliyet.navlun);\r\n      this.$store.dispatch(\"komisyon_act\", this.maliyet.komisyon);\r\n      this.$store.dispatch(\"diger_tutar_act\", this.maliyet.digerTutar);\r\n      this.$store.dispatch(\"mekus_masraf_act\", this.maliyet.mekus_masraf);\r\n      this.$store.dispatch(\"genel_toplam_act\");\r\n    },\r\n    musteriListYukle() {\r\n      this.musteriService.getMusteriList().then((data) => {\r\n        this.musteriList = data;\r\n\r\n        this.musteri = data.find((x) => x.id == this.siparis.musteriId);\r\n      });\r\n    },\r\n    kullaniciListYukle() {\r\n      this.kullaniciService.getKullaniciList().then((data) => {\r\n        this.kullaniciList = data;\r\n\r\n        this.kullanici = data.find((x) => x.id == this.siparis.siparisSahibi);\r\n        this.kullaniciOp = data.find((x) => x.id == this.siparis.operasyon);\r\n      });\r\n\r\n      this.kullaniciService.getOperasyonKullaniciList().then((data) => {\r\n        this.OperasyonkullaniciList = data;\r\n\r\n        this.FinansmankullaniciList = data;\r\n        this.kullaniciFinans = data.find((x) => x.id == this.siparis.finansman);\r\n        this.kullaniciOp = data.find((x) => x.id == this.siparis.operasyon);\r\n      });\r\n    },\r\n    siparisList() {\r\n      if (!this.yeniSiparis) {\r\n        this.siparisService.getSiparis(this.dtSiparisNo).then((data) => {\r\n          this.sipData = data;\r\n          this.siparis = data.siparis;\r\n          this.kullaniciListYukle();\r\n          this.musteriListYukle();\r\n\r\n          this.siparisUrunler = data.siparisUrunler;\r\n          this.profData = data.siparis;\r\n          this.urunModel = data.urunModel;\r\n          this.siparisUrunLoading = false;\r\n\r\n          this.siparisTarihi = this.localService.getStringDate(\r\n            this.siparis.siparisTarihi\r\n          );\r\n          const d = new Date(this.siparis.TahminiyuklemeTarihi);\r\n          var year = d.getFullYear();\r\n\r\n          if (year <= \"1900\") {\r\n            this.TahminiyuklemeTarihi = null;\r\n          } else {\r\n            this.TahminiyuklemeTarihi = this.localService.getStringDate(\r\n              this.siparis.TahminiyuklemeTarihi\r\n            );\r\n          }\r\n\r\n          //\r\n          const d2 = new Date(this.siparis.eta);\r\n          var year2 = d2.getFullYear();\r\n          if (this.siparis.siparisDurumId == 3) {\r\n            this.yuklemeTarihi = this.localService.getStringDate(\r\n              this.siparis.yuklemeTarihi\r\n            );\r\n          }\r\n\r\n          if (year2 <= \"1900\") {\r\n            this.eta = null;\r\n          } else {\r\n            if (this.siparis.eta.length > 0) {\r\n              this.eta = this.localService.getStringDate(this.siparis.eta);\r\n            }\r\n          }\r\n\r\n          /*if(this.siparis.siparisDurumId == 3){\r\n              this.yuklemeTarihi = this.localService.getStringDate(this.siparis.yuklemeTarihi)\r\n          }\r\n  \r\n          if(this.siparis.eta.length > 0) {\r\n              this.eta = this.localService.getStringDate(this.siparis.eta)\r\n          }*/\r\n\r\n          this.siparisService\r\n            .getMasrafListesi(this.dtSiparisNo)\r\n            .then((data) => {\r\n              this.localMasraflar = data.filter((x) => x.tur != \"Navlun\");\r\n              this.localMasraflar = this.localMasraflar.filter(\r\n                (x) => x.tur != \"Özel İşçilik\"\r\n              );\r\n              this.maliyetYenile();\r\n            });\r\n\r\n          this.siparisUrunLoading = false;\r\n        });\r\n      } else {\r\n        this.siparisService.getSiparisModel().then((data) => {\r\n          this.siparis = data.siparis;\r\n\r\n          this.kullaniciListYukle();\r\n          this.musteriListYukle();\r\n          this.maliyetYenile();\r\n          this.siparisUrunler = data.siparisUrunler;\r\n          this.profData = data.siparis;\r\n          this.siparisUrunLoading = false;\r\n          this.urunModel = data.urunModel;\r\n        });\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.maliyet.iscilik = 0;\r\n    this.siparisService = new SiparisService();\r\n    this.musteriService = new MusteriService();\r\n    this.kullaniciService = new KullaniciService();\r\n    this.localService = new LocalService();\r\n    this.siparisList();\r\n    this.kullaniciListYukle();\r\n  },\r\n  mounted() {\r\n    this.emitter.on(\"navlunSatis\", (data) => {\r\n      // this.siparis.genelToplam += data.target.value\r\n      console.log(data);\r\n      this.faturaBilgileriGuncelle();\r\n    });\r\n    socket.siparis.on(\"siparis_iscilik_emit\", (data) => {\r\n      this.siparis.iscilikTutar = data.iscilikToplam;\r\n    });\r\n\r\n    // eventListener.$on('currencyInputIscilik', data => {\r\n    //     this.iscilikData = data\r\n    //     this.maliyetYenile()\r\n\r\n    //  })\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.p-float-label {\r\n  font-size: 8px;\r\n}\r\n.inputs {\r\n  width: 100%;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}