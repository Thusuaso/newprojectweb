{"ast":null,"code":"import service from \"@/service/OperasyonService\";\nimport CustomInputFile from \"@/components/shared/CustomInputFile\";\nimport { mapGetters } from \"vuex\";\nimport fileService from \"@/service/FileService\";\nexport default {\n  components: {\n    customFileInput: CustomInputFile\n  },\n  mounted() {\n    this.yeniKayitBaslangicIslemler();\n  },\n  data() {\n    return {\n      evrakLink: \"\",\n      files: \"\",\n      dis_download: true,\n      evrak: null,\n      id: null,\n      siparisno: null\n    };\n  },\n  localService: null,\n  computed: {\n    ...mapGetters([\"SiparisEvrakList\"])\n  },\n  created() {\n    if (this.SiparisEvrakList.Listem != null) {\n      this.evrakLink = `${this.SiparisEvrakList.Listem.Draft}`;\n      this.dis_download = false;\n    } else {\n      this.dis_download = true;\n    }\n  },\n  methods: {\n    faturaDosyaGonder(event) {\n      if (event.size > 1000000) {\n        alert(\"Evrak Boyutunu Kontrol Ediniz.\");\n      } else {\n        fileService.faturaDosyaGonder(event, this.SiparisEvrakList.ID, this.SiparisEvrakList.siparisno).then(data => {\n          console.log(\"faturaDosyaGonder \", data);\n        });\n        this.KayitIslemi();\n      }\n    },\n    KayitIslemi() {\n      this.evrak.id = this.SiparisEvrakList.ID;\n      this.evrak.siparisno = this.SiparisEvrakList.siparisno; //this.evrak verileri koydum\n      this.evrak.kullaniciAdi = this.$store.getters.__getUsername;\n      this.yeniKayit();\n    },\n    yeniKayitBaslangicIslemler() {\n      service.getEvrakFaturaModel().then(data => {\n        this.evrak = data.evrak;\n        this.id = null;\n        this.siparisno = null;\n        this.kullaniciAdi = this.$store.getters.__getUsername;\n      });\n    },\n    yeniKayit() {\n      const veri = {\n        evrak: this.evrak\n      };\n      service.setEvrakFaturaKayit(veri.evrak).then(data => {\n        if (data.status) {\n          //socket.siparis.emit('teklif_yeni_event',veri.kullaniciAdi);\n          this.evrak.id = data.id;\n          this.evrak.siparisno = data.siparisno;\n          this.evrak.kullaniciAdi = this.$store.getters.__getUsername;\n          this.evrakLink = `https://file-service.mekmar.com/file/download/${this.SiparisEvrakList.ID}/${this.SiparisEvrakList.siparisno}`;\n          this.dis_download = false;\n          alert(\"Başarılı şekilde yüklendi.\");\n          return;\n        } else {\n          alert(\"Ops! Lütfen Yeniden Deneyiniz.\");\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["service","CustomInputFile","mapGetters","fileService","components","customFileInput","mounted","yeniKayitBaslangicIslemler","data","evrakLink","files","dis_download","evrak","id","siparisno","localService","computed","created","SiparisEvrakList","Listem","Draft","methods","faturaDosyaGonder","event","size","alert","ID","then","console","log","KayitIslemi","kullaniciAdi","$store","getters","__getUsername","yeniKayit","getEvrakFaturaModel","veri","setEvrakFaturaKayit","status"],"sourceRoot":"","sources":["C:\\PROJELER\\NewProjects\\gitPull\\newprojectweb\\src\\components\\evrakgiris\\EvrakDigerForm.vue"],"sourcesContent":["<template>\r\n  <section>\r\n    <div class=\"columns\">\r\n      <div class=\"column\">\r\n        <custom-file-input\r\n          multiple\r\n          v-model=\"files\"\r\n          :state=\"Boolean(files)\"\r\n          baslik=\"Upload2\"\r\n          @sunucuDosyaYolla=\"faturaDosyaGonder($event)\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"column\">\r\n        <a :href=\"evrakLink\" target=\"_blank\">\r\n          <Button\r\n            style=\"width: 150px\"\r\n            :disabled=\"dis_download\"\r\n            iconPos=\"left\"\r\n            icon=\"fas fa-download\"\r\n            class=\"p-button-success\"\r\n            v-tooltip=\"'Aç'\"\r\n            label=\"Aç\"\r\n          />\r\n        </a>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n<script>\r\nimport service from \"@/service/OperasyonService\";\r\nimport CustomInputFile from \"@/components/shared/CustomInputFile\";\r\nimport { mapGetters } from \"vuex\";\r\nimport fileService from \"@/service/FileService\";\r\nexport default {\r\n  components: {\r\n    customFileInput: CustomInputFile,\r\n  },\r\n\r\n  mounted() {\r\n    this.yeniKayitBaslangicIslemler();\r\n  },\r\n  data() {\r\n    return {\r\n      evrakLink: \"\",\r\n      files: \"\",\r\n      dis_download: true,\r\n      evrak: null,\r\n      id: null,\r\n      siparisno: null,\r\n    };\r\n  },\r\n  localService: null,\r\n\r\n  computed: {\r\n    ...mapGetters([\"SiparisEvrakList\"]),\r\n  },\r\n  created() {\r\n    if (this.SiparisEvrakList.Listem != null) {\r\n      this.evrakLink = `${this.SiparisEvrakList.Listem.Draft}`;\r\n      this.dis_download = false;\r\n    } else {\r\n      this.dis_download = true;\r\n    }\r\n  },\r\n  methods: {\r\n    faturaDosyaGonder(event) {\r\n      if (event.size > 1000000) {\r\n        alert(\"Evrak Boyutunu Kontrol Ediniz.\");\r\n      } else {\r\n        fileService\r\n          .faturaDosyaGonder(\r\n            event,\r\n            this.SiparisEvrakList.ID,\r\n            this.SiparisEvrakList.siparisno\r\n          )\r\n          .then((data) => {\r\n            console.log(\"faturaDosyaGonder \", data);\r\n          });\r\n        this.KayitIslemi();\r\n      }\r\n    },\r\n\r\n    KayitIslemi() {\r\n      this.evrak.id = this.SiparisEvrakList.ID;\r\n      this.evrak.siparisno = this.SiparisEvrakList.siparisno; //this.evrak verileri koydum\r\n      this.evrak.kullaniciAdi = this.$store.getters.__getUsername;\r\n\r\n      this.yeniKayit();\r\n    },\r\n    yeniKayitBaslangicIslemler() {\r\n      service.getEvrakFaturaModel().then((data) => {\r\n        this.evrak = data.evrak;\r\n        this.id = null;\r\n        this.siparisno = null;\r\n        this.kullaniciAdi = this.$store.getters.__getUsername;\r\n      });\r\n    },\r\n    yeniKayit() {\r\n      const veri = {\r\n        evrak: this.evrak,\r\n      };\r\n      service.setEvrakFaturaKayit(veri.evrak).then((data) => {\r\n        if (data.status) {\r\n          //socket.siparis.emit('teklif_yeni_event',veri.kullaniciAdi);\r\n          this.evrak.id = data.id;\r\n          this.evrak.siparisno = data.siparisno;\r\n          this.evrak.kullaniciAdi = this.$store.getters.__getUsername;\r\n          this.evrakLink = `https://file-service.mekmar.com/file/download/${this.SiparisEvrakList.ID}/${this.SiparisEvrakList.siparisno}`;\r\n          this.dis_download = false;\r\n          alert(\"Başarılı şekilde yüklendi.\");\r\n          return;\r\n        } else {\r\n          alert(\"Ops! Lütfen Yeniden Deneyiniz.\");\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.card {\r\n  font-size: 20px;\r\n}\r\n.columns {\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  margin-top: 195px;\r\n  width: 70%;\r\n}\r\n\r\n/* Clear floats after the columns */\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}