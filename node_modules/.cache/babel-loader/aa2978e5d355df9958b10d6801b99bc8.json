{"ast":null,"code":"import TedarikciService from \"@/service/TedarikciService\";\nimport CurrencyInput from \"@/components/shared/CurrencyInput\";\nimport SiparisService from \"@/service/SiparisService\";\nimport LocalService from \"@/service/LocalService\";\nimport socket from \"@/service/SocketService\";\nexport default {\n  components: {\n    inputCurrency: CurrencyInput\n  },\n  data() {\n    return {\n      tarih: null,\n      gider: null,\n      giderList: null,\n      filterGiderList: null,\n      tedarikci: null,\n      tedarikciList: null,\n      filterTedarikciList: null,\n      giderListesi: null,\n      selectGider: null,\n      giderToplam: 0,\n      dis_yeni: false,\n      dis_iptal: true,\n      dis_kaydet: true,\n      dis_sil: true,\n      dis_form: true,\n      dataGiderModel: null,\n      giderModel: null\n    };\n  },\n  props: [\"siparisNo\", \"urunKartId\"],\n  methods: {\n    formatDecimal(value) {\n      let val = (value / 1).toFixed(2).replace(\".\", \",\");\n      return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n    },\n    aramaGider(event) {\n      setTimeout(() => {\n        let result;\n        if (event.query.length === 0) result = [...this.giderList];else {\n          result = this.giderList.filter(x => {\n            return x.giderTur.toLowerCase().startsWith(event.query.toLowerCase());\n          });\n        }\n        this.filterGiderList = result;\n      }, 250);\n    },\n    aramaTedarikci(event) {\n      setTimeout(() => {\n        let result;\n        if (event.query.length === 0) result = [...this.tedarikciList];else {\n          result = this.tedarikciList.filter(x => {\n            return x.firmaAdi.toLowerCase().startsWith(event.query.toLowerCase());\n          });\n        }\n        this.filterTedarikciList = result;\n      }, 250);\n    },\n    btn_reset() {\n      this.dis_yeni = false;\n      this.dis_iptal = true;\n      this.dis_kaydet = true;\n      this.dis_sil = true;\n      this.dis_form = true;\n      this.giderModel = {\n        ...this.dataGiderModel\n      };\n    },\n    btn_yeni_click() {\n      this.dis_yeni = true;\n      this.dis_kaydet = false;\n      this.dis_iptal = false;\n      this.dis_form = false;\n      this.dis_sil = true;\n      this.giderModel = {\n        ...this.dataGiderModel\n      };\n    },\n    btn_iptal_click() {\n      this.btn_reset();\n    },\n    btn_kaydet_click() {\n      this.$store.dispatch(\"iscilik_add_act\", this.giderModel.tutar);\n      if (this.giderModel.id == null) {\n        this.giderModel.siparisNo = this.siparisNo;\n        this.giderModel.urunKartId = this.urunKartId;\n        //data verisi geliyor true false\n        this.siparisService.setIscilikKaydet(this.giderModel).then(() => {\n          this.giderListYukle();\n          this.btn_reset();\n        });\n      } else {\n        this.siparisService.setIscilikGuncelle(this.giderModel).then(() => {\n          this.giderListYukle();\n          this.btn_reset();\n        });\n      }\n    },\n    btn_sil_click() {\n      this.$store.dispatch(\"iscilik_delete_act\", this.giderModel.tutar);\n      this.siparisService.setIscilikSil(this.giderModel).then(() => {\n        this.giderListYukle();\n        this.btn_reset();\n      });\n    },\n    giderListYukle() {\n      this.giderToplam = 0;\n      this.siparisService.getIscilikList(this.siparisNo, this.urunKartId).then(data => {\n        this.giderListesi = data;\n        for (let key in this.giderListesi) {\n          this.giderToplam += this.giderListesi[key].tutar;\n        }\n        socket.siparis.emit(\"siparis_iscilik_event\", {\n          iscilikToplam: this.giderToplam\n        });\n      });\n    },\n    giderSecim(event) {\n      this.giderModel = {\n        ...event.data\n      };\n      this.tarih = this.localService.getStringDate(this.giderModel.tarih);\n      this.dis_yeni = true;\n      this.dis_iptal = false;\n      this.dis_kaydet = false;\n      this.dis_sil = false;\n      this.dis_form = false;\n    },\n    tarihDegisim() {\n      this.giderModel.tarih = this.localService.getDateString(this.tarih);\n    },\n    giderTurDegisim() {\n      this.giderModel.siparisEkstraGiderTurId = this.gider.id;\n    },\n    tedarikciDegisim() {\n      this.giderModel.tedarikciId = this.tedarikci.id;\n    }\n  },\n  tedarikciService: null,\n  siparisService: null,\n  localService: null,\n  created() {\n    this.tedarikciService = new TedarikciService();\n    this.siparisService = new SiparisService();\n    this.localService = new LocalService();\n  },\n  mounted() {\n    this.siparisService.getGiderModel().then(data => {\n      this.dataGiderModel = data;\n      this.giderModel = {\n        ...this.dataGiderModel\n      };\n    });\n    this.tedarikciService.getTedarikciMenuList().then(data => {\n      this.tedarikciList = data;\n    });\n    this.giderListYukle();\n    this.siparisService.getGiderList().then(data => this.giderList = data);\n  }\n};","map":{"version":3,"mappings":"AA2JA,OAAOA,gBAAe,MAAO,4BAA4B;AACzD,OAAOC,aAAY,MAAO,mCAAmC;AAC7D,OAAOC,cAAa,MAAO,0BAA0B;AACrD,OAAOC,YAAW,MAAO,wBAAwB;AACjD,OAAOC,MAAK,MAAO,yBAAyB;AAC5C,eAAe;EACbC,UAAU,EAAE;IACVC,aAAa,EAAEL;EACjB,CAAC;EACDM,IAAI,GAAG;IACL,OAAO;MACLC,KAAK,EAAE,IAAI;MACXC,KAAK,EAAE,IAAI;MACXC,SAAS,EAAE,IAAI;MACfC,eAAe,EAAE,IAAI;MACrBC,SAAS,EAAE,IAAI;MACfC,aAAa,EAAE,IAAI;MACnBC,mBAAmB,EAAE,IAAI;MACzBC,YAAY,EAAE,IAAI;MAClBC,WAAW,EAAE,IAAI;MACjBC,WAAW,EAAE,CAAC;MACdC,QAAQ,EAAE,KAAK;MACfC,SAAS,EAAE,IAAI;MACfC,UAAU,EAAE,IAAI;MAChBC,OAAO,EAAE,IAAI;MACbC,QAAQ,EAAE,IAAI;MACdC,cAAc,EAAE,IAAI;MACpBC,UAAU,EAAE;IACd,CAAC;EACH,CAAC;EACDC,KAAK,EAAE,CAAC,WAAW,EAAE,YAAY,CAAC;EAClCC,OAAO,EAAE;IACPC,aAAa,CAACC,KAAK,EAAE;MACnB,IAAIC,GAAE,GAAI,CAACD,KAAI,GAAI,CAAC,EAAEE,OAAO,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC;MAClD,OAAOF,GAAG,CAACG,QAAQ,EAAE,CAACD,OAAO,CAAC,uBAAuB,EAAE,GAAG,CAAC;IAC7D,CAAC;IACDE,UAAU,CAACC,KAAK,EAAE;MAChBC,UAAU,CAAC,MAAM;QACf,IAAIC,MAAM;QAEV,IAAIF,KAAK,CAACG,KAAK,CAACC,MAAK,KAAM,CAAC,EAAEF,MAAK,GAAI,CAAC,GAAG,IAAI,CAAC1B,SAAS,CAAC,MACrD;UACH0B,MAAK,GAAI,IAAI,CAAC1B,SAAS,CAAC6B,MAAM,CAAEC,CAAC,IAAK;YACpC,OAAOA,CAAC,CAACC,QAAO,CACbC,WAAW,EAAC,CACZC,UAAU,CAACT,KAAK,CAACG,KAAK,CAACK,WAAW,EAAE,CAAC;UAC1C,CAAC,CAAC;QACJ;QAEA,IAAI,CAAC/B,eAAc,GAAIyB,MAAM;MAC/B,CAAC,EAAE,GAAG,CAAC;IACT,CAAC;IACDQ,cAAc,CAACV,KAAK,EAAE;MACpBC,UAAU,CAAC,MAAM;QACf,IAAIC,MAAM;QAEV,IAAIF,KAAK,CAACG,KAAK,CAACC,MAAK,KAAM,CAAC,EAAEF,MAAK,GAAI,CAAC,GAAG,IAAI,CAACvB,aAAa,CAAC,MACzD;UACHuB,MAAK,GAAI,IAAI,CAACvB,aAAa,CAAC0B,MAAM,CAAEC,CAAC,IAAK;YACxC,OAAOA,CAAC,CAACK,QAAO,CACbH,WAAW,EAAC,CACZC,UAAU,CAACT,KAAK,CAACG,KAAK,CAACK,WAAW,EAAE,CAAC;UAC1C,CAAC,CAAC;QACJ;QAEA,IAAI,CAAC5B,mBAAkB,GAAIsB,MAAM;MACnC,CAAC,EAAE,GAAG,CAAC;IACT,CAAC;IACDU,SAAS,GAAG;MACV,IAAI,CAAC5B,QAAO,GAAI,KAAK;MACrB,IAAI,CAACC,SAAQ,GAAI,IAAI;MACrB,IAAI,CAACC,UAAS,GAAI,IAAI;MACtB,IAAI,CAACC,OAAM,GAAI,IAAI;MACnB,IAAI,CAACC,QAAO,GAAI,IAAI;MACpB,IAAI,CAACE,UAAS,GAAI;QAAE,GAAG,IAAI,CAACD;MAAe,CAAC;IAC9C,CAAC;IACDwB,cAAc,GAAG;MACf,IAAI,CAAC7B,QAAO,GAAI,IAAI;MACpB,IAAI,CAACE,UAAS,GAAI,KAAK;MACvB,IAAI,CAACD,SAAQ,GAAI,KAAK;MACtB,IAAI,CAACG,QAAO,GAAI,KAAK;MACrB,IAAI,CAACD,OAAM,GAAI,IAAI;MAEnB,IAAI,CAACG,UAAS,GAAI;QAAE,GAAG,IAAI,CAACD;MAAe,CAAC;IAC9C,CAAC;IACDyB,eAAe,GAAG;MAChB,IAAI,CAACF,SAAS,EAAE;IAClB,CAAC;IACDG,gBAAgB,GAAG;MACjB,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAC,iBAAiB,EAAE,IAAI,CAAC3B,UAAU,CAAC4B,KAAK,CAAC;MAC9D,IAAI,IAAI,CAAC5B,UAAU,CAAC6B,EAAC,IAAK,IAAI,EAAE;QAC9B,IAAI,CAAC7B,UAAU,CAAC8B,SAAQ,GAAI,IAAI,CAACA,SAAS;QAC1C,IAAI,CAAC9B,UAAU,CAAC+B,UAAS,GAAI,IAAI,CAACA,UAAU;QAC5C;QACA,IAAI,CAACC,cAAc,CAACC,gBAAgB,CAAC,IAAI,CAACjC,UAAU,CAAC,CAACkC,IAAI,CAAC,MAAM;UAC/D,IAAI,CAACC,cAAc,EAAE;UACrB,IAAI,CAACb,SAAS,EAAE;QAClB,CAAC,CAAC;MACJ,OAAO;QACL,IAAI,CAACU,cAAc,CAACI,kBAAkB,CAAC,IAAI,CAACpC,UAAU,CAAC,CAACkC,IAAI,CAAC,MAAM;UACjE,IAAI,CAACC,cAAc,EAAE;UACrB,IAAI,CAACb,SAAS,EAAE;QAClB,CAAC,CAAC;MACJ;IACF,CAAC;IACDe,aAAa,GAAG;MACd,IAAI,CAACX,MAAM,CAACC,QAAQ,CAAC,oBAAoB,EAAE,IAAI,CAAC3B,UAAU,CAAC4B,KAAK,CAAC;MACjE,IAAI,CAACI,cAAc,CAACM,aAAa,CAAC,IAAI,CAACtC,UAAU,CAAC,CAACkC,IAAI,CAAC,MAAM;QAC5D,IAAI,CAACC,cAAc,EAAE;QACrB,IAAI,CAACb,SAAS,EAAE;MAClB,CAAC,CAAC;IACJ,CAAC;IACDa,cAAc,GAAG;MACf,IAAI,CAAC1C,WAAU,GAAI,CAAC;MACpB,IAAI,CAACuC,cAAa,CACfO,cAAc,CAAC,IAAI,CAACT,SAAS,EAAE,IAAI,CAACC,UAAU,EAC9CG,IAAI,CAAEnD,IAAI,IAAK;QACd,IAAI,CAACQ,YAAW,GAAIR,IAAI;QAExB,KAAK,IAAIyD,GAAE,IAAK,IAAI,CAACjD,YAAY,EAAE;UACjC,IAAI,CAACE,WAAU,IAAK,IAAI,CAACF,YAAY,CAACiD,GAAG,CAAC,CAACZ,KAAK;QAClD;QAEAhD,MAAM,CAAC6D,OAAO,CAACC,IAAI,CAAC,uBAAuB,EAAE;UAC3CC,aAAa,EAAE,IAAI,CAAClD;QACtB,CAAC,CAAC;MACJ,CAAC,CAAC;IACN,CAAC;IACDmD,UAAU,CAAClC,KAAK,EAAE;MAChB,IAAI,CAACV,UAAS,GAAI;QAAE,GAAGU,KAAK,CAAC3B;MAAK,CAAC;MAEnC,IAAI,CAACC,KAAI,GAAI,IAAI,CAAC6D,YAAY,CAACC,aAAa,CAAC,IAAI,CAAC9C,UAAU,CAAChB,KAAK,CAAC;MAEnE,IAAI,CAACU,QAAO,GAAI,IAAI;MACpB,IAAI,CAACC,SAAQ,GAAI,KAAK;MACtB,IAAI,CAACC,UAAS,GAAI,KAAK;MACvB,IAAI,CAACC,OAAM,GAAI,KAAK;MACpB,IAAI,CAACC,QAAO,GAAI,KAAK;IACvB,CAAC;IACDiD,YAAY,GAAG;MACb,IAAI,CAAC/C,UAAU,CAAChB,KAAI,GAAI,IAAI,CAAC6D,YAAY,CAACG,aAAa,CAAC,IAAI,CAAChE,KAAK,CAAC;IACrE,CAAC;IACDiE,eAAe,GAAG;MAChB,IAAI,CAACjD,UAAU,CAACkD,uBAAsB,GAAI,IAAI,CAACjE,KAAK,CAAC4C,EAAE;IACzD,CAAC;IACDsB,gBAAgB,GAAG;MACjB,IAAI,CAACnD,UAAU,CAACoD,WAAU,GAAI,IAAI,CAAChE,SAAS,CAACyC,EAAE;IACjD;EACF,CAAC;EACDwB,gBAAgB,EAAE,IAAI;EACtBrB,cAAc,EAAE,IAAI;EACpBa,YAAY,EAAE,IAAI;EAElBS,OAAO,GAAG;IACR,IAAI,CAACD,gBAAe,GAAI,IAAI7E,gBAAgB,EAAE;IAC9C,IAAI,CAACwD,cAAa,GAAI,IAAItD,cAAc,EAAE;IAC1C,IAAI,CAACmE,YAAW,GAAI,IAAIlE,YAAY,EAAE;EACxC,CAAC;EACD4E,OAAO,GAAG;IACR,IAAI,CAACvB,cAAc,CAACwB,aAAa,EAAE,CAACtB,IAAI,CAAEnD,IAAI,IAAK;MACjD,IAAI,CAACgB,cAAa,GAAIhB,IAAI;MAC1B,IAAI,CAACiB,UAAS,GAAI;QAAE,GAAG,IAAI,CAACD;MAAe,CAAC;IAC9C,CAAC,CAAC;IACF,IAAI,CAACsD,gBAAgB,CAACI,oBAAoB,EAAE,CAACvB,IAAI,CAAEnD,IAAI,IAAK;MAC1D,IAAI,CAACM,aAAY,GAAIN,IAAI;IAC3B,CAAC,CAAC;IAEF,IAAI,CAACoD,cAAc,EAAE;IAErB,IAAI,CAACH,cAAc,CAAC0B,YAAY,EAAE,CAACxB,IAAI,CAAEnD,IAAI,IAAM,IAAI,CAACG,SAAQ,GAAIH,IAAK,CAAC;EAC5E;AACF,CAAC","names":["TedarikciService","CurrencyInput","SiparisService","LocalService","socket","components","inputCurrency","data","tarih","gider","giderList","filterGiderList","tedarikci","tedarikciList","filterTedarikciList","giderListesi","selectGider","giderToplam","dis_yeni","dis_iptal","dis_kaydet","dis_sil","dis_form","dataGiderModel","giderModel","props","methods","formatDecimal","value","val","toFixed","replace","toString","aramaGider","event","setTimeout","result","query","length","filter","x","giderTur","toLowerCase","startsWith","aramaTedarikci","firmaAdi","btn_reset","btn_yeni_click","btn_iptal_click","btn_kaydet_click","$store","dispatch","tutar","id","siparisNo","urunKartId","siparisService","setIscilikKaydet","then","giderListYukle","setIscilikGuncelle","btn_sil_click","setIscilikSil","getIscilikList","key","siparis","emit","iscilikToplam","giderSecim","localService","getStringDate","tarihDegisim","getDateString","giderTurDegisim","siparisEkstraGiderTurId","tedarikciDegisim","tedarikciId","tedarikciService","created","mounted","getGiderModel","getTedarikciMenuList","getGiderList"],"sourceRoot":"","sources":["C:\\PROJELER\\NewProjects\\gitPull\\newprojectweb\\src\\components\\siparisler\\siparisGiris\\Iscilik.vue"],"sourcesContent":["<template>\r\n  <div class=\"fluid\">\r\n    <div class=\"p-grid\">\r\n      <div class=\"p-col-12 p-md-4\">\r\n        <div class=\"p-col-12 p-md-12\">\r\n          <Calendar\r\n            :disabled=\"dis_form\"\r\n            v-model=\"tarih\"\r\n            :showIcon=\"true\"\r\n            dateFormat=\"dd/mm/yy\"\r\n            @date-select=\"tarihDegisim\"\r\n          />\r\n        </div>\r\n        <div class=\"p-col-12 p-md-12\">\r\n          <AutoComplete\r\n            :disabled=\"dis_form\"\r\n            v-model=\"gider\"\r\n            :suggestions=\"filterGiderList\"\r\n            field=\"giderTur\"\r\n            :dropdown=\"true\"\r\n            placeholder=\"Gider Seç\"\r\n            @complete=\"aramaGider\"\r\n            @item-select=\"giderTurDegisim\"\r\n          >\r\n            <template #items=\"slotProps\">\r\n              <div class=\"p-clearfix p-autocomplete-brand-item\">\r\n                <div>{{ slotProps.giderTur }}</div>\r\n              </div>\r\n            </template>\r\n          </AutoComplete>\r\n        </div>\r\n        <div class=\"p-col-12 p-md-12\">\r\n          <AutoComplete\r\n            :disabled=\"dis_form\"\r\n            v-model=\"tedarikci\"\r\n            :suggestions=\"filterTedarikciList\"\r\n            field=\"firmaAdi\"\r\n            :dropdown=\"true\"\r\n            placeholder=\"Tedarikçi Seç\"\r\n            @complete=\"aramaTedarikci\"\r\n            @item-select=\"tedarikciDegisim\"\r\n          >\r\n            <template #items=\"slotProps\">\r\n              <div class=\"p-clearfix p-autocomplete-brand-item\">\r\n                <div>{{ slotProps.firmaAdi }}</div>\r\n              </div>\r\n            </template>\r\n          </AutoComplete>\r\n        </div>\r\n      </div>\r\n      <div class=\"p-col-12 p-md-8\">\r\n        <Textarea\r\n          :autoResize=\"true\"\r\n          rows=\"5\"\r\n          cols=\"30\"\r\n          :disabled=\"dis_form\"\r\n          v-model=\"giderModel.aciklama\"\r\n        />\r\n        <div class=\"p-col-4 p-offset-8\">\r\n          <input-currency\r\n            :value=\"giderModel.tutar\"\r\n            :disAktif=\"dis_form\"\r\n            @input=\"giderModel.tutar = $event\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"p-grid p-offset-2\">\r\n      <div class=\"p-col-2\">\r\n        <Button\r\n          label=\"Yeni\"\r\n          class=\"p-button-rounded\"\r\n          icon=\"pi pi-file-o\"\r\n          iconPos=\"left\"\r\n          :disabled=\"dis_yeni\"\r\n          @click=\"btn_yeni_click\"\r\n        />\r\n      </div>\r\n      <div class=\"p-col-2\">\r\n        <Button\r\n          label=\"İptal\"\r\n          class=\"p-button-rounded p-button-danger\"\r\n          icon=\"pi pi-times\"\r\n          iconPos=\"left\"\r\n          :disabled=\"dis_iptal\"\r\n          @click=\"btn_iptal_click\"\r\n        />\r\n      </div>\r\n      <div class=\"p-col-2\">\r\n        <Button\r\n          label=\"Kaydet\"\r\n          class=\"p-button-rounded p-button-success\"\r\n          icon=\"pi pi-plus\"\r\n          iconPos=\"left\"\r\n          :disabled=\"dis_kaydet\"\r\n          @click=\"btn_kaydet_click\"\r\n        />\r\n      </div>\r\n      <div class=\"p-col-2\">\r\n        <Button\r\n          label=\"Sil\"\r\n          class=\"p-button-rounded\"\r\n          style=\"background-color: yellow; color: black\"\r\n          icon=\"pi pi-times-circle\"\r\n          iconPos=\"left\"\r\n          :disabled=\"dis_sil\"\r\n          @click=\"btn_sil_click\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"p-grid\">\r\n      <div class=\"p-col-12 p-md-12\">\r\n        <DataTable\r\n          :value=\"giderListesi\"\r\n          class=\"p-datatable-responsive\"\r\n          :selection=\"selectGider\"\r\n          selectionMode=\"single\"\r\n          :paginator=\"false\"\r\n          @row-select=\"giderSecim\"\r\n          dataKey=\"id\"\r\n        >\r\n          <Column field=\"tarih\" header=\"Tarih\" bodyStyle=\"text-align:center;\">\r\n            <template #body=\"slotProps\">\r\n              {{ slotProps.data.tarih }}\r\n            </template>\r\n          </Column>\r\n          <Column\r\n            field=\"tedarikciAdi\"\r\n            header=\"Tedarikci\"\r\n            bodyStyle=\"text-align:center;\"\r\n          >\r\n            <template #body=\"slotProps\">\r\n              {{ slotProps.data.tedarikciAdi }}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"aciklama\" header=\"Açıklama\">\r\n            <template #body=\"slotProps\">\r\n              {{ slotProps.data.aciklama }}\r\n            </template>\r\n          </Column>\r\n          <Column field=\"tutar\" header=\"Tutar\" bodyStyle=\"text-align:center;\">\r\n            <template #body=\"slotProps\">\r\n              {{ formatDecimal(slotProps.data.tutar) }}\r\n            </template>\r\n            <template #footer>\r\n              {{ formatDecimal(giderToplam) }}\r\n            </template>\r\n          </Column>\r\n        </DataTable>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport TedarikciService from \"@/service/TedarikciService\";\r\nimport CurrencyInput from \"@/components/shared/CurrencyInput\";\r\nimport SiparisService from \"@/service/SiparisService\";\r\nimport LocalService from \"@/service/LocalService\";\r\nimport socket from \"@/service/SocketService\";\r\nexport default {\r\n  components: {\r\n    inputCurrency: CurrencyInput,\r\n  },\r\n  data() {\r\n    return {\r\n      tarih: null,\r\n      gider: null,\r\n      giderList: null,\r\n      filterGiderList: null,\r\n      tedarikci: null,\r\n      tedarikciList: null,\r\n      filterTedarikciList: null,\r\n      giderListesi: null,\r\n      selectGider: null,\r\n      giderToplam: 0,\r\n      dis_yeni: false,\r\n      dis_iptal: true,\r\n      dis_kaydet: true,\r\n      dis_sil: true,\r\n      dis_form: true,\r\n      dataGiderModel: null,\r\n      giderModel: null,\r\n    };\r\n  },\r\n  props: [\"siparisNo\", \"urunKartId\"],\r\n  methods: {\r\n    formatDecimal(value) {\r\n      let val = (value / 1).toFixed(2).replace(\".\", \",\");\r\n      return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\r\n    },\r\n    aramaGider(event) {\r\n      setTimeout(() => {\r\n        let result;\r\n\r\n        if (event.query.length === 0) result = [...this.giderList];\r\n        else {\r\n          result = this.giderList.filter((x) => {\r\n            return x.giderTur\r\n              .toLowerCase()\r\n              .startsWith(event.query.toLowerCase());\r\n          });\r\n        }\r\n\r\n        this.filterGiderList = result;\r\n      }, 250);\r\n    },\r\n    aramaTedarikci(event) {\r\n      setTimeout(() => {\r\n        let result;\r\n\r\n        if (event.query.length === 0) result = [...this.tedarikciList];\r\n        else {\r\n          result = this.tedarikciList.filter((x) => {\r\n            return x.firmaAdi\r\n              .toLowerCase()\r\n              .startsWith(event.query.toLowerCase());\r\n          });\r\n        }\r\n\r\n        this.filterTedarikciList = result;\r\n      }, 250);\r\n    },\r\n    btn_reset() {\r\n      this.dis_yeni = false;\r\n      this.dis_iptal = true;\r\n      this.dis_kaydet = true;\r\n      this.dis_sil = true;\r\n      this.dis_form = true;\r\n      this.giderModel = { ...this.dataGiderModel };\r\n    },\r\n    btn_yeni_click() {\r\n      this.dis_yeni = true;\r\n      this.dis_kaydet = false;\r\n      this.dis_iptal = false;\r\n      this.dis_form = false;\r\n      this.dis_sil = true;\r\n\r\n      this.giderModel = { ...this.dataGiderModel };\r\n    },\r\n    btn_iptal_click() {\r\n      this.btn_reset();\r\n    },\r\n    btn_kaydet_click() {\r\n      this.$store.dispatch(\"iscilik_add_act\", this.giderModel.tutar);\r\n      if (this.giderModel.id == null) {\r\n        this.giderModel.siparisNo = this.siparisNo;\r\n        this.giderModel.urunKartId = this.urunKartId;\r\n        //data verisi geliyor true false\r\n        this.siparisService.setIscilikKaydet(this.giderModel).then(() => {\r\n          this.giderListYukle();\r\n          this.btn_reset();\r\n        });\r\n      } else {\r\n        this.siparisService.setIscilikGuncelle(this.giderModel).then(() => {\r\n          this.giderListYukle();\r\n          this.btn_reset();\r\n        });\r\n      }\r\n    },\r\n    btn_sil_click() {\r\n      this.$store.dispatch(\"iscilik_delete_act\", this.giderModel.tutar);\r\n      this.siparisService.setIscilikSil(this.giderModel).then(() => {\r\n        this.giderListYukle();\r\n        this.btn_reset();\r\n      });\r\n    },\r\n    giderListYukle() {\r\n      this.giderToplam = 0;\r\n      this.siparisService\r\n        .getIscilikList(this.siparisNo, this.urunKartId)\r\n        .then((data) => {\r\n          this.giderListesi = data;\r\n\r\n          for (let key in this.giderListesi) {\r\n            this.giderToplam += this.giderListesi[key].tutar;\r\n          }\r\n\r\n          socket.siparis.emit(\"siparis_iscilik_event\", {\r\n            iscilikToplam: this.giderToplam,\r\n          });\r\n        });\r\n    },\r\n    giderSecim(event) {\r\n      this.giderModel = { ...event.data };\r\n\r\n      this.tarih = this.localService.getStringDate(this.giderModel.tarih);\r\n\r\n      this.dis_yeni = true;\r\n      this.dis_iptal = false;\r\n      this.dis_kaydet = false;\r\n      this.dis_sil = false;\r\n      this.dis_form = false;\r\n    },\r\n    tarihDegisim() {\r\n      this.giderModel.tarih = this.localService.getDateString(this.tarih);\r\n    },\r\n    giderTurDegisim() {\r\n      this.giderModel.siparisEkstraGiderTurId = this.gider.id;\r\n    },\r\n    tedarikciDegisim() {\r\n      this.giderModel.tedarikciId = this.tedarikci.id;\r\n    },\r\n  },\r\n  tedarikciService: null,\r\n  siparisService: null,\r\n  localService: null,\r\n\r\n  created() {\r\n    this.tedarikciService = new TedarikciService();\r\n    this.siparisService = new SiparisService();\r\n    this.localService = new LocalService();\r\n  },\r\n  mounted() {\r\n    this.siparisService.getGiderModel().then((data) => {\r\n      this.dataGiderModel = data;\r\n      this.giderModel = { ...this.dataGiderModel };\r\n    });\r\n    this.tedarikciService.getTedarikciMenuList().then((data) => {\r\n      this.tedarikciList = data;\r\n    });\r\n\r\n    this.giderListYukle();\r\n\r\n    this.siparisService.getGiderList().then((data) => (this.giderList = data));\r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}