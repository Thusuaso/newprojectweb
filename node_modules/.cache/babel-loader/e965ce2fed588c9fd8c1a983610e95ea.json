{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");\nvar AWS = require('./core');\nvar SequentialExecutor = require('./sequential_executor');\nvar DISCOVER_ENDPOINT = require('./discover_endpoint').discoverEndpoint;\n/**\r\n * The namespace used to register global event listeners for request building\r\n * and sending.\r\n */\nAWS.EventListeners = {\n  /**\r\n   * @!attribute VALIDATE_CREDENTIALS\r\n   *   A request listener that validates whether the request is being\r\n   *   sent with credentials.\r\n   *   Handles the {AWS.Request~validate 'validate' Request event}\r\n   *   @example Sending a request without validating credentials\r\n   *     var listener = AWS.EventListeners.Core.VALIDATE_CREDENTIALS;\r\n   *     request.removeListener('validate', listener);\r\n   *   @readonly\r\n   *   @return [Function]\r\n   * @!attribute VALIDATE_REGION\r\n   *   A request listener that validates whether the region is set\r\n   *   for a request.\r\n   *   Handles the {AWS.Request~validate 'validate' Request event}\r\n   *   @example Sending a request without validating region configuration\r\n   *     var listener = AWS.EventListeners.Core.VALIDATE_REGION;\r\n   *     request.removeListener('validate', listener);\r\n   *   @readonly\r\n   *   @return [Function]\r\n   * @!attribute VALIDATE_PARAMETERS\r\n   *   A request listener that validates input parameters in a request.\r\n   *   Handles the {AWS.Request~validate 'validate' Request event}\r\n   *   @example Sending a request without validating parameters\r\n   *     var listener = AWS.EventListeners.Core.VALIDATE_PARAMETERS;\r\n   *     request.removeListener('validate', listener);\r\n   *   @example Disable parameter validation globally\r\n   *     AWS.EventListeners.Core.removeListener('validate',\r\n   *       AWS.EventListeners.Core.VALIDATE_REGION);\r\n   *   @readonly\r\n   *   @return [Function]\r\n   * @!attribute SEND\r\n   *   A request listener that initiates the HTTP connection for a\r\n   *   request being sent. Handles the {AWS.Request~send 'send' Request event}\r\n   *   @example Replacing the HTTP handler\r\n   *     var listener = AWS.EventListeners.Core.SEND;\r\n   *     request.removeListener('send', listener);\r\n   *     request.on('send', function(response) {\r\n   *       customHandler.send(response);\r\n   *     });\r\n   *   @return [Function]\r\n   *   @readonly\r\n   * @!attribute HTTP_DATA\r\n   *   A request listener that reads data from the HTTP connection in order\r\n   *   to build the response data.\r\n   *   Handles the {AWS.Request~httpData 'httpData' Request event}.\r\n   *   Remove this handler if you are overriding the 'httpData' event and\r\n   *   do not want extra data processing and buffering overhead.\r\n   *   @example Disabling default data processing\r\n   *     var listener = AWS.EventListeners.Core.HTTP_DATA;\r\n   *     request.removeListener('httpData', listener);\r\n   *   @return [Function]\r\n   *   @readonly\r\n   */\n  Core: {} /* doc hack */\n};\n\n/**\r\n * @api private\r\n */\nfunction getOperationAuthtype(req) {\n  if (!req.service.api.operations) {\n    return '';\n  }\n  var operation = req.service.api.operations[req.operation];\n  return operation ? operation.authtype : '';\n}\nAWS.EventListeners = {\n  Core: new SequentialExecutor().addNamedListeners(function (add, addAsync) {\n    addAsync('VALIDATE_CREDENTIALS', 'validate', function VALIDATE_CREDENTIALS(req, done) {\n      if (!req.service.api.signatureVersion && !req.service.config.signatureVersion) return done(); // none\n      req.service.config.getCredentials(function (err) {\n        if (err) {\n          req.response.error = AWS.util.error(err, {\n            code: 'CredentialsError',\n            message: 'Missing credentials in config, if using AWS_CONFIG_FILE, set AWS_SDK_LOAD_CONFIG=1'\n          });\n        }\n        done();\n      });\n    });\n    add('VALIDATE_REGION', 'validate', function VALIDATE_REGION(req) {\n      if (!req.service.isGlobalEndpoint) {\n        var dnsHostRegex = new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/);\n        if (!req.service.config.region) {\n          req.response.error = AWS.util.error(new Error(), {\n            code: 'ConfigError',\n            message: 'Missing region in config'\n          });\n        } else if (!dnsHostRegex.test(req.service.config.region)) {\n          req.response.error = AWS.util.error(new Error(), {\n            code: 'ConfigError',\n            message: 'Invalid region in config'\n          });\n        }\n      }\n    });\n    add('BUILD_IDEMPOTENCY_TOKENS', 'validate', function BUILD_IDEMPOTENCY_TOKENS(req) {\n      if (!req.service.api.operations) {\n        return;\n      }\n      var operation = req.service.api.operations[req.operation];\n      if (!operation) {\n        return;\n      }\n      var idempotentMembers = operation.idempotentMembers;\n      if (!idempotentMembers.length) {\n        return;\n      }\n      // creates a copy of params so user's param object isn't mutated\n      var params = AWS.util.copy(req.params);\n      for (var i = 0, iLen = idempotentMembers.length; i < iLen; i++) {\n        if (!params[idempotentMembers[i]]) {\n          // add the member\n          params[idempotentMembers[i]] = AWS.util.uuid.v4();\n        }\n      }\n      req.params = params;\n    });\n    add('VALIDATE_PARAMETERS', 'validate', function VALIDATE_PARAMETERS(req) {\n      if (!req.service.api.operations) {\n        return;\n      }\n      var rules = req.service.api.operations[req.operation].input;\n      var validation = req.service.config.paramValidation;\n      new AWS.ParamValidator(validation).validate(rules, req.params);\n    });\n    add('COMPUTE_CHECKSUM', 'afterBuild', function COMPUTE_CHECKSUM(req) {\n      if (!req.service.api.operations) {\n        return;\n      }\n      var operation = req.service.api.operations[req.operation];\n      if (!operation) {\n        return;\n      }\n      var body = req.httpRequest.body;\n      var isNonStreamingPayload = body && (AWS.util.Buffer.isBuffer(body) || typeof body === 'string');\n      var headers = req.httpRequest.headers;\n      if (operation.httpChecksumRequired && req.service.config.computeChecksums && isNonStreamingPayload && !headers['Content-MD5']) {\n        var md5 = AWS.util.crypto.md5(body, 'base64');\n        headers['Content-MD5'] = md5;\n      }\n    });\n    addAsync('COMPUTE_SHA256', 'afterBuild', function COMPUTE_SHA256(req, done) {\n      req.haltHandlersOnError();\n      if (!req.service.api.operations) {\n        return;\n      }\n      var operation = req.service.api.operations[req.operation];\n      var authtype = operation ? operation.authtype : '';\n      if (!req.service.api.signatureVersion && !authtype && !req.service.config.signatureVersion) return done(); // none\n      if (req.service.getSignerClass(req) === AWS.Signers.V4) {\n        var body = req.httpRequest.body || '';\n        if (authtype.indexOf('unsigned-body') >= 0) {\n          req.httpRequest.headers['X-Amz-Content-Sha256'] = 'UNSIGNED-PAYLOAD';\n          return done();\n        }\n        AWS.util.computeSha256(body, function (err, sha) {\n          if (err) {\n            done(err);\n          } else {\n            req.httpRequest.headers['X-Amz-Content-Sha256'] = sha;\n            done();\n          }\n        });\n      } else {\n        done();\n      }\n    });\n    add('SET_CONTENT_LENGTH', 'afterBuild', function SET_CONTENT_LENGTH(req) {\n      var authtype = getOperationAuthtype(req);\n      var payloadMember = AWS.util.getRequestPayloadShape(req);\n      if (req.httpRequest.headers['Content-Length'] === undefined) {\n        try {\n          var length = AWS.util.string.byteLength(req.httpRequest.body);\n          req.httpRequest.headers['Content-Length'] = length;\n        } catch (err) {\n          if (payloadMember && payloadMember.isStreaming) {\n            if (payloadMember.requiresLength) {\n              //streaming payload requires length(s3, glacier)\n              throw err;\n            } else if (authtype.indexOf('unsigned-body') >= 0) {\n              //unbounded streaming payload(lex, mediastore)\n              req.httpRequest.headers['Transfer-Encoding'] = 'chunked';\n              return;\n            } else {\n              throw err;\n            }\n          }\n          throw err;\n        }\n      }\n    });\n    add('SET_HTTP_HOST', 'afterBuild', function SET_HTTP_HOST(req) {\n      req.httpRequest.headers['Host'] = req.httpRequest.endpoint.host;\n    });\n    add('SET_TRACE_ID', 'afterBuild', function SET_TRACE_ID(req) {\n      var traceIdHeaderName = 'X-Amzn-Trace-Id';\n      if (AWS.util.isNode() && !Object.hasOwnProperty.call(req.httpRequest.headers, traceIdHeaderName)) {\n        var ENV_LAMBDA_FUNCTION_NAME = 'AWS_LAMBDA_FUNCTION_NAME';\n        var ENV_TRACE_ID = '_X_AMZN_TRACE_ID';\n        var functionName = process.env[ENV_LAMBDA_FUNCTION_NAME];\n        var traceId = process.env[ENV_TRACE_ID];\n        if (typeof functionName === 'string' && functionName.length > 0 && typeof traceId === 'string' && traceId.length > 0) {\n          req.httpRequest.headers[traceIdHeaderName] = traceId;\n        }\n      }\n    });\n    add('RESTART', 'restart', function RESTART() {\n      var err = this.response.error;\n      if (!err || !err.retryable) return;\n      this.httpRequest = new AWS.HttpRequest(this.service.endpoint, this.service.region);\n      if (this.response.retryCount < this.service.config.maxRetries) {\n        this.response.retryCount++;\n      } else {\n        this.response.error = null;\n      }\n    });\n    var addToHead = true;\n    addAsync('DISCOVER_ENDPOINT', 'sign', DISCOVER_ENDPOINT, addToHead);\n    addAsync('SIGN', 'sign', function SIGN(req, done) {\n      var service = req.service;\n      var operations = req.service.api.operations || {};\n      var operation = operations[req.operation];\n      var authtype = operation ? operation.authtype : '';\n      if (!service.api.signatureVersion && !authtype && !service.config.signatureVersion) return done(); // none\n\n      if (authtype === 'bearer' || service.config.signatureVersion === 'bearer') {\n        service.config.getToken(function (err, token) {\n          if (err) {\n            req.response.error = err;\n            return done();\n          }\n          try {\n            var SignerClass = service.getSignerClass(req);\n            var signer = new SignerClass(req.httpRequest);\n            signer.addAuthorization(token);\n          } catch (e) {\n            req.response.error = e;\n          }\n          done();\n        });\n      } else {\n        service.config.getCredentials(function (err, credentials) {\n          if (err) {\n            req.response.error = err;\n            return done();\n          }\n          try {\n            var date = service.getSkewCorrectedDate();\n            var SignerClass = service.getSignerClass(req);\n            var signer = new SignerClass(req.httpRequest, service.getSigningName(req), {\n              signatureCache: service.config.signatureCache,\n              operation: operation,\n              signatureVersion: service.api.signatureVersion\n            });\n            signer.setServiceClientId(service._clientId);\n\n            // clear old authorization headers\n            delete req.httpRequest.headers['Authorization'];\n            delete req.httpRequest.headers['Date'];\n            delete req.httpRequest.headers['X-Amz-Date'];\n\n            // add new authorization\n            signer.addAuthorization(credentials, date);\n            req.signedAt = date;\n          } catch (e) {\n            req.response.error = e;\n          }\n          done();\n        });\n      }\n    });\n    add('VALIDATE_RESPONSE', 'validateResponse', function VALIDATE_RESPONSE(resp) {\n      if (this.service.successfulResponse(resp, this)) {\n        resp.data = {};\n        resp.error = null;\n      } else {\n        resp.data = null;\n        resp.error = AWS.util.error(new Error(), {\n          code: 'UnknownError',\n          message: 'An unknown error occurred.'\n        });\n      }\n    });\n    add('ERROR', 'error', function ERROR(err, resp) {\n      var awsQueryCompatible = resp.request.service.api.awsQueryCompatible;\n      if (awsQueryCompatible) {\n        var headers = resp.httpResponse.headers;\n        var queryErrorCode = headers ? headers['x-amzn-query-error'] : undefined;\n        if (queryErrorCode && queryErrorCode.includes(';')) {\n          resp.error.code = queryErrorCode.split(';')[0];\n        }\n      }\n    }, true);\n    addAsync('SEND', 'send', function SEND(resp, done) {\n      resp.httpResponse._abortCallback = done;\n      resp.error = null;\n      resp.data = null;\n      function callback(httpResp) {\n        resp.httpResponse.stream = httpResp;\n        var stream = resp.request.httpRequest.stream;\n        var service = resp.request.service;\n        var api = service.api;\n        var operationName = resp.request.operation;\n        var operation = api.operations[operationName] || {};\n        httpResp.on('headers', function onHeaders(statusCode, headers, statusMessage) {\n          resp.request.emit('httpHeaders', [statusCode, headers, resp, statusMessage]);\n          if (!resp.httpResponse.streaming) {\n            if (AWS.HttpClient.streamsApiVersion === 2) {\n              // streams2 API check\n              // if we detect event streams, we're going to have to\n              // return the stream immediately\n              if (operation.hasEventOutput && service.successfulResponse(resp)) {\n                // skip reading the IncomingStream\n                resp.request.emit('httpDone');\n                done();\n                return;\n              }\n              httpResp.on('readable', function onReadable() {\n                var data = httpResp.read();\n                if (data !== null) {\n                  resp.request.emit('httpData', [data, resp]);\n                }\n              });\n            } else {\n              // legacy streams API\n              httpResp.on('data', function onData(data) {\n                resp.request.emit('httpData', [data, resp]);\n              });\n            }\n          }\n        });\n        httpResp.on('end', function onEnd() {\n          if (!stream || !stream.didCallback) {\n            if (AWS.HttpClient.streamsApiVersion === 2 && operation.hasEventOutput && service.successfulResponse(resp)) {\n              // don't concatenate response chunks when streaming event stream data when response is successful\n              return;\n            }\n            resp.request.emit('httpDone');\n            done();\n          }\n        });\n      }\n      function progress(httpResp) {\n        httpResp.on('sendProgress', function onSendProgress(value) {\n          resp.request.emit('httpUploadProgress', [value, resp]);\n        });\n        httpResp.on('receiveProgress', function onReceiveProgress(value) {\n          resp.request.emit('httpDownloadProgress', [value, resp]);\n        });\n      }\n      function error(err) {\n        if (err.code !== 'RequestAbortedError') {\n          var errCode = err.code === 'TimeoutError' ? err.code : 'NetworkingError';\n          err = AWS.util.error(err, {\n            code: errCode,\n            region: resp.request.httpRequest.region,\n            hostname: resp.request.httpRequest.endpoint.hostname,\n            retryable: true\n          });\n        }\n        resp.error = err;\n        resp.request.emit('httpError', [resp.error, resp], function () {\n          done();\n        });\n      }\n      function executeSend() {\n        var http = AWS.HttpClient.getInstance();\n        var httpOptions = resp.request.service.config.httpOptions || {};\n        try {\n          var stream = http.handleRequest(resp.request.httpRequest, httpOptions, callback, error);\n          progress(stream);\n        } catch (err) {\n          error(err);\n        }\n      }\n      var timeDiff = (resp.request.service.getSkewCorrectedDate() - this.signedAt) / 1000;\n      if (timeDiff >= 60 * 10) {\n        // if we signed 10min ago, re-sign\n        this.emit('sign', [this], function (err) {\n          if (err) done(err);else executeSend();\n        });\n      } else {\n        executeSend();\n      }\n    });\n    add('HTTP_HEADERS', 'httpHeaders', function HTTP_HEADERS(statusCode, headers, resp, statusMessage) {\n      resp.httpResponse.statusCode = statusCode;\n      resp.httpResponse.statusMessage = statusMessage;\n      resp.httpResponse.headers = headers;\n      resp.httpResponse.body = AWS.util.buffer.toBuffer('');\n      resp.httpResponse.buffers = [];\n      resp.httpResponse.numBytes = 0;\n      var dateHeader = headers.date || headers.Date;\n      var service = resp.request.service;\n      if (dateHeader) {\n        var serverTime = Date.parse(dateHeader);\n        if (service.config.correctClockSkew && service.isClockSkewed(serverTime)) {\n          service.applyClockOffset(serverTime);\n        }\n      }\n    });\n    add('HTTP_DATA', 'httpData', function HTTP_DATA(chunk, resp) {\n      if (chunk) {\n        if (AWS.util.isNode()) {\n          resp.httpResponse.numBytes += chunk.length;\n          var total = resp.httpResponse.headers['content-length'];\n          var progress = {\n            loaded: resp.httpResponse.numBytes,\n            total: total\n          };\n          resp.request.emit('httpDownloadProgress', [progress, resp]);\n        }\n        resp.httpResponse.buffers.push(AWS.util.buffer.toBuffer(chunk));\n      }\n    });\n    add('HTTP_DONE', 'httpDone', function HTTP_DONE(resp) {\n      // convert buffers array into single buffer\n      if (resp.httpResponse.buffers && resp.httpResponse.buffers.length > 0) {\n        var body = AWS.util.buffer.concat(resp.httpResponse.buffers);\n        resp.httpResponse.body = body;\n      }\n      delete resp.httpResponse.numBytes;\n      delete resp.httpResponse.buffers;\n    });\n    add('FINALIZE_ERROR', 'retry', function FINALIZE_ERROR(resp) {\n      if (resp.httpResponse.statusCode) {\n        resp.error.statusCode = resp.httpResponse.statusCode;\n        if (resp.error.retryable === undefined) {\n          resp.error.retryable = this.service.retryableError(resp.error, this);\n        }\n      }\n    });\n    add('INVALIDATE_CREDENTIALS', 'retry', function INVALIDATE_CREDENTIALS(resp) {\n      if (!resp.error) return;\n      switch (resp.error.code) {\n        case 'RequestExpired': // EC2 only\n        case 'ExpiredTokenException':\n        case 'ExpiredToken':\n          resp.error.retryable = true;\n          resp.request.service.config.credentials.expired = true;\n      }\n    });\n    add('EXPIRED_SIGNATURE', 'retry', function EXPIRED_SIGNATURE(resp) {\n      var err = resp.error;\n      if (!err) return;\n      if (typeof err.code === 'string' && typeof err.message === 'string') {\n        if (err.code.match(/Signature/) && err.message.match(/expired/)) {\n          resp.error.retryable = true;\n        }\n      }\n    });\n    add('CLOCK_SKEWED', 'retry', function CLOCK_SKEWED(resp) {\n      if (!resp.error) return;\n      if (this.service.clockSkewError(resp.error) && this.service.config.correctClockSkew) {\n        resp.error.retryable = true;\n      }\n    });\n    add('REDIRECT', 'retry', function REDIRECT(resp) {\n      if (resp.error && resp.error.statusCode >= 300 && resp.error.statusCode < 400 && resp.httpResponse.headers['location']) {\n        this.httpRequest.endpoint = new AWS.Endpoint(resp.httpResponse.headers['location']);\n        this.httpRequest.headers['Host'] = this.httpRequest.endpoint.host;\n        resp.error.redirect = true;\n        resp.error.retryable = true;\n      }\n    });\n    add('RETRY_CHECK', 'retry', function RETRY_CHECK(resp) {\n      if (resp.error) {\n        if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n          resp.error.retryDelay = 0;\n        } else if (resp.retryCount < resp.maxRetries) {\n          resp.error.retryDelay = this.service.retryDelays(resp.retryCount, resp.error) || 0;\n        }\n      }\n    });\n    addAsync('RESET_RETRY_STATE', 'afterRetry', function RESET_RETRY_STATE(resp, done) {\n      var delay,\n        willRetry = false;\n      if (resp.error) {\n        delay = resp.error.retryDelay || 0;\n        if (resp.error.retryable && resp.retryCount < resp.maxRetries) {\n          resp.retryCount++;\n          willRetry = true;\n        } else if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n          resp.redirectCount++;\n          willRetry = true;\n        }\n      }\n\n      // delay < 0 is a signal from customBackoff to skip retries\n      if (willRetry && delay >= 0) {\n        resp.error = null;\n        setTimeout(done, delay);\n      } else {\n        done();\n      }\n    });\n  }),\n  CorePost: new SequentialExecutor().addNamedListeners(function (add) {\n    add('EXTRACT_REQUEST_ID', 'extractData', AWS.util.extractRequestId);\n    add('EXTRACT_REQUEST_ID', 'extractError', AWS.util.extractRequestId);\n    add('ENOTFOUND_ERROR', 'httpError', function ENOTFOUND_ERROR(err) {\n      function isDNSError(err) {\n        return err.errno === 'ENOTFOUND' || typeof err.errno === 'number' && typeof AWS.util.getSystemErrorName === 'function' && ['EAI_NONAME', 'EAI_NODATA'].indexOf(AWS.util.getSystemErrorName(err.errno) >= 0);\n      }\n      if (err.code === 'NetworkingError' && isDNSError(err)) {\n        var message = 'Inaccessible host: `' + err.hostname + '\\' at port `' + err.port + '\\'. This service may not be available in the `' + err.region + '\\' region.';\n        this.response.error = AWS.util.error(new Error(message), {\n          code: 'UnknownEndpoint',\n          region: err.region,\n          hostname: err.hostname,\n          retryable: true,\n          originalError: err\n        });\n      }\n    });\n  }),\n  Logger: new SequentialExecutor().addNamedListeners(function (add) {\n    add('LOG_REQUEST', 'complete', function LOG_REQUEST(resp) {\n      var req = resp.request;\n      var logger = req.service.config.logger;\n      if (!logger) return;\n      function filterSensitiveLog(inputShape, shape) {\n        if (!shape) {\n          return shape;\n        }\n        if (inputShape.isSensitive) {\n          return '***SensitiveInformation***';\n        }\n        switch (inputShape.type) {\n          case 'structure':\n            var struct = {};\n            AWS.util.each(shape, function (subShapeName, subShape) {\n              if (Object.prototype.hasOwnProperty.call(inputShape.members, subShapeName)) {\n                struct[subShapeName] = filterSensitiveLog(inputShape.members[subShapeName], subShape);\n              } else {\n                struct[subShapeName] = subShape;\n              }\n            });\n            return struct;\n          case 'list':\n            var list = [];\n            AWS.util.arrayEach(shape, function (subShape, index) {\n              list.push(filterSensitiveLog(inputShape.member, subShape));\n            });\n            return list;\n          case 'map':\n            var map = {};\n            AWS.util.each(shape, function (key, value) {\n              map[key] = filterSensitiveLog(inputShape.value, value);\n            });\n            return map;\n          default:\n            return shape;\n        }\n      }\n      function buildMessage() {\n        var time = resp.request.service.getSkewCorrectedDate().getTime();\n        var delta = (time - req.startTime.getTime()) / 1000;\n        var ansi = logger.isTTY ? true : false;\n        var status = resp.httpResponse.statusCode;\n        var censoredParams = req.params;\n        if (req.service.api.operations && req.service.api.operations[req.operation] && req.service.api.operations[req.operation].input) {\n          var inputShape = req.service.api.operations[req.operation].input;\n          censoredParams = filterSensitiveLog(inputShape, req.params);\n        }\n        var params = require('util').inspect(censoredParams, true, null);\n        var message = '';\n        if (ansi) message += '\\x1B[33m';\n        message += '[AWS ' + req.service.serviceIdentifier + ' ' + status;\n        message += ' ' + delta.toString() + 's ' + resp.retryCount + ' retries]';\n        if (ansi) message += '\\x1B[0;1m';\n        message += ' ' + AWS.util.string.lowerFirst(req.operation);\n        message += '(' + params + ')';\n        if (ansi) message += '\\x1B[0m';\n        return message;\n      }\n      var line = buildMessage();\n      if (typeof logger.log === 'function') {\n        logger.log(line);\n      } else if (typeof logger.write === 'function') {\n        logger.write(line + '\\n');\n      }\n    });\n  }),\n  Json: new SequentialExecutor().addNamedListeners(function (add) {\n    var svc = require('./protocol/json');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n  Rest: new SequentialExecutor().addNamedListeners(function (add) {\n    var svc = require('./protocol/rest');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n  RestJson: new SequentialExecutor().addNamedListeners(function (add) {\n    var svc = require('./protocol/rest_json');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n    add('UNSET_CONTENT_LENGTH', 'afterBuild', svc.unsetContentLength);\n  }),\n  RestXml: new SequentialExecutor().addNamedListeners(function (add) {\n    var svc = require('./protocol/rest_xml');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n  Query: new SequentialExecutor().addNamedListeners(function (add) {\n    var svc = require('./protocol/query');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  })\n};","map":{"version":3,"names":["AWS","require","SequentialExecutor","DISCOVER_ENDPOINT","discoverEndpoint","EventListeners","Core","getOperationAuthtype","req","service","api","operations","operation","authtype","addNamedListeners","add","addAsync","VALIDATE_CREDENTIALS","done","signatureVersion","config","getCredentials","err","response","error","util","code","message","VALIDATE_REGION","isGlobalEndpoint","dnsHostRegex","RegExp","region","Error","test","BUILD_IDEMPOTENCY_TOKENS","idempotentMembers","length","params","copy","i","iLen","uuid","v4","VALIDATE_PARAMETERS","rules","input","validation","paramValidation","ParamValidator","validate","COMPUTE_CHECKSUM","body","httpRequest","isNonStreamingPayload","Buffer","isBuffer","headers","httpChecksumRequired","computeChecksums","md5","crypto","COMPUTE_SHA256","haltHandlersOnError","getSignerClass","Signers","V4","indexOf","computeSha256","sha","SET_CONTENT_LENGTH","payloadMember","getRequestPayloadShape","undefined","string","byteLength","isStreaming","requiresLength","SET_HTTP_HOST","endpoint","host","SET_TRACE_ID","traceIdHeaderName","isNode","Object","hasOwnProperty","call","ENV_LAMBDA_FUNCTION_NAME","ENV_TRACE_ID","functionName","process","env","traceId","RESTART","retryable","HttpRequest","retryCount","maxRetries","addToHead","SIGN","getToken","token","SignerClass","signer","addAuthorization","e","credentials","date","getSkewCorrectedDate","getSigningName","signatureCache","setServiceClientId","_clientId","signedAt","VALIDATE_RESPONSE","resp","successfulResponse","data","ERROR","awsQueryCompatible","request","httpResponse","queryErrorCode","includes","split","SEND","_abortCallback","callback","httpResp","stream","operationName","on","onHeaders","statusCode","statusMessage","emit","streaming","HttpClient","streamsApiVersion","hasEventOutput","onReadable","read","onData","onEnd","didCallback","progress","onSendProgress","value","onReceiveProgress","errCode","hostname","executeSend","http","getInstance","httpOptions","handleRequest","timeDiff","HTTP_HEADERS","buffer","toBuffer","buffers","numBytes","dateHeader","Date","serverTime","parse","correctClockSkew","isClockSkewed","applyClockOffset","HTTP_DATA","chunk","total","loaded","push","HTTP_DONE","concat","FINALIZE_ERROR","retryableError","INVALIDATE_CREDENTIALS","expired","EXPIRED_SIGNATURE","match","CLOCK_SKEWED","clockSkewError","REDIRECT","Endpoint","redirect","RETRY_CHECK","redirectCount","maxRedirects","retryDelay","retryDelays","RESET_RETRY_STATE","delay","willRetry","setTimeout","CorePost","extractRequestId","ENOTFOUND_ERROR","isDNSError","errno","getSystemErrorName","port","originalError","Logger","LOG_REQUEST","logger","filterSensitiveLog","inputShape","shape","isSensitive","type","struct","each","subShapeName","subShape","prototype","members","list","arrayEach","index","member","map","key","buildMessage","time","getTime","delta","startTime","ansi","isTTY","status","censoredParams","inspect","serviceIdentifier","toString","lowerFirst","line","log","write","Json","svc","buildRequest","extractData","extractError","Rest","RestJson","unsetContentLength","RestXml","Query"],"sources":["C:/PROJELER/NewProjects/gitPull/newprojectweb/node_modules/aws-sdk/lib/event_listeners.js"],"sourcesContent":["var AWS = require('./core');\r\nvar SequentialExecutor = require('./sequential_executor');\r\nvar DISCOVER_ENDPOINT = require('./discover_endpoint').discoverEndpoint;\r\n/**\r\n * The namespace used to register global event listeners for request building\r\n * and sending.\r\n */\r\nAWS.EventListeners = {\r\n  /**\r\n   * @!attribute VALIDATE_CREDENTIALS\r\n   *   A request listener that validates whether the request is being\r\n   *   sent with credentials.\r\n   *   Handles the {AWS.Request~validate 'validate' Request event}\r\n   *   @example Sending a request without validating credentials\r\n   *     var listener = AWS.EventListeners.Core.VALIDATE_CREDENTIALS;\r\n   *     request.removeListener('validate', listener);\r\n   *   @readonly\r\n   *   @return [Function]\r\n   * @!attribute VALIDATE_REGION\r\n   *   A request listener that validates whether the region is set\r\n   *   for a request.\r\n   *   Handles the {AWS.Request~validate 'validate' Request event}\r\n   *   @example Sending a request without validating region configuration\r\n   *     var listener = AWS.EventListeners.Core.VALIDATE_REGION;\r\n   *     request.removeListener('validate', listener);\r\n   *   @readonly\r\n   *   @return [Function]\r\n   * @!attribute VALIDATE_PARAMETERS\r\n   *   A request listener that validates input parameters in a request.\r\n   *   Handles the {AWS.Request~validate 'validate' Request event}\r\n   *   @example Sending a request without validating parameters\r\n   *     var listener = AWS.EventListeners.Core.VALIDATE_PARAMETERS;\r\n   *     request.removeListener('validate', listener);\r\n   *   @example Disable parameter validation globally\r\n   *     AWS.EventListeners.Core.removeListener('validate',\r\n   *       AWS.EventListeners.Core.VALIDATE_REGION);\r\n   *   @readonly\r\n   *   @return [Function]\r\n   * @!attribute SEND\r\n   *   A request listener that initiates the HTTP connection for a\r\n   *   request being sent. Handles the {AWS.Request~send 'send' Request event}\r\n   *   @example Replacing the HTTP handler\r\n   *     var listener = AWS.EventListeners.Core.SEND;\r\n   *     request.removeListener('send', listener);\r\n   *     request.on('send', function(response) {\r\n   *       customHandler.send(response);\r\n   *     });\r\n   *   @return [Function]\r\n   *   @readonly\r\n   * @!attribute HTTP_DATA\r\n   *   A request listener that reads data from the HTTP connection in order\r\n   *   to build the response data.\r\n   *   Handles the {AWS.Request~httpData 'httpData' Request event}.\r\n   *   Remove this handler if you are overriding the 'httpData' event and\r\n   *   do not want extra data processing and buffering overhead.\r\n   *   @example Disabling default data processing\r\n   *     var listener = AWS.EventListeners.Core.HTTP_DATA;\r\n   *     request.removeListener('httpData', listener);\r\n   *   @return [Function]\r\n   *   @readonly\r\n   */\r\n  Core: {} /* doc hack */\r\n};\r\n\r\n/**\r\n * @api private\r\n */\r\nfunction getOperationAuthtype(req) {\r\n  if (!req.service.api.operations) {\r\n    return '';\r\n  }\r\n  var operation = req.service.api.operations[req.operation];\r\n  return operation ? operation.authtype : '';\r\n}\r\n\r\nAWS.EventListeners = {\r\n  Core: new SequentialExecutor().addNamedListeners(function(add, addAsync) {\r\n    addAsync('VALIDATE_CREDENTIALS', 'validate',\r\n        function VALIDATE_CREDENTIALS(req, done) {\r\n      if (!req.service.api.signatureVersion && !req.service.config.signatureVersion) return done(); // none\r\n      req.service.config.getCredentials(function(err) {\r\n        if (err) {\r\n          req.response.error = AWS.util.error(err,\r\n            {code: 'CredentialsError', message: 'Missing credentials in config, if using AWS_CONFIG_FILE, set AWS_SDK_LOAD_CONFIG=1'});\r\n        }\r\n        done();\r\n      });\r\n    });\r\n\r\n    add('VALIDATE_REGION', 'validate', function VALIDATE_REGION(req) {\r\n      if (!req.service.isGlobalEndpoint) {\r\n        var dnsHostRegex = new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/);\r\n        if (!req.service.config.region) {\r\n          req.response.error = AWS.util.error(new Error(),\r\n            {code: 'ConfigError', message: 'Missing region in config'});\r\n        } else if (!dnsHostRegex.test(req.service.config.region)) {\r\n          req.response.error = AWS.util.error(new Error(),\r\n            {code: 'ConfigError', message: 'Invalid region in config'});\r\n        }\r\n      }\r\n    });\r\n\r\n    add('BUILD_IDEMPOTENCY_TOKENS', 'validate', function BUILD_IDEMPOTENCY_TOKENS(req) {\r\n      if (!req.service.api.operations) {\r\n        return;\r\n      }\r\n      var operation = req.service.api.operations[req.operation];\r\n      if (!operation) {\r\n        return;\r\n      }\r\n      var idempotentMembers = operation.idempotentMembers;\r\n      if (!idempotentMembers.length) {\r\n        return;\r\n      }\r\n      // creates a copy of params so user's param object isn't mutated\r\n      var params = AWS.util.copy(req.params);\r\n      for (var i = 0, iLen = idempotentMembers.length; i < iLen; i++) {\r\n        if (!params[idempotentMembers[i]]) {\r\n          // add the member\r\n          params[idempotentMembers[i]] = AWS.util.uuid.v4();\r\n        }\r\n      }\r\n      req.params = params;\r\n    });\r\n\r\n    add('VALIDATE_PARAMETERS', 'validate', function VALIDATE_PARAMETERS(req) {\r\n      if (!req.service.api.operations) {\r\n        return;\r\n      }\r\n      var rules = req.service.api.operations[req.operation].input;\r\n      var validation = req.service.config.paramValidation;\r\n      new AWS.ParamValidator(validation).validate(rules, req.params);\r\n    });\r\n\r\n    add('COMPUTE_CHECKSUM', 'afterBuild', function COMPUTE_CHECKSUM(req) {\r\n      if (!req.service.api.operations) {\r\n        return;\r\n      }\r\n      var operation = req.service.api.operations[req.operation];\r\n      if (!operation) {\r\n        return;\r\n      }\r\n      var body = req.httpRequest.body;\r\n      var isNonStreamingPayload = body && (AWS.util.Buffer.isBuffer(body) || typeof body === 'string');\r\n      var headers = req.httpRequest.headers;\r\n      if (\r\n        operation.httpChecksumRequired &&\r\n        req.service.config.computeChecksums &&\r\n        isNonStreamingPayload &&\r\n        !headers['Content-MD5']\r\n      ) {\r\n        var md5 = AWS.util.crypto.md5(body, 'base64');\r\n        headers['Content-MD5'] = md5;\r\n      }\r\n    });\r\n\r\n    addAsync('COMPUTE_SHA256', 'afterBuild', function COMPUTE_SHA256(req, done) {\r\n      req.haltHandlersOnError();\r\n      if (!req.service.api.operations) {\r\n        return;\r\n      }\r\n      var operation = req.service.api.operations[req.operation];\r\n      var authtype = operation ? operation.authtype : '';\r\n      if (!req.service.api.signatureVersion && !authtype && !req.service.config.signatureVersion) return done(); // none\r\n      if (req.service.getSignerClass(req) === AWS.Signers.V4) {\r\n        var body = req.httpRequest.body || '';\r\n        if (authtype.indexOf('unsigned-body') >= 0) {\r\n          req.httpRequest.headers['X-Amz-Content-Sha256'] = 'UNSIGNED-PAYLOAD';\r\n          return done();\r\n        }\r\n        AWS.util.computeSha256(body, function(err, sha) {\r\n          if (err) {\r\n            done(err);\r\n          }\r\n          else {\r\n            req.httpRequest.headers['X-Amz-Content-Sha256'] = sha;\r\n            done();\r\n          }\r\n        });\r\n      } else {\r\n        done();\r\n      }\r\n    });\r\n\r\n    add('SET_CONTENT_LENGTH', 'afterBuild', function SET_CONTENT_LENGTH(req) {\r\n      var authtype = getOperationAuthtype(req);\r\n      var payloadMember = AWS.util.getRequestPayloadShape(req);\r\n      if (req.httpRequest.headers['Content-Length'] === undefined) {\r\n        try {\r\n          var length = AWS.util.string.byteLength(req.httpRequest.body);\r\n          req.httpRequest.headers['Content-Length'] = length;\r\n        } catch (err) {\r\n          if (payloadMember && payloadMember.isStreaming) {\r\n            if (payloadMember.requiresLength) {\r\n              //streaming payload requires length(s3, glacier)\r\n              throw err;\r\n            } else if (authtype.indexOf('unsigned-body') >= 0) {\r\n              //unbounded streaming payload(lex, mediastore)\r\n              req.httpRequest.headers['Transfer-Encoding'] = 'chunked';\r\n              return;\r\n            } else {\r\n              throw err;\r\n            }\r\n          }\r\n          throw err;\r\n        }\r\n      }\r\n    });\r\n\r\n    add('SET_HTTP_HOST', 'afterBuild', function SET_HTTP_HOST(req) {\r\n      req.httpRequest.headers['Host'] = req.httpRequest.endpoint.host;\r\n    });\r\n\r\n    add('SET_TRACE_ID', 'afterBuild', function SET_TRACE_ID(req) {\r\n      var traceIdHeaderName = 'X-Amzn-Trace-Id';\r\n      if (AWS.util.isNode() && !Object.hasOwnProperty.call(req.httpRequest.headers, traceIdHeaderName)) {\r\n        var ENV_LAMBDA_FUNCTION_NAME = 'AWS_LAMBDA_FUNCTION_NAME';\r\n        var ENV_TRACE_ID = '_X_AMZN_TRACE_ID';\r\n        var functionName = process.env[ENV_LAMBDA_FUNCTION_NAME];\r\n        var traceId = process.env[ENV_TRACE_ID];\r\n        if (\r\n          typeof functionName === 'string' &&\r\n          functionName.length > 0 &&\r\n          typeof traceId === 'string' &&\r\n          traceId.length > 0\r\n        ) {\r\n          req.httpRequest.headers[traceIdHeaderName] = traceId;\r\n        }\r\n      }\r\n    });\r\n\r\n    add('RESTART', 'restart', function RESTART() {\r\n      var err = this.response.error;\r\n      if (!err || !err.retryable) return;\r\n\r\n      this.httpRequest = new AWS.HttpRequest(\r\n        this.service.endpoint,\r\n        this.service.region\r\n      );\r\n\r\n      if (this.response.retryCount < this.service.config.maxRetries) {\r\n        this.response.retryCount++;\r\n      } else {\r\n        this.response.error = null;\r\n      }\r\n    });\r\n\r\n    var addToHead = true;\r\n    addAsync('DISCOVER_ENDPOINT', 'sign', DISCOVER_ENDPOINT, addToHead);\r\n\r\n    addAsync('SIGN', 'sign', function SIGN(req, done) {\r\n      var service = req.service;\r\n      var operations = req.service.api.operations || {};\r\n      var operation = operations[req.operation];\r\n      var authtype = operation ? operation.authtype : '';\r\n      if (!service.api.signatureVersion && !authtype && !service.config.signatureVersion) return done(); // none\r\n\r\n      if (authtype === 'bearer' || service.config.signatureVersion === 'bearer') {\r\n        service.config.getToken(function (err, token) {\r\n          if (err) {\r\n            req.response.error = err;\r\n            return done();\r\n          }\r\n\r\n          try {\r\n            var SignerClass = service.getSignerClass(req);\r\n            var signer = new SignerClass(req.httpRequest);\r\n            signer.addAuthorization(token);\r\n          } catch (e) {\r\n            req.response.error = e;\r\n          }\r\n          done();\r\n        });\r\n      } else {\r\n        service.config.getCredentials(function (err, credentials) {\r\n          if (err) {\r\n            req.response.error = err;\r\n            return done();\r\n          }\r\n\r\n          try {\r\n            var date = service.getSkewCorrectedDate();\r\n            var SignerClass = service.getSignerClass(req);\r\n            var signer = new SignerClass(req.httpRequest,\r\n              service.getSigningName(req),\r\n              {\r\n                signatureCache: service.config.signatureCache,\r\n                operation: operation,\r\n                signatureVersion: service.api.signatureVersion\r\n              });\r\n            signer.setServiceClientId(service._clientId);\r\n\r\n            // clear old authorization headers\r\n            delete req.httpRequest.headers['Authorization'];\r\n            delete req.httpRequest.headers['Date'];\r\n            delete req.httpRequest.headers['X-Amz-Date'];\r\n\r\n            // add new authorization\r\n            signer.addAuthorization(credentials, date);\r\n            req.signedAt = date;\r\n          } catch (e) {\r\n            req.response.error = e;\r\n          }\r\n          done();\r\n        });\r\n\r\n      }\r\n    });\r\n\r\n    add('VALIDATE_RESPONSE', 'validateResponse', function VALIDATE_RESPONSE(resp) {\r\n      if (this.service.successfulResponse(resp, this)) {\r\n        resp.data = {};\r\n        resp.error = null;\r\n      } else {\r\n        resp.data = null;\r\n        resp.error = AWS.util.error(new Error(),\r\n          {code: 'UnknownError', message: 'An unknown error occurred.'});\r\n      }\r\n    });\r\n\r\n    add('ERROR', 'error', function ERROR(err, resp) {\r\n      var awsQueryCompatible = resp.request.service.api.awsQueryCompatible;\r\n      if (awsQueryCompatible) {\r\n        var headers = resp.httpResponse.headers;\r\n        var queryErrorCode = headers ? headers['x-amzn-query-error'] : undefined;\r\n        if (queryErrorCode && queryErrorCode.includes(';')) {\r\n          resp.error.code = queryErrorCode.split(';')[0];\r\n        }\r\n      }\r\n    }, true);\r\n\r\n    addAsync('SEND', 'send', function SEND(resp, done) {\r\n      resp.httpResponse._abortCallback = done;\r\n      resp.error = null;\r\n      resp.data = null;\r\n\r\n      function callback(httpResp) {\r\n        resp.httpResponse.stream = httpResp;\r\n        var stream = resp.request.httpRequest.stream;\r\n        var service = resp.request.service;\r\n        var api = service.api;\r\n        var operationName = resp.request.operation;\r\n        var operation = api.operations[operationName] || {};\r\n\r\n        httpResp.on('headers', function onHeaders(statusCode, headers, statusMessage) {\r\n          resp.request.emit(\r\n            'httpHeaders',\r\n            [statusCode, headers, resp, statusMessage]\r\n          );\r\n\r\n          if (!resp.httpResponse.streaming) {\r\n            if (AWS.HttpClient.streamsApiVersion === 2) { // streams2 API check\r\n              // if we detect event streams, we're going to have to\r\n              // return the stream immediately\r\n              if (operation.hasEventOutput && service.successfulResponse(resp)) {\r\n                // skip reading the IncomingStream\r\n                resp.request.emit('httpDone');\r\n                done();\r\n                return;\r\n              }\r\n\r\n              httpResp.on('readable', function onReadable() {\r\n                var data = httpResp.read();\r\n                if (data !== null) {\r\n                  resp.request.emit('httpData', [data, resp]);\r\n                }\r\n              });\r\n            } else { // legacy streams API\r\n              httpResp.on('data', function onData(data) {\r\n                resp.request.emit('httpData', [data, resp]);\r\n              });\r\n            }\r\n          }\r\n        });\r\n\r\n        httpResp.on('end', function onEnd() {\r\n          if (!stream || !stream.didCallback) {\r\n            if (AWS.HttpClient.streamsApiVersion === 2 && (operation.hasEventOutput && service.successfulResponse(resp))) {\r\n              // don't concatenate response chunks when streaming event stream data when response is successful\r\n              return;\r\n            }\r\n            resp.request.emit('httpDone');\r\n            done();\r\n          }\r\n        });\r\n      }\r\n\r\n      function progress(httpResp) {\r\n        httpResp.on('sendProgress', function onSendProgress(value) {\r\n          resp.request.emit('httpUploadProgress', [value, resp]);\r\n        });\r\n\r\n        httpResp.on('receiveProgress', function onReceiveProgress(value) {\r\n          resp.request.emit('httpDownloadProgress', [value, resp]);\r\n        });\r\n      }\r\n\r\n      function error(err) {\r\n        if (err.code !== 'RequestAbortedError') {\r\n          var errCode = err.code === 'TimeoutError' ? err.code : 'NetworkingError';\r\n          err = AWS.util.error(err, {\r\n            code: errCode,\r\n            region: resp.request.httpRequest.region,\r\n            hostname: resp.request.httpRequest.endpoint.hostname,\r\n            retryable: true\r\n          });\r\n        }\r\n        resp.error = err;\r\n        resp.request.emit('httpError', [resp.error, resp], function() {\r\n          done();\r\n        });\r\n      }\r\n\r\n      function executeSend() {\r\n        var http = AWS.HttpClient.getInstance();\r\n        var httpOptions = resp.request.service.config.httpOptions || {};\r\n        try {\r\n          var stream = http.handleRequest(resp.request.httpRequest, httpOptions,\r\n                                          callback, error);\r\n          progress(stream);\r\n        } catch (err) {\r\n          error(err);\r\n        }\r\n      }\r\n      var timeDiff = (resp.request.service.getSkewCorrectedDate() - this.signedAt) / 1000;\r\n      if (timeDiff >= 60 * 10) { // if we signed 10min ago, re-sign\r\n        this.emit('sign', [this], function(err) {\r\n          if (err) done(err);\r\n          else executeSend();\r\n        });\r\n      } else {\r\n        executeSend();\r\n      }\r\n    });\r\n\r\n    add('HTTP_HEADERS', 'httpHeaders',\r\n        function HTTP_HEADERS(statusCode, headers, resp, statusMessage) {\r\n      resp.httpResponse.statusCode = statusCode;\r\n      resp.httpResponse.statusMessage = statusMessage;\r\n      resp.httpResponse.headers = headers;\r\n      resp.httpResponse.body = AWS.util.buffer.toBuffer('');\r\n      resp.httpResponse.buffers = [];\r\n      resp.httpResponse.numBytes = 0;\r\n      var dateHeader = headers.date || headers.Date;\r\n      var service = resp.request.service;\r\n      if (dateHeader) {\r\n        var serverTime = Date.parse(dateHeader);\r\n        if (service.config.correctClockSkew\r\n            && service.isClockSkewed(serverTime)) {\r\n          service.applyClockOffset(serverTime);\r\n        }\r\n      }\r\n    });\r\n\r\n    add('HTTP_DATA', 'httpData', function HTTP_DATA(chunk, resp) {\r\n      if (chunk) {\r\n        if (AWS.util.isNode()) {\r\n          resp.httpResponse.numBytes += chunk.length;\r\n\r\n          var total = resp.httpResponse.headers['content-length'];\r\n          var progress = { loaded: resp.httpResponse.numBytes, total: total };\r\n          resp.request.emit('httpDownloadProgress', [progress, resp]);\r\n        }\r\n\r\n        resp.httpResponse.buffers.push(AWS.util.buffer.toBuffer(chunk));\r\n      }\r\n    });\r\n\r\n    add('HTTP_DONE', 'httpDone', function HTTP_DONE(resp) {\r\n      // convert buffers array into single buffer\r\n      if (resp.httpResponse.buffers && resp.httpResponse.buffers.length > 0) {\r\n        var body = AWS.util.buffer.concat(resp.httpResponse.buffers);\r\n        resp.httpResponse.body = body;\r\n      }\r\n      delete resp.httpResponse.numBytes;\r\n      delete resp.httpResponse.buffers;\r\n    });\r\n\r\n    add('FINALIZE_ERROR', 'retry', function FINALIZE_ERROR(resp) {\r\n      if (resp.httpResponse.statusCode) {\r\n        resp.error.statusCode = resp.httpResponse.statusCode;\r\n        if (resp.error.retryable === undefined) {\r\n          resp.error.retryable = this.service.retryableError(resp.error, this);\r\n        }\r\n      }\r\n    });\r\n\r\n    add('INVALIDATE_CREDENTIALS', 'retry', function INVALIDATE_CREDENTIALS(resp) {\r\n      if (!resp.error) return;\r\n      switch (resp.error.code) {\r\n        case 'RequestExpired': // EC2 only\r\n        case 'ExpiredTokenException':\r\n        case 'ExpiredToken':\r\n          resp.error.retryable = true;\r\n          resp.request.service.config.credentials.expired = true;\r\n      }\r\n    });\r\n\r\n    add('EXPIRED_SIGNATURE', 'retry', function EXPIRED_SIGNATURE(resp) {\r\n      var err = resp.error;\r\n      if (!err) return;\r\n      if (typeof err.code === 'string' && typeof err.message === 'string') {\r\n        if (err.code.match(/Signature/) && err.message.match(/expired/)) {\r\n          resp.error.retryable = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    add('CLOCK_SKEWED', 'retry', function CLOCK_SKEWED(resp) {\r\n      if (!resp.error) return;\r\n      if (this.service.clockSkewError(resp.error)\r\n          && this.service.config.correctClockSkew) {\r\n        resp.error.retryable = true;\r\n      }\r\n    });\r\n\r\n    add('REDIRECT', 'retry', function REDIRECT(resp) {\r\n      if (resp.error && resp.error.statusCode >= 300 &&\r\n          resp.error.statusCode < 400 && resp.httpResponse.headers['location']) {\r\n        this.httpRequest.endpoint =\r\n          new AWS.Endpoint(resp.httpResponse.headers['location']);\r\n        this.httpRequest.headers['Host'] = this.httpRequest.endpoint.host;\r\n        resp.error.redirect = true;\r\n        resp.error.retryable = true;\r\n      }\r\n    });\r\n\r\n    add('RETRY_CHECK', 'retry', function RETRY_CHECK(resp) {\r\n      if (resp.error) {\r\n        if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\r\n          resp.error.retryDelay = 0;\r\n        } else if (resp.retryCount < resp.maxRetries) {\r\n          resp.error.retryDelay = this.service.retryDelays(resp.retryCount, resp.error) || 0;\r\n        }\r\n      }\r\n    });\r\n\r\n    addAsync('RESET_RETRY_STATE', 'afterRetry', function RESET_RETRY_STATE(resp, done) {\r\n      var delay, willRetry = false;\r\n\r\n      if (resp.error) {\r\n        delay = resp.error.retryDelay || 0;\r\n        if (resp.error.retryable && resp.retryCount < resp.maxRetries) {\r\n          resp.retryCount++;\r\n          willRetry = true;\r\n        } else if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\r\n          resp.redirectCount++;\r\n          willRetry = true;\r\n        }\r\n      }\r\n\r\n      // delay < 0 is a signal from customBackoff to skip retries\r\n      if (willRetry && delay >= 0) {\r\n        resp.error = null;\r\n        setTimeout(done, delay);\r\n      } else {\r\n        done();\r\n      }\r\n    });\r\n  }),\r\n\r\n  CorePost: new SequentialExecutor().addNamedListeners(function(add) {\r\n    add('EXTRACT_REQUEST_ID', 'extractData', AWS.util.extractRequestId);\r\n    add('EXTRACT_REQUEST_ID', 'extractError', AWS.util.extractRequestId);\r\n\r\n    add('ENOTFOUND_ERROR', 'httpError', function ENOTFOUND_ERROR(err) {\r\n      function isDNSError(err) {\r\n        return err.errno === 'ENOTFOUND' ||\r\n          typeof err.errno === 'number' &&\r\n          typeof AWS.util.getSystemErrorName === 'function' &&\r\n          ['EAI_NONAME', 'EAI_NODATA'].indexOf(AWS.util.getSystemErrorName(err.errno) >= 0);\r\n      }\r\n      if (err.code === 'NetworkingError' && isDNSError(err)) {\r\n        var message = 'Inaccessible host: `' + err.hostname + '\\' at port `' + err.port +\r\n          '\\'. This service may not be available in the `' + err.region +\r\n          '\\' region.';\r\n        this.response.error = AWS.util.error(new Error(message), {\r\n          code: 'UnknownEndpoint',\r\n          region: err.region,\r\n          hostname: err.hostname,\r\n          retryable: true,\r\n          originalError: err\r\n        });\r\n      }\r\n    });\r\n  }),\r\n\r\n  Logger: new SequentialExecutor().addNamedListeners(function(add) {\r\n    add('LOG_REQUEST', 'complete', function LOG_REQUEST(resp) {\r\n      var req = resp.request;\r\n      var logger = req.service.config.logger;\r\n      if (!logger) return;\r\n      function filterSensitiveLog(inputShape, shape) {\r\n        if (!shape) {\r\n          return shape;\r\n        }\r\n        if (inputShape.isSensitive) {\r\n          return '***SensitiveInformation***';\r\n        }\r\n        switch (inputShape.type) {\r\n          case 'structure':\r\n            var struct = {};\r\n            AWS.util.each(shape, function(subShapeName, subShape) {\r\n              if (Object.prototype.hasOwnProperty.call(inputShape.members, subShapeName)) {\r\n                struct[subShapeName] = filterSensitiveLog(inputShape.members[subShapeName], subShape);\r\n              } else {\r\n                struct[subShapeName] = subShape;\r\n              }\r\n            });\r\n            return struct;\r\n          case 'list':\r\n            var list = [];\r\n            AWS.util.arrayEach(shape, function(subShape, index) {\r\n              list.push(filterSensitiveLog(inputShape.member, subShape));\r\n            });\r\n            return list;\r\n          case 'map':\r\n            var map = {};\r\n            AWS.util.each(shape, function(key, value) {\r\n              map[key] = filterSensitiveLog(inputShape.value, value);\r\n            });\r\n            return map;\r\n          default:\r\n            return shape;\r\n        }\r\n      }\r\n\r\n      function buildMessage() {\r\n        var time = resp.request.service.getSkewCorrectedDate().getTime();\r\n        var delta = (time - req.startTime.getTime()) / 1000;\r\n        var ansi = logger.isTTY ? true : false;\r\n        var status = resp.httpResponse.statusCode;\r\n        var censoredParams = req.params;\r\n        if (\r\n          req.service.api.operations &&\r\n              req.service.api.operations[req.operation] &&\r\n              req.service.api.operations[req.operation].input\r\n        ) {\r\n          var inputShape = req.service.api.operations[req.operation].input;\r\n          censoredParams = filterSensitiveLog(inputShape, req.params);\r\n        }\r\n        var params = require('util').inspect(censoredParams, true, null);\r\n        var message = '';\r\n        if (ansi) message += '\\x1B[33m';\r\n        message += '[AWS ' + req.service.serviceIdentifier + ' ' + status;\r\n        message += ' ' + delta.toString() + 's ' + resp.retryCount + ' retries]';\r\n        if (ansi) message += '\\x1B[0;1m';\r\n        message += ' ' + AWS.util.string.lowerFirst(req.operation);\r\n        message += '(' + params + ')';\r\n        if (ansi) message += '\\x1B[0m';\r\n        return message;\r\n      }\r\n\r\n      var line = buildMessage();\r\n      if (typeof logger.log === 'function') {\r\n        logger.log(line);\r\n      } else if (typeof logger.write === 'function') {\r\n        logger.write(line + '\\n');\r\n      }\r\n    });\r\n  }),\r\n\r\n  Json: new SequentialExecutor().addNamedListeners(function(add) {\r\n    var svc = require('./protocol/json');\r\n    add('BUILD', 'build', svc.buildRequest);\r\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\r\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\r\n  }),\r\n\r\n  Rest: new SequentialExecutor().addNamedListeners(function(add) {\r\n    var svc = require('./protocol/rest');\r\n    add('BUILD', 'build', svc.buildRequest);\r\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\r\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\r\n  }),\r\n\r\n  RestJson: new SequentialExecutor().addNamedListeners(function(add) {\r\n    var svc = require('./protocol/rest_json');\r\n    add('BUILD', 'build', svc.buildRequest);\r\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\r\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\r\n    add('UNSET_CONTENT_LENGTH', 'afterBuild', svc.unsetContentLength);\r\n  }),\r\n\r\n  RestXml: new SequentialExecutor().addNamedListeners(function(add) {\r\n    var svc = require('./protocol/rest_xml');\r\n    add('BUILD', 'build', svc.buildRequest);\r\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\r\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\r\n  }),\r\n\r\n  Query: new SequentialExecutor().addNamedListeners(function(add) {\r\n    var svc = require('./protocol/query');\r\n    add('BUILD', 'build', svc.buildRequest);\r\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\r\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\r\n  })\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}