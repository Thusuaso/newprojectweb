{"ast":null,"code":"import CustomersIslem from \"./CustomersIslem\";\nimport service from \"@/service/Customers\";\nimport { mapGetters } from \"vuex\";\nimport MusteriDetay from \"@/components/musteriler/MusteriDetay\";\nimport musteriService from \"@/service/MusteriIslemService\";\nimport TeklifGirisForm from \"@/components/teklifler/TeklifGirisForm\";\nexport default {\n  computed: {\n    ...mapGetters([\"satisci_detay\", \"temsilciler_list\", \"musteri_teklifler\", \"musteri_model\", \"musteriAdi\"])\n  },\n  components: {\n    CustomersIslem,\n    MusteriDetay,\n    teklifGirisForm: TeklifGirisForm\n  },\n  data() {\n    return {\n      is_teklif_form: false,\n      is_musteri_form: false,\n      is_musteri_yeni: false,\n      isMobile: 0,\n      temsilciChange: false,\n      filter_temsilci_list: null,\n      select_temsilci: \"\",\n      checked: false,\n      selectedOncelik: {},\n      oncelikler: [{\n        oncelik: \"A\"\n      }, {\n        oncelik: \"B\"\n      }, {\n        oncelik: \"C\"\n      }],\n      is_form1: false,\n      is_form2: false,\n      select_musteri: null,\n      siparisFormBaslik: \"\",\n      yeniSiparis: true\n    };\n  },\n  props: {\n    select_satisci: {\n      type: String,\n      required: false,\n      default: \"\"\n    },\n    oncelik: {\n      type: String,\n      required: false\n    },\n    select_musteri_id: {\n      type: String,\n      required: false\n    },\n    satisciDurum: {\n      type: String,\n      required: false\n    },\n    teklifId: {\n      type: Number,\n      required: false\n    }\n  },\n  created() {\n    this.isMobile = window.innerWidth;\n    this.siparisler = this.satisci_detay;\n    const user = this.$store.getters.__getUsername;\n    if (user == \"Gizem\") {\n      this.temsilciChange = true;\n    }\n  },\n  methods: {\n    isClickDetayGoster() {\n      if (this.satisciDurum == \"Musteri\") {\n        musteriService.getMusteriDetay(this.select_musteri_id).then(data => {\n          this.$store.dispatch(\"musteri_detay_yukle_act\", data);\n          this.is_musteri_yeni = false;\n          this.is_musteri_form = true;\n        });\n      } else {\n        this.is_teklif_form = true;\n      }\n    },\n    isTemsilciSelected(event) {\n      service.setTemsilci(this.select_satisci.musteriadi, event.value.id).then(data => {\n        if (data.status) {\n          this.$toast.add({\n            severity: \"success\",\n            summary: \"Temsilci\",\n            detail: \"Temsilci Başarıyla Değiştirildi\",\n            life: 3000\n          });\n          this.$store.dispatch(\"customers_yukle_act\", data.customerData);\n          this.$store.dispatch(\"customers_yukle_all_act\", data.customerData);\n          this.emmitter.emit(\"followStatus\", false);\n        } else {\n          this.$toast.add({\n            severity: \"warning\",\n            summary: \"Temsilci\",\n            detail: \"Temsilci Değiştirme Hata\",\n            life: 3000\n          });\n        }\n      });\n    },\n    temsilci_complete_event(event) {\n      this.filter_temsilci_list = this.temsilciler_list.filter(x => {\n        return x.kullanici_adi.toString().toLowerCase().indexOf(event.query.toString().toLowerCase()) >= 0;\n      });\n    },\n    isFollowingChange() {\n      service.setFollowing(this.select_satisci.musteriadi, this.checked).then(data => {\n        if (data.status) {\n          this.$toast.add({\n            severity: \"success\",\n            summary: \"Takip\",\n            detail: \"Takip Başarıyla Değiştirildi\",\n            life: 3000\n          });\n          this.$store.dispatch(\"customers_yukle_act\", data.changeFollowing);\n          this.$store.dispatch(\"customers_yukle_all_act\", data.changeFollowing);\n          this.emmitter.emit(\"followStatus\", false);\n        } else {\n          this.$toast.add({\n            severity: \"warning\",\n            summary: \"Takip\",\n            detail: \"Takip Değiştirme Hata\",\n            life: 3000\n          });\n        }\n      });\n    },\n    isChangeOncelik(event) {\n      service.setCustomersPriority(this.select_satisci.musteriadi, event.value.oncelik).then(data => {\n        if (data.status) {\n          this.$toast.add({\n            severity: \"success\",\n            summary: \"Öncelik\",\n            detail: \"Öncelik Başarıyla Değiştirildi\",\n            life: 3000\n          });\n          this.$store.dispatch(\"customers_yukle_act\", data.changePriority);\n          this.$store.dispatch(\"customers_yukle_all_act\", data.changePriority);\n        } else {\n          this.$toast.add({\n            severity: \"warning\",\n            summary: \"Öncelik\",\n            detail: \"Öncelik Değiştirme Hata\",\n            life: 3000\n          });\n        }\n      });\n    },\n    evrak_indir(dosya_link, dosya_id) {\n      const link = document.createElement(\"a\");\n      link.href = `https://file-service.mekmar.com/file/download/satisci/satisciDosya/${dosya_id}/${dosya_link}`;\n      link.setAttribute(\"download\", `${dosya_link}.pdf`);\n      document.body.appendChild(link);\n      link.click();\n    },\n    faturaDowload(dosya) {\n      this.evrak_indir(dosya.satisci_cloud_dosya, dosya.id, \"Fatura\");\n    },\n    yeniSiparisAc() {\n      this.select_musteri = null;\n      this.siparisFormBaslik = \"Yeni Giriş\";\n      service.getSatisciModel().then(data => {\n        data.musteriadi = this.musteriAdi;\n        this.$store.dispatch(\"satisciKayitLoadAct\", data);\n        this.is_form2 = true;\n      });\n    },\n    musteri_sec(event) {\n      this.select_musteri = event.data;\n      service.getSatisciMusteriListe(event.data.musteriadi, event.data.id).then(data => {\n        const result_data = data;\n        this.siparisFormBaslik = event.data.id + \" / \" + event.data.musteriadi;\n        this.$store.dispatch(\"satisciKayitLoadAct\", result_data);\n        this.is_form1 = true;\n        this.select_musteri = null;\n      });\n    }\n  },\n  mounted() {\n    this.selectedOncelik = {\n      oncelik: this.oncelik\n    };\n    this.emitter.on(\"hatirlatmaKaydet\", data => {\n      this.is_form1 = data;\n      this.is_form2 = data;\n    });\n  }\n};","map":{"version":3,"mappings":"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","names":["CustomersIslem","service","mapGetters","MusteriDetay","musteriService","TeklifGirisForm","computed","components","teklifGirisForm","data","is_teklif_form","is_musteri_form","is_musteri_yeni","isMobile","temsilciChange","filter_temsilci_list","select_temsilci","checked","selectedOncelik","oncelikler","oncelik","is_form1","is_form2","select_musteri","siparisFormBaslik","yeniSiparis","props","select_satisci","type","String","required","default","select_musteri_id","satisciDurum","teklifId","Number","created","window","innerWidth","siparisler","satisci_detay","user","$store","getters","__getUsername","methods","isClickDetayGoster","getMusteriDetay","then","dispatch","isTemsilciSelected","event","setTemsilci","musteriadi","value","id","status","$toast","add","severity","summary","detail","life","customerData","emmitter","emit","temsilci_complete_event","temsilciler_list","filter","x","kullanici_adi","toString","toLowerCase","indexOf","query","isFollowingChange","setFollowing","changeFollowing","isChangeOncelik","setCustomersPriority","changePriority","evrak_indir","dosya_link","dosya_id","link","document","createElement","href","setAttribute","body","appendChild","click","faturaDowload","dosya","satisci_cloud_dosya","yeniSiparisAc","getSatisciModel","musteriAdi","musteri_sec","getSatisciMusteriListe","result_data","mounted","emitter","on"],"sourceRoot":"","sources":["C:\\PROJELER\\NewProjects\\gitPull\\newprojectweb\\src\\components\\customers\\CustomersDetay.vue"],"sourcesContent":["<template>\r\n  <section>\r\n    <br />\r\n    <!-- <div class=\"columns is-centered\">\r\n      <div class=\"card\" style=\"height: 450px; weight: 500px\">\r\n        <div style=\"margin-left: 20px\">\r\n          <div class=\"columns is-2\">\r\n            <div class=\"column is-2 is centered\" style=\"margin-left: 5px\">\r\n              <Button @click=\"yeniSiparisAc\" label=\"Yeni\" />\r\n            </div>\r\n            <div class=\"column is-2\">\r\n              <div class=\"columns\">\r\n                <div class=\"column\">\r\n                  <Dropdown\r\n                    v-model=\"selectedOncelik\"\r\n                    :options=\"oncelikler\"\r\n                    optionLabel=\"oncelik\"\r\n                    placeholder=\"Öncelik Seç\"\r\n                    @change=\"isChangeOncelik\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"column is-2\">\r\n              <div class=\"columns\">\r\n                <div class=\"column is-6\">\r\n                  <span>Takipten Çık</span>\r\n                </div>\r\n                <div class=\"column is-1\">\r\n                  <InputSwitch v-model=\"checked\" @click=\"isFollowingChange\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"column is-2\" v-if=\"temsilciChange\">\r\n              <div class=\"columns\">\r\n                <div class=\"column\">\r\n                  <AutoComplete\r\n                    v-model=\"select_temsilci\"\r\n                    :suggestions=\"filter_temsilci_list\"\r\n                    @complete=\"temsilci_complete_event($event)\"\r\n                    field=\"kullanici_adi\"\r\n                    @item-select=\"isTemsilciSelected\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"column is-2\">\r\n              <Button\r\n                :label=\"satisciDurum + ' ' + 'Detay Aç'\"\r\n                @click=\"isClickDetayGoster\"\r\n              ></Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Dialog\r\n          v-model:visible=\"is_musteri_form\"\r\n          :modal=\"true\"\r\n          header=\"Musteri Detay\"\r\n          maximizable\r\n          position=\"top\"\r\n        >\r\n          <MusteriDetay :is_yeni=\"is_musteri_yeni\"></MusteriDetay>\r\n        </Dialog>\r\n        <Dialog\r\n          v-model:visible=\"is_teklif_form\"\r\n          :modal=\"true\"\r\n          header=\"Teklif Detay\"\r\n          maximizable\r\n          position=\"top\"\r\n        >\r\n          <teklif-giris-form :yeniKayit=\"false\" :teklifId=\"teklifId\" />\r\n        </Dialog>\r\n        <div\r\n          class=\"column is-12 is-multiline is-centered\"\r\n        >\r\n          <div class=\"column is-12 is-multiline\">\r\n            <DataTable\r\n              :value=\"satisci_detay\"\r\n              :scrollable=\"true\"\r\n              scrollHeight=\"750px\"\r\n              v-model:selection=\"select_musteri\"\r\n              @row-select=\"musteri_sec($event)\"\r\n              selectionMode=\"single\"\r\n            >\r\n              <Column\r\n                field=\"sira\"\r\n                header=\"#\"\r\n                headerStyle=\"width:1%\"\r\n                bodyStyle=\"text-align:center\"\r\n              >\r\n                <template #body=\"slotProps\">\r\n                  {{ slotProps.data.sira }}\r\n                </template>\r\n              </Column>\r\n              <Column\r\n                field=\"tarih_giris\"\r\n                header=\"Kayıt\"\r\n                headerStyle=\"width:2%\"\r\n                bodyStyle=\"text-align:center\"\r\n              >\r\n                <template #body=\"slotProps\">\r\n                  {{ slotProps.data.tarih_giris }}\r\n                </template>\r\n              </Column>\r\n              <Column\r\n                field=\"baslik\"\r\n                header=\"Başlık\"\r\n                headerStyle=\"width:3%\"\r\n                bodyStyle=\"text-align:center\"\r\n              >\r\n                <template #body=\"slotProps\">\r\n                  {{ slotProps.data.baslik }}\r\n                </template>\r\n              </Column>\r\n\r\n              <Column\r\n                field=\"aciklama\"\r\n                header=\"Açıklama Detayı\"\r\n                headerStyle=\"width:10% ;\"\r\n                bodyStyle=\"text-align:left\"\r\n              >\r\n                <template #body=\"slotProps\">\r\n                  {{ slotProps.data.aciklama }}\r\n                </template>\r\n              </Column>\r\n\r\n              <Column\r\n                field=\"hatirlatmaTarihi\"\r\n                header=\"Hatırlatma T.\"\r\n                headerStyle=\"width:3%\"\r\n                bodyStyle=\"text-align:center\"\r\n              >\r\n                <template #body=\"slotProps\">\r\n                  {{ slotProps.data.hatirlatmaTarihi }}\r\n                </template>\r\n              </Column>\r\n\r\n              <Column\r\n                field=\"hatirlatma_notu\"\r\n                header=\"Hatırlatma Notu\"\r\n                headerStyle=\"width:10%; \"\r\n                bodyStyle=\"text-align:left\"\r\n              >\r\n                <template #body=\"slotProps\">\r\n                  {{ slotProps.data.hatirlatma_notu }}\r\n                </template>\r\n              </Column>\r\n              <Column\r\n                header=\"İndir\"\r\n                headerStyle=\"width:2%;\"\r\n                bodyStyle=\"text-align:center\"\r\n              >\r\n                <template #body=\"slotProps\">\r\n                  <Button\r\n                    type=\"button\"\r\n                    :disabled=\"slotProps.data.satisci_cloud > 0 ? false : true\"\r\n                    @click=\"faturaDowload(slotProps.data)\"\r\n                    icon=\"fas fa-chevron-circle-down\"\r\n                    class=\"p-button\"\r\n                    style=\"margin-right: 0.5em; background-color: #3cb371\"\r\n                  ></Button>\r\n                </template>\r\n              </Column>\r\n              <Column\r\n                field=\"temsilci\"\r\n                header=\"Temsilci\"\r\n                headerStyle=\"width:2%\"\r\n                bodyStyle=\"text-align:center\"\r\n              >\r\n                <template #body=\"slotProps\">\r\n                  {{ slotProps.data.temsilci }}\r\n                </template>\r\n              </Column>\r\n            </DataTable>\r\n          </div>\r\n\r\n          <p label=\"Teklif Notları\" v-if=\"musteri_teklifler.length > 0\">\r\n            <InputText v-model=\"musteri_teklifler[0].aciklama\"></InputText>\r\n          </p>\r\n        </div>\r\n        \r\n      </div>\r\n    </div> -->\r\n    <div class=\"columns\">\r\n      <div class=\"column\">\r\n        <Button @click=\"yeniSiparisAc\" label=\"Yeni\" />\r\n      </div>\r\n      <div class=\"column\">\r\n        <Dropdown v-model=\"selectedOncelik\" :options=\"oncelikler\" optionLabel=\"oncelik\" placeholder=\"Öncelik Seç\"\r\n          @change=\"isChangeOncelik\" />\r\n      </div>\r\n      <div class=\"column\">\r\n\r\n      </div>\r\n      <div class=\"column\">\r\n\r\n      </div>\r\n    </div>\r\n\r\n\r\n\r\n\r\n\r\n    <Transition name=\"bounce\">\r\n      <Dialog\r\n        v-model:visible=\"is_form1\"\r\n        v-model:header=\"siparisFormBaslik\"\r\n        maximizable\r\n        position=\"top\"\r\n      >\r\n        <div class=\"columns\">\r\n          <div class=\"column is-12\">\r\n            <CustomersIslem :yeniSiparis=\"false\" />\r\n          </div>\r\n        </div>\r\n      </Dialog>\r\n    </Transition>\r\n    <Transition name=\"bounce\">\r\n      <Dialog\r\n        v-model:visible=\"is_form2\"\r\n        v-model:header=\"siparisFormBaslik\"\r\n        maximizable\r\n        position=\"top\"\r\n      >\r\n        <div class=\"columns\">\r\n          <div class=\"column is-12\">\r\n            <CustomersIslem\r\n              :select_satisci=\"select_satisci\"\r\n              :yeniSiparis=\"true\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </Dialog>\r\n    </Transition>\r\n  </section>\r\n</template>\r\n<script>\r\nimport CustomersIslem from \"./CustomersIslem\";\r\nimport service from \"@/service/Customers\";\r\nimport { mapGetters } from \"vuex\";\r\nimport MusteriDetay from \"@/components/musteriler/MusteriDetay\";\r\nimport musteriService from \"@/service/MusteriIslemService\";\r\nimport TeklifGirisForm from \"@/components/teklifler/TeklifGirisForm\";\r\nexport default {\r\n  computed: {\r\n    ...mapGetters([\r\n      \"satisci_detay\",\r\n      \"temsilciler_list\",\r\n      \"musteri_teklifler\",\r\n      \"musteri_model\",\r\n      \"musteriAdi\",\r\n    ]),\r\n  },\r\n  components: {\r\n    CustomersIslem,\r\n    MusteriDetay,\r\n    teklifGirisForm: TeklifGirisForm,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      is_teklif_form: false,\r\n      is_musteri_form: false,\r\n      is_musteri_yeni: false,\r\n      isMobile: 0,\r\n      temsilciChange: false,\r\n      filter_temsilci_list: null,\r\n      select_temsilci: \"\",\r\n      checked: false,\r\n      selectedOncelik: {},\r\n      oncelikler: [{ oncelik: \"A\" }, { oncelik: \"B\" }, { oncelik: \"C\" }],\r\n      is_form1: false,\r\n      is_form2: false,\r\n\r\n      select_musteri: null,\r\n      siparisFormBaslik: \"\",\r\n      yeniSiparis: true,\r\n    };\r\n  },\r\n  props: {\r\n    select_satisci: {\r\n      type: String,\r\n      required: false,\r\n      default: \"\",\r\n    },\r\n    oncelik: {\r\n      type: String,\r\n      required: false,\r\n    },\r\n    select_musteri_id: {\r\n      type: String,\r\n      required: false,\r\n    },\r\n    satisciDurum: {\r\n      type: String,\r\n      required: false,\r\n    },\r\n    teklifId: {\r\n      type: Number,\r\n      required: false,\r\n    },\r\n  },\r\n  created() {\r\n    this.isMobile = window.innerWidth;\r\n    this.siparisler = this.satisci_detay;\r\n    const user = this.$store.getters.__getUsername;\r\n    if (user == \"Gizem\") {\r\n      this.temsilciChange = true;\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    isClickDetayGoster() {\r\n      if (this.satisciDurum == \"Musteri\") {\r\n        musteriService.getMusteriDetay(this.select_musteri_id).then((data) => {\r\n          this.$store.dispatch(\"musteri_detay_yukle_act\", data);\r\n          this.is_musteri_yeni = false;\r\n          this.is_musteri_form = true;\r\n        });\r\n      } else {\r\n        this.is_teklif_form = true;\r\n      }\r\n    },\r\n    isTemsilciSelected(event) {\r\n      service\r\n        .setTemsilci(this.select_satisci.musteriadi, event.value.id)\r\n        .then((data) => {\r\n          if (data.status) {\r\n            this.$toast.add({\r\n              severity: \"success\",\r\n              summary: \"Temsilci\",\r\n              detail: \"Temsilci Başarıyla Değiştirildi\",\r\n              life: 3000,\r\n            });\r\n            this.$store.dispatch(\"customers_yukle_act\", data.customerData);\r\n            this.$store.dispatch(\"customers_yukle_all_act\", data.customerData);\r\n            this.emmitter.emit(\"followStatus\", false);\r\n          } else {\r\n            this.$toast.add({\r\n              severity: \"warning\",\r\n              summary: \"Temsilci\",\r\n              detail: \"Temsilci Değiştirme Hata\",\r\n              life: 3000,\r\n            });\r\n          }\r\n        });\r\n    },\r\n    temsilci_complete_event(event) {\r\n      this.filter_temsilci_list = this.temsilciler_list.filter((x) => {\r\n        return (\r\n          x.kullanici_adi\r\n            .toString()\r\n            .toLowerCase()\r\n            .indexOf(event.query.toString().toLowerCase()) >= 0\r\n        );\r\n      });\r\n    },\r\n    isFollowingChange() {\r\n      service\r\n        .setFollowing(this.select_satisci.musteriadi, this.checked)\r\n        .then((data) => {\r\n          if (data.status) {\r\n            this.$toast.add({\r\n              severity: \"success\",\r\n              summary: \"Takip\",\r\n              detail: \"Takip Başarıyla Değiştirildi\",\r\n              life: 3000,\r\n            });\r\n            this.$store.dispatch(\"customers_yukle_act\", data.changeFollowing);\r\n            this.$store.dispatch(\r\n              \"customers_yukle_all_act\",\r\n              data.changeFollowing\r\n            );\r\n            this.emmitter.emit(\"followStatus\", false);\r\n          } else {\r\n            this.$toast.add({\r\n              severity: \"warning\",\r\n              summary: \"Takip\",\r\n              detail: \"Takip Değiştirme Hata\",\r\n              life: 3000,\r\n            });\r\n          }\r\n        });\r\n    },\r\n    isChangeOncelik(event) {\r\n      service\r\n        .setCustomersPriority(\r\n          this.select_satisci.musteriadi,\r\n          event.value.oncelik\r\n        )\r\n        .then((data) => {\r\n          if (data.status) {\r\n            this.$toast.add({\r\n              severity: \"success\",\r\n              summary: \"Öncelik\",\r\n              detail: \"Öncelik Başarıyla Değiştirildi\",\r\n              life: 3000,\r\n            });\r\n            this.$store.dispatch(\"customers_yukle_act\", data.changePriority);\r\n            this.$store.dispatch(\r\n              \"customers_yukle_all_act\",\r\n              data.changePriority\r\n            );\r\n          } else {\r\n            this.$toast.add({\r\n              severity: \"warning\",\r\n              summary: \"Öncelik\",\r\n              detail: \"Öncelik Değiştirme Hata\",\r\n              life: 3000,\r\n            });\r\n          }\r\n        });\r\n    },\r\n    evrak_indir(dosya_link, dosya_id) {\r\n      const link = document.createElement(\"a\");\r\n      link.href = `https://file-service.mekmar.com/file/download/satisci/satisciDosya/${dosya_id}/${dosya_link}`;\r\n\r\n      link.setAttribute(\"download\", `${dosya_link}.pdf`);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n    },\r\n    faturaDowload(dosya) {\r\n      this.evrak_indir(dosya.satisci_cloud_dosya, dosya.id, \"Fatura\");\r\n    },\r\n    yeniSiparisAc() {\r\n      this.select_musteri = null;\r\n      this.siparisFormBaslik = \"Yeni Giriş\";\r\n\r\n      service.getSatisciModel().then((data) => {\r\n        data.musteriadi = this.musteriAdi;\r\n\r\n        this.$store.dispatch(\"satisciKayitLoadAct\", data);\r\n        this.is_form2 = true;\r\n      });\r\n    },\r\n    musteri_sec(event) {\r\n      this.select_musteri = event.data;\r\n\r\n      service\r\n        .getSatisciMusteriListe(event.data.musteriadi, event.data.id)\r\n        .then((data) => {\r\n          const result_data = data;\r\n          this.siparisFormBaslik =\r\n            event.data.id + \" / \" + event.data.musteriadi;\r\n\r\n          this.$store.dispatch(\"satisciKayitLoadAct\", result_data);\r\n          this.is_form1 = true;\r\n\r\n          this.select_musteri = null;\r\n        });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.selectedOncelik = { oncelik: this.oncelik };\r\n\r\n    this.emitter.on(\"hatirlatmaKaydet\", (data) => {\r\n      this.is_form1 = data;\r\n      this.is_form2 = data;\r\n    });\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.isMobile {\r\n  font-size: 9px;\r\n  word-break: break-all;\r\n}\r\n\r\n.urunInput label {\r\n  font-size: 12px;\r\n}\r\n.teklifInput label {\r\n  font-size: 10px;\r\n}\r\n.p-datatable {\r\n  font-size: 12px;\r\n}\r\n.card2 {\r\n  margin-left: 15%;\r\n}\r\n.bounce-enter-active {\r\n  animation: bounce-in 0.5s;\r\n}\r\n\r\n.bounce-leave-active {\r\n  animation: bounce-in 0.5s reverse;\r\n}\r\n\r\n@keyframes bounce-in {\r\n  0% {\r\n    transform: scale(0);\r\n  }\r\n\r\n  50% {\r\n    transform: scale(1.25);\r\n  }\r\n\r\n  100% {\r\n    transform: scale(1);\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}